<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <title>REMEEX - Transferir Fondos</title>
  <link rel="icon" href="https://w7.pngwing.com/pngs/400/28/png-transparent-credit-card-computer-icons-visa-electron-bank-curio-blue-text-rectangle-thumbnail.png" type="image/png">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <script src="https://cdn.jsdelivr.net/npm/vue@2.6.14/dist/vue.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/v-mask@2.3.0/dist/v-mask.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/gsap@3.11.4/dist/gsap.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>

  <style>
    :root {
      /* Modern color palette based on Revolut/N26 style */
      --primary: #1a1f71;
      --primary-dark: #0c1045;
      --primary-light: #3244b6;
      --secondary: #00579f;
      --accent: #f7b600;
      --success: #00d34d;
      --danger: #ff4d4d;
      --warning: #ffad33;
      --info: #0095ff;
      --neutral-100: #ffffff;
      --neutral-200: #f5f7fa;
      --neutral-300: #eaecf0;
      --neutral-400: #d0d5dd;
      --neutral-500: #9da4b4;
      --neutral-600: #6e7891;
      --neutral-700: #4f5d75;
      --neutral-800: #293249;
      --neutral-900: #1a1f37;

      /* Shadows & Effects */
      --shadow-sm: 0 1px 3px rgba(16, 24, 40, 0.1);
      --shadow-md: 0 4px 8px -2px rgba(16, 24, 40, 0.1), 0 2px 4px -2px rgba(16, 24, 40, 0.06);
      --shadow-lg: 0 12px 16px -4px rgba(16, 24, 40, 0.08), 0 4px 6px -2px rgba(16, 24, 40, 0.03);
      --shadow-xl: 0 20px 24px -4px rgba(16, 24, 40, 0.08), 0 8px 8px -4px rgba(16, 24, 40, 0.03);
      --shadow-inner: inset 0 2px 4px 0 rgba(0, 0, 0, 0.06);
      
      /* Border radius */
      --radius-sm: 6px;
      --radius-md: 12px;
      --radius-lg: 16px;
      --radius-xl: 24px;
      --radius-full: 9999px;
      
      /* Transitions */
      --transition-fast: all 0.2s ease;
      --transition-base: all 0.3s ease;
      --transition-slow: all 0.5s ease;
      
      /* Card gradients */
      --card-gradient: linear-gradient(135deg, #1a1f71 0%, #0c1045 100%);
      --success-gradient: linear-gradient(135deg, #00c057 0%, #00a346 100%);
      --dollar-gradient: linear-gradient(135deg, #2e7d32 0%, #1b5e20 100%);
      --bolivar-gradient: linear-gradient(135deg, #0277bd 0%, #01579b 100%);
      --pending-gradient: linear-gradient(135deg, #FFA726 0%, #EF6C00 100%);
      
      /* Animations */
      --animation-bounce: cubic-bezier(0.34, 1.56, 0.64, 1);
    }
    
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }
    
    body {
      font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
      background: var(--neutral-200);
      color: var(--neutral-900);
      line-height: 1.5;
      -webkit-font-smoothing: antialiased;
      -moz-osx-font-smoothing: grayscale;
      overflow-x: hidden;
      height: 100vh;
      margin: 0;
      position: relative;
    }
    
    /* Scrollbars */
    ::-webkit-scrollbar {
      width: 6px;
      height: 6px;
    }
    
    ::-webkit-scrollbar-track {
      background: var(--neutral-200);
    }
    
    ::-webkit-scrollbar-thumb {
      background: var(--neutral-500);
      border-radius: var(--radius-full);
    }
    
    /* Header */
    .app-header {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 0.6rem 1rem;
      background: var(--neutral-100);
      border-bottom: 1px solid var(--neutral-300);
      box-shadow: var(--shadow-sm);
      z-index: 1000;
      height: 60px;
    }
    
    .header-brand {
      display: flex;
      align-items: center;
      gap: 0.5rem;
    }
    
    .header-brand img {
      height: 32px;
      width: auto;
    }
    
    .header-actions {
      display: flex;
      align-items: center;
      gap: 0.5rem;
    }
    
    .header-action-btn {
      width: 36px;
      height: 36px;
      border-radius: var(--radius-full);
      display: flex;
      align-items: center;
      justify-content: center;
      background: var(--neutral-200);
      color: var(--neutral-700);
      border: none;
      cursor: pointer;
      transition: var(--transition-base);
      position: relative;
    }
    
    .header-action-btn:hover {
      background: var(--neutral-300);
      color: var(--neutral-900);
    }
    
    .notification-badge {
      position: absolute;
      top: -2px;
      right: -2px;
      background: var(--danger);
      color: white;
      border-radius: var(--radius-full);
      font-size: 0.6rem;
      width: 16px;
      height: 16px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: 600;
    }
    
    .header-user {
      display: flex;
      align-items: center;
      gap: 0.5rem;
      cursor: pointer;
      padding: 0.25rem 0.5rem;
      border-radius: var(--radius-md);
      transition: var(--transition-base);
    }
    
    .header-user:hover {
      background: var(--neutral-200);
    }
    
    .header-avatar {
      width: 32px;
      height: 32px;
      border-radius: var(--radius-full);
      background: var(--primary);
      color: white;
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: 600;
      font-size: 0.8rem;
      flex-shrink: 0;
    }
    
    .header-user-info {
      display: none;
    }
    
    @media (min-width: 480px) {
      .header-user-info {
        display: block;
      }
    }
    
    .header-username {
      font-weight: 600;
      font-size: 0.8rem;
      color: var(--neutral-900);
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
      max-width: 120px;
    }
    
    .header-date {
      font-size: 0.7rem;
      color: var(--neutral-600);
    }
    
    /* Container Styles */
    .app-container {
      padding-top: 70px;
      padding-bottom: 70px;
      max-width: 100%;
      margin: 0 auto;
      height: 100vh;
      overflow-y: auto;
      overflow-x: hidden;
      position: relative;
    }
    
    .transfer-content {
      padding: 0.75rem;
      max-width: 800px;
      margin: 0 auto;
    }
    
    /* Balance Card */
    .balance-card {
      background: var(--card-gradient);
      border-radius: var(--radius-lg);
      padding: 1.25rem;
      color: white;
      box-shadow: var(--shadow-lg);
      position: relative;
      overflow: hidden;
      margin-bottom: 1.25rem;
      transition: transform 0.3s var(--animation-bounce), box-shadow 0.3s ease;
    }
    
    .balance-card:hover {
      transform: translateY(-5px);
      box-shadow: var(--shadow-xl);
    }
    
    .card-decoration {
      position: absolute;
      right: -50px;
      bottom: -50px;
      width: 200px;
      height: 200px;
      border-radius: 50%;
      background: radial-gradient(circle, rgba(255,255,255,0.1) 0%, rgba(255,255,255,0) 70%);
      z-index: 1;
    }
    
    .card-decoration:nth-child(2) {
      left: -30px;
      top: -30px;
      width: 150px;
      height: 150px;
    }
    
    .balance-content {
      position: relative;
      z-index: 2;
    }
    
    .balance-label {
      font-size: 0.8rem;
      opacity: 0.8;
      margin-bottom: 0.25rem;
      display: flex;
      align-items: center;
      gap: 0.5rem;
    }
    
    .balance-label i {
      font-size: 0.9rem;
    }
    
    .balance-amount {
      font-size: clamp(1.5rem, 5vw, 2.25rem);
      font-weight: 700;
      margin: 0.5rem 0 0.75rem;
      display: flex;
      align-items: center;
      gap: 0.5rem;
      flex-wrap: nowrap;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }
    
    .currency-flag {
      width: 20px;
      height: 14px;
      border-radius: 2px;
      object-fit: cover;
      box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
      flex-shrink: 0;
    }
    
    .balance-equivalents {
      display: flex;
      flex-wrap: wrap;
      gap: 0.75rem;
      margin-bottom: 0.75rem;
    }
    
    .balance-equivalent {
      background: rgba(255, 255, 255, 0.1);
      border-radius: var(--radius-md);
      padding: 0.4rem 0.6rem;
      font-size: 0.8rem;
      display: flex;
      align-items: center;
      gap: 0.4rem;
      backdrop-filter: blur(5px);
      box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
      white-space: nowrap;
    }
    
    .exchange-rate {
      background: rgba(255, 255, 255, 0.15);
      border-radius: var(--radius-md);
      padding: 0.4rem 0.6rem;
      font-size: 0.75rem;
      margin-bottom: 0.75rem;
      display: inline-block;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
      max-width: 100%;
    }
    
    .balance-date {
      font-size: 0.7rem;
      opacity: 0.7;
      margin-bottom: 0.5rem;
    }
    
    .balance-projection {
      background: rgba(255, 255, 255, 0.1);
      border-radius: var(--radius-md);
      padding: 0.6rem;
      font-size: 0.75rem;
      margin-top: 0.5rem;
      display: none;
    }
    
    .balance-projection-title {
      display: flex;
      align-items: center;
      gap: 0.5rem;
      margin-bottom: 0.4rem;
      font-weight: 500;
    }
    
    .balance-projection-amount {
      font-weight: 700;
      font-size: 0.85rem;
    }
    
    /* Toast Notifications */
    .toast-container {
      position: fixed;
      top: 70px;
      right: 16px;
      z-index: 9999;
      display: flex;
      flex-direction: column;
      gap: 0.75rem;
    }
    
    .toast {
      background: var(--neutral-900);
      color: white;
      border-radius: var(--radius-md);
      padding: 0.75rem 1rem;
      min-width: 250px;
      max-width: 320px;
      box-shadow: var(--shadow-lg);
      display: flex;
      align-items: center;
      gap: 0.75rem;
      animation: slideInRight 0.3s ease, fadeOut 0.3s ease 3s forwards;
    }
    
    .toast.success {
      border-left: 4px solid var(--success);
    }
    
    .toast.error {
      border-left: 4px solid var(--danger);
    }
    
    .toast.warning {
      border-left: 4px solid var(--warning);
    }
    
    .toast.info {
      border-left: 4px solid var(--info);
    }
    
    .toast-icon {
      flex-shrink: 0;
    }
    
    .toast-content {
      flex: 1;
      min-width: 0;
    }
    
    .toast-title {
      font-weight: 600;
      font-size: 0.85rem;
      margin-bottom: 0.2rem;
    }
    
    .toast-message {
      font-size: 0.75rem;
      opacity: 0.9;
      word-wrap: break-word;
    }
    
    .toast-close {
      color: var(--neutral-400);
      cursor: pointer;
      transition: var(--transition-base);
      flex-shrink: 0;
    }
    
    .toast-close:hover {
      color: white;
    }
    
    /* Loading Overlay */
    .loading-overlay {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: rgba(0, 0, 0, 0.8);
      backdrop-filter: blur(5px);
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      z-index: 1100;
      display: none;
    }
    
    .spinner {
      width: 50px;
      height: 50px;
      border: 3px solid rgba(255, 255, 255, 0.2);
      border-radius: 50%;
      border-top-color: white;
      animation: spin 1s linear infinite;
      margin-bottom: 1.5rem;
    }
    
    .loading-text {
      color: white;
      font-size: 1rem;
      margin-bottom: 1.5rem;
      font-weight: 500;
    }
    
    .progress-bar-container {
      width: 80%;
      max-width: 280px;
      height: 8px;
      background: rgba(255, 255, 255, 0.2);
      border-radius: var(--radius-full);
      overflow: hidden;
    }
    
    .progress-bar {
      height: 100%;
      background: white;
      width: 0%;
      border-radius: var(--radius-full);
      transition: width 0.3s ease;
    }
    
    /* Section Titles */
    .section-title {
      font-size: 1rem;
      font-weight: 600;
      color: var(--neutral-900);
      margin-bottom: 1rem;
      display: flex;
      align-items: center;
      justify-content: space-between;
    }
    
    .section-title i {
      margin-right: 0.5rem;
      color: var(--primary);
    }
    
    .section-title a {
      font-size: 0.7rem;
      color: var(--primary);
      text-decoration: none;
    }
    
    /* Cards */
    .card {
      background: var(--neutral-100);
      border-radius: var(--radius-lg);
      box-shadow: var(--shadow-sm);
      padding: 1rem;
      margin-bottom: 1.25rem;
      transition: transform 0.3s var(--animation-bounce), box-shadow 0.3s ease;
    }
    
    .card:hover {
      transform: translateY(-3px);
      box-shadow: var(--shadow-md);
    }
    
    /* Currency Selection Cards */
    .currency-selection {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 1rem;
      margin-bottom: 1.5rem;
    }
    
    .currency-card {
      position: relative;
      overflow: hidden;
      border-radius: var(--radius-lg);
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      padding: 2rem 1rem;
      cursor: pointer;
      color: white;
      transition: all 0.3s var(--animation-bounce);
      text-align: center;
      min-height: 180px;
    }
    
    .currency-card.bolivares {
      background: var(--bolivar-gradient);
    }
    
    .currency-card.dollars {
      background: var(--dollar-gradient);
    }
    
    .currency-card:hover {
      transform: translateY(-8px);
      box-shadow: var(--shadow-xl);
    }
    
    .currency-card .card-decoration {
      opacity: 0.5;
    }
    
    .currency-icon {
      font-size: 2.5rem;
      margin-bottom: 1rem;
    }
    
    .currency-name {
      font-size: 1.25rem;
      font-weight: 700;
      margin-bottom: 0.5rem;
    }
    
    .currency-description {
      font-size: 0.8rem;
      opacity: 0.9;
    }
    
    /* Method Selection Cards */
    .method-selection {
      display: grid;
      grid-template-columns: repeat(1, 1fr);
      gap: 1rem;
      margin-bottom: 1.5rem;
    }
    
    @media (min-width: 640px) {
      .method-selection {
        grid-template-columns: repeat(2, 1fr);
      }
    }
    
    .method-card {
      background: white;
      border-radius: var(--radius-lg);
      border: 1px solid var(--neutral-300);
      padding: 1.25rem;
      cursor: pointer;
      transition: all 0.3s var(--animation-bounce);
      display: flex;
      align-items: center;
      gap: 1rem;
    }
    
    .method-card:hover {
      transform: translateY(-5px);
      border-color: var(--primary-light);
      box-shadow: var(--shadow-md);
    }
    
    .method-icon {
      width: 50px;
      height: 50px;
      border-radius: var(--radius-md);
      background: var(--primary-light);
      color: white;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 1.5rem;
      flex-shrink: 0;
    }
    
    .method-icon.usdt {
      background: #26A17B;
    }
    
    .method-icon.wallet {
      background: #FF9800;
    }
    
    .method-icon.zelle {
      background: #6B4CD9;
    }
    
    .method-icon.transfer {
      background: var(--info);
    }
    
    .method-icon.mobile {
      background: #00BCD4;
    }
    
    .method-icon.bank {
      background: var(--primary);
    }
    
    .method-content {
      flex: 1;
    }
    
    .method-name {
      font-weight: 600;
      font-size: 1rem;
      margin-bottom: 0.25rem;
    }
    
    .method-description {
      font-size: 0.8rem;
      color: var(--neutral-600);
    }
    
    /* Forms */
    .form-group {
      margin-bottom: 1.25rem;
    }
    
    .form-label {
      display: block;
      font-size: 0.8rem;
      font-weight: 500;
      color: var(--neutral-700);
      margin-bottom: 0.5rem;
    }
    
    .form-control {
      width: 100%;
      height: 44px;
      padding: 0 1rem;
      border: 1px solid var(--neutral-400);
      border-radius: var(--radius-md);
      font-size: 0.85rem;
      color: var(--neutral-900);
      background: var(--neutral-100);
      transition: var(--transition-base);
    }
    
    .form-control:focus {
      outline: none;
      border-color: var(--primary);
      box-shadow: 0 0 0 3px rgba(26, 31, 113, 0.15);
    }
    
    .error-message {
      font-size: 0.7rem;
      color: var(--danger);
      margin-top: 0.5rem;
      display: none;
    }
    
    /* Buttons */
    .btn {
      display: flex;
      align-items: center;
      justify-content: center;
      height: 44px;
      padding: 0 1.5rem;
      border-radius: var(--radius-md);
      font-weight: 600;
      font-size: 0.85rem;
      border: none;
      cursor: pointer;
      transition: all 0.3s var(--animation-bounce);
    }
    
    .btn-primary {
      background: var(--primary);
      color: white;
      width: 100%;
    }
    
    .btn-primary:hover {
      background: var(--primary-light);
      transform: translateY(-3px);
      box-shadow: var(--shadow-md);
    }
    
    .btn-primary:active {
      transform: translateY(0);
    }
    
    .btn-outline {
      background: transparent;
      border: 1px solid var(--primary);
      color: var(--primary);
    }
    
    .btn-outline:hover {
      background: rgba(26, 31, 113, 0.05);
      transform: translateY(-3px);
    }
    
    .btn i {
      margin-right: 0.5rem;
      font-size: 0.9rem;
    }
    
    /* Method Tabs */
    .transfer-method-tabs {
      display: flex;
      margin-bottom: 1.5rem;
      background: var(--neutral-200);
      border-radius: var(--radius-md);
      padding: 0.25rem;
    }
    
    .transfer-method-tab {
      flex: 1;
      text-align: center;
      padding: 0.6rem 0.5rem;
      border-radius: var(--radius-md);
      font-size: 0.8rem;
      font-weight: 600;
      cursor: pointer;
      transition: var(--transition-base);
      white-space: nowrap;
    }
    
    .transfer-method-tab.active {
      background: var(--neutral-100);
      box-shadow: var(--shadow-sm);
      color: var(--primary);
    }
    
    .transfer-method-content {
      display: none;
    }
    
    .transfer-method-content.active {
      display: block;
      animation: fadeIn 0.5s ease;
    }
    
    /* Bank Selection */
    .bank-selection {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 0.75rem;
      margin-bottom: 1.5rem;
      max-height: 300px;
      overflow-y: auto;
      padding-right: 5px;
    }
    
    @media (min-width: 640px) {
      .bank-selection {
        grid-template-columns: repeat(3, 1fr);
      }
    }
    
    @media (min-width: 768px) {
      .bank-selection {
        grid-template-columns: repeat(4, 1fr);
      }
    }
    
    .bank-option {
      background: var(--neutral-100);
      border: 1px solid var(--neutral-300);
      border-radius: var(--radius-md);
      padding: 1rem;
      cursor: pointer;
      transition: all 0.3s var(--animation-bounce);
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
    }
    
    .bank-option:hover {
      border-color: var(--primary-light);
      transform: translateY(-5px);
      box-shadow: var(--shadow-md);
    }
    
    .bank-option.selected {
      border-color: var(--primary);
      background: rgba(26, 31, 113, 0.05);
    }
    
    .bank-logo {
      width: 80px;
      height: 40px;
      object-fit: contain;
      margin-bottom: 0.75rem;
    }
    
    .bank-name {
      font-size: 0.7rem;
      font-weight: 600;
      text-align: center;
      color: var(--neutral-800);
    }
    
    /* Saved Accounts */
    .saved-accounts {
      margin-bottom: 1.5rem;
    }
    
    .saved-account-card {
      display: flex;
      align-items: center;
      padding: 0.75rem;
      background: var(--neutral-200);
      border-radius: var(--radius-md);
      margin-bottom: 0.75rem;
      cursor: pointer;
      transition: var(--transition-base);
    }
    
    .saved-account-card:hover {
      background: var(--neutral-300);
      transform: translateX(5px);
    }
    
    .saved-account-card.selected {
      background: rgba(26, 31, 113, 0.1);
      border-left: 3px solid var(--primary);
    }
    
    .saved-account-logo {
      width: 36px;
      height: 36px;
      border-radius: var(--radius-md);
      object-fit: contain;
      margin-right: 0.75rem;
      background: white;
      padding: 0.25rem;
    }
    
    .saved-account-info {
      flex: 1;
    }
    
    .saved-account-name {
      font-size: 0.8rem;
      font-weight: 600;
      color: var(--neutral-800);
      margin-bottom: 0.25rem;
    }
    
    .saved-account-number {
      font-size: 0.7rem;
      color: var(--neutral-600);
    }
    
    .saved-account-verified {
      display: flex;
      align-items: center;
      gap: 0.25rem;
      font-size: 0.65rem;
      color: var(--success);
      font-weight: 500;
    }
    
    .saved-account-verified.pending {
      color: var(--warning);
    }
    
    .saved-account-actions {
      display: flex;
      gap: 0.5rem;
    }
    
    .saved-account-action {
      width: 28px;
      height: 28px;
      display: flex;
      align-items: center;
      justify-content: center;
      border-radius: var(--radius-full);
      background: var(--neutral-300);
      color: var(--neutral-700);
      transition: var(--transition-base);
    }
    
    .saved-account-action.delete-action:hover {
      background: var(--danger);
      color: white;
    }
    
    .saved-account-action.view-action:hover {
      background: var(--info);
      color: white;
    }
    
    /* Transfer Form */
    .transfer-amount-container {
      position: relative;
      margin-bottom: 1.5rem;
    }
    
    .transfer-amount-prefix {
      position: absolute;
      left: 1rem;
      top: 50%;
      transform: translateY(-50%);
      font-size: 1.1rem;
      font-weight: 700;
      color: var(--neutral-700);
    }
    
    .transfer-amount-input {
      height: 50px;
      padding-left: 2.25rem;
      font-size: 1.1rem;
      font-weight: 600;
    }
    
    .transfer-equivalents {
      display: flex;
      flex-wrap: wrap;
      gap: 0.75rem;
      margin-top: 0.75rem;
      margin-bottom: 0.75rem;
    }
    
    .transfer-equivalent {
      background: var(--neutral-200);
      border-radius: var(--radius-md);
      padding: 0.5rem 0.75rem;
      font-size: 0.75rem;
      display: flex;
      align-items: center;
      gap: 0.5rem;
    }
    
    .transfer-limits {
      font-size: 0.75rem;
      color: var(--neutral-600);
      margin-top: 0.5rem;
    }
    
    /* Remaining Balance */
    .remaining-balance {
      display: flex;
      align-items: center;
      justify-content: space-between;
      background: var(--neutral-100);
      border: 1px dashed var(--neutral-400);
      border-radius: var(--radius-md);
      padding: 0.5rem 0.75rem;
      margin-top: 0.75rem;
      transition: var(--transition-base);
      display: none;
    }
    
    .remaining-balance.active {
      display: flex;
      animation: fadeIn 0.3s ease;
    }
    
    .remaining-balance-label {
      font-size: 0.75rem;
      color: var(--neutral-700);
    }
    
    .remaining-balance-amount {
      font-size: 0.8rem;
      font-weight: 600;
      color: var(--neutral-900);
    }

    /* Confirmation Modal */
    .modal-overlay {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: rgba(0, 0, 0, 0.7);
      backdrop-filter: blur(5px);
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 1100;
      display: none;
      animation: fadeIn 0.3s ease;
    }
    
    .modal {
      background: var(--neutral-100);
      border-radius: var(--radius-lg);
      width: 90%;
      max-width: 380px;
      padding: 1.5rem;
      animation: scaleIn 0.3s ease;
    }
    
    .modal-title {
      font-size: 1.25rem;
      font-weight: 700;
      color: var(--neutral-900);
      margin-bottom: 0.75rem;
      text-align: center;
    }
    
    .modal-subtitle {
      font-size: 0.85rem;
      color: var(--neutral-600);
      margin-bottom: 1.5rem;
      text-align: center;
    }
    
    /* Transfer Confirmation */
    .transfer-confirm-details {
      background: var(--neutral-200);
      border-radius: var(--radius-md);
      padding: 1rem;
      margin-bottom: 1.5rem;
    }
    
    .confirm-detail-row {
      display: flex;
      justify-content: space-between;
      margin-bottom: 0.75rem;
      padding-bottom: 0.75rem;
      border-bottom: 1px solid var(--neutral-300);
    }
    
    .confirm-detail-row:last-child {
      margin-bottom: 0;
      padding-bottom: 0;
      border-bottom: none;
    }
    
    .confirm-detail-label {
      font-size: 0.8rem;
      color: var(--neutral-600);
    }
    
    .confirm-detail-value {
      font-size: 0.8rem;
      font-weight: 600;
      color: var(--neutral-900);
      text-align: right;
    }
    
    /* Success Animation */
    .success-container {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: rgba(0, 0, 0, 0.9);
      backdrop-filter: blur(10px);
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 1200;
      display: none;
    }
    
    .success-card {
      background: white;
      border-radius: var(--radius-lg);
      width: 90%;
      max-width: 380px;
      padding: 2rem;
      text-align: center;
      animation: scaleIn 0.3s ease;
    }
    
    .success-checkmark {
      width: 80px;
      height: 80px;
      border-radius: 50%;
      background: var(--success);
      color: white;
      font-size: 2.25rem;
      display: flex;
      align-items: center;
      justify-content: center;
      margin: 0 auto 1.5rem;
      transform: scale(0);
      animation: checkmarkScale 0.5s ease forwards 0.3s;
    }
    
    .success-title {
      font-size: 1.5rem;
      font-weight: 700;
      color: var(--neutral-900);
      margin-bottom: 0.75rem;
      opacity: 0;
      animation: fadeInUp 0.5s ease forwards 0.8s;
    }
    
    .success-amount {
      font-size: 2.25rem;
      font-weight: 700;
      color: var(--primary);
      margin-bottom: 1.25rem;
      opacity: 0;
      animation: fadeInUp 0.5s ease forwards 1.1s;
    }
    
    .success-message {
      font-size: 0.9rem;
      color: var(--neutral-600);
      margin-bottom: 1.5rem;
      opacity: 0;
      animation: fadeInUp 0.5s ease forwards 1.4s;
    }
    
    .success-details {
      text-align: left;
      background: var(--neutral-200);
      border-radius: var(--radius-md);
      padding: 1rem;
      margin-bottom: 1.5rem;
      opacity: 0;
      animation: fadeInUp 0.5s ease forwards 1.2s;
    }
    
    .success-detail-row {
      display: flex;
      justify-content: space-between;
      margin-bottom: 0.5rem;
      font-size: 0.8rem;
    }
    
    .success-detail-row:last-child {
      margin-bottom: 0;
    }
    
    .success-detail-label {
      color: var(--neutral-600);
    }
    
    .success-detail-value {
      font-weight: 600;
      color: var(--neutral-900);
    }
    
    .success-actions {
      display: flex;
      flex-direction: column;
      gap: 1rem;
      opacity: 0;
      animation: fadeInUp 0.5s ease forwards 1.7s;
    }
    
    /* Warning banner */
    .warning-banner {
      background: rgba(255, 173, 51, 0.1);
      border-left: 3px solid var(--warning);
      padding: 0.75rem;
      margin: 1rem 0;
      border-radius: var(--radius-sm);
    }
    
    .warning-title {
      font-weight: 600;
      font-size: 0.85rem;
      color: var(--neutral-900);
      margin-bottom: 0.5rem;
      display: flex;
      align-items: center;
      gap: 0.5rem;
    }
    
    .warning-title i {
      color: var(--warning);
    }
    
    .warning-content {
      font-size: 0.8rem;
      color: var(--neutral-700);
    }
    
    /* Verify Account Banner */
    .verify-banner {
      background: linear-gradient(135deg, var(--info) 0%, #007acc 100%);
      border-radius: var(--radius-md);
      padding: 0.9rem;
      display: flex;
      align-items: center;
      gap: 0.8rem;
      margin: 1.25rem 0;
      box-shadow: var(--shadow-md);
    }
    
    .verify-icon {
      width: 36px;
      height: 36px;
      background: white;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      color: var(--info);
      font-size: 1.1rem;
      flex-shrink: 0;
    }
    
    .verify-content {
      flex: 1;
      min-width: 0;
    }
    
    .verify-title {
      font-weight: 600;
      color: white;
      margin-bottom: 0.25rem;
      font-size: 0.9rem;
    }
    
    .verify-text {
      color: rgba(255, 255, 255, 0.8);
      font-size: 0.8rem;
    }
    
    .verify-action {
      background: white;
      color: var(--info);
      font-weight: 600;
      font-size: 0.8rem;
      padding: 0.4rem 0.75rem;
      border-radius: var(--radius-md);
      flex-shrink: 0;
      transition: all 0.3s var(--animation-bounce);
      cursor: pointer;
      border: none;
      white-space: nowrap;
    }
    
    .verify-action:hover {
      transform: translateY(-3px);
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
    }
    
    /* Identity Verification Modal */
    .verification-modal {
      background: var(--neutral-100);
      border-radius: var(--radius-lg);
      width: 90%;
      max-width: 450px;
      padding: 1.5rem;
      animation: scaleIn 0.3s ease;
    }
    
    .verification-title {
      font-size: 1.25rem;
      font-weight: 700;
      color: var(--neutral-900);
      margin-bottom: 0.75rem;
      text-align: center;
    }
    
    .verification-subtitle {
      font-size: 0.85rem;
      color: var(--neutral-600);
      margin-bottom: 1.5rem;
      text-align: center;
    }
    
    .id-upload-container {
      margin-bottom: 1.5rem;
    }
    
    .id-upload-sides {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 1rem;
      margin-bottom: 1rem;
    }
    
    .id-upload-side {
      background: var(--neutral-200);
      border: 2px dashed var(--neutral-400);
      border-radius: var(--radius-md);
      padding: 1.5rem 1rem;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      transition: var(--transition-base);
    }
    
    .id-upload-side:hover {
      border-color: var(--primary);
      background: rgba(26, 31, 113, 0.05);
    }
    
    .id-upload-side i {
      font-size: 2rem;
      color: var(--neutral-500);
      margin-bottom: 0.75rem;
    }
    
    .id-upload-title {
      font-weight: 600;
      font-size: 0.9rem;
      color: var(--neutral-800);
      margin-bottom: 0.4rem;
    }
    
    .id-upload-subtitle {
      font-size: 0.7rem;
      color: var(--neutral-600);
      text-align: center;
    }
    
    .id-preview {
      display: flex;
      align-items: center;
      gap: 0.75rem;
      padding: 0.8rem;
      background: var(--neutral-200);
      border-radius: var(--radius-md);
      margin-bottom: 0.75rem;
    }
    
    .id-preview-icon {
      width: 40px;
      height: 40px;
      border-radius: var(--radius-md);
      background: var(--primary);
      color: white;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 1.1rem;
      flex-shrink: 0;
    }
    
    .id-preview-content {
      flex: 1;
      min-width: 0;
    }
    
    .id-preview-name {
      font-weight: 600;
      font-size: 0.8rem;
      margin-bottom: 0.2rem;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }
    
    .id-preview-size {
      font-size: 0.7rem;
      color: var(--neutral-600);
    }
    
    /* Search Bank */
    .search-container {
      position: relative;
      margin-bottom: 1rem;
    }
    
    .search-icon {
      position: absolute;
      left: 1rem;
      top: 50%;
      transform: translateY(-50%);
      color: var(--neutral-500);
    }
    
    .search-input {
      width: 100%;
      height: 44px;
      padding-left: 2.5rem;
      border: 1px solid var(--neutral-400);
      border-radius: var(--radius-md);
      font-size: 0.85rem;
    }
    
    .search-clear {
      position: absolute;
      right: 1rem;
      top: 50%;
      transform: translateY(-50%);
      color: var(--neutral-500);
      cursor: pointer;
    }
    
    /* Bottom Navigation */
    .bottom-nav {
      position: fixed;
      bottom: 0;
      left: 0;
      right: 0;
      background: var(--neutral-100);
      display: flex;
      justify-content: space-around;
      padding: 0.5rem 0;
      box-shadow: 0 -4px 10px rgba(0, 0, 0, 0.05);
      z-index: 900;
    }
    
    .nav-item {
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      gap: 0.25rem;
      padding: 0.4rem;
      border-radius: var(--radius-md);
      transition: var(--transition-base);
      cursor: pointer;
      flex: 1;
    }
    
    .nav-item.active {
      color: var(--primary);
    }
    
    .nav-icon {
      font-size: 1.1rem;
      transition: transform 0.3s var(--animation-bounce);
    }
    
    .nav-item:hover .nav-icon {
      transform: translateY(-3px);
    }
    
    .nav-label {
      font-size: 0.6rem;
      font-weight: 600;
    }
    
    /* Contact Options */
    .contact-options {
      display: flex;
      flex-direction: column;
      gap: 0.75rem;
      margin-top: 1.25rem;
    }
    
    .contact-option {
      display: flex;
      align-items: center;
      gap: 0.75rem;
      padding: 0.9rem;
      background: var(--neutral-200);
      border-radius: var(--radius-md);
      transition: all 0.3s ease;
      text-decoration: none;
      color: var(--neutral-900);
    }
    
    .contact-option:hover {
      background: var(--neutral-300);
      transform: translateY(-3px);
      box-shadow: var(--shadow-md);
    }
    
    .contact-icon {
      width: 40px;
      height: 40px;
      border-radius: var(--radius-full);
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 1.1rem;
      flex-shrink: 0;
      color: white;
    }
    
    .contact-icon.whatsapp {
      background: #25D366;
    }
    
    .contact-icon.email {
      background: var(--primary);
    }
    
    .contact-content {
      flex: 1;
      min-width: 0;
    }
    
    .contact-title {
      font-weight: 600;
      font-size: 0.85rem;
      margin-bottom: 0.2rem;
    }
    
    .contact-description {
      font-size: 0.75rem;
      color: var(--neutral-600);
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }
    
    /* Pending Transfers */
    .pending-transfers {
      margin-bottom: 1.5rem;
    }
    
    .pending-transfer-card {
      background: var(--neutral-100);
      border-radius: var(--radius-md);
      box-shadow: var(--shadow-sm);
      margin-bottom: 1rem;
      overflow: hidden;
      transition: transform 0.3s var(--animation-bounce), box-shadow 0.3s ease;
    }
    
    .pending-transfer-card:hover {
      transform: translateY(-3px);
      box-shadow: var(--shadow-md);
    }
    
    .pending-transfer-header {
      display: flex;
      align-items: center;
      gap: 0.75rem;
      padding: 0.75rem;
      background: var(--pending-gradient);
      color: white;
    }
    
    .pending-transfer-logo {
      width: 36px;
      height: 36px;
      border-radius: var(--radius-md);
      object-fit: contain;
      background: white;
      padding: 0.25rem;
      flex-shrink: 0;
    }
    
    .pending-transfer-info {
      flex: 1;
      min-width: 0;
    }
    
    .pending-transfer-title {
      display: flex;
      align-items: center;
      gap: 0.5rem;
      font-weight: 600;
      font-size: 0.9rem;
    }
    
    .pending-transfer-subtitle {
      font-size: 0.75rem;
      opacity: 0.9;
    }
    
    .pending-transfer-body {
      padding: 0.75rem;
    }
    
    .pending-transfer-amount {
      font-size: 1.25rem;
      font-weight: 700;
      text-align: center;
      margin-bottom: 0.75rem;
      color: var(--neutral-900);
    }
    
    .pending-transfer-details {
      font-size: 0.8rem;
      color: var(--neutral-600);
      margin-bottom: 1rem;
    }
    
    .pending-transfer-detail {
      display: flex;
      justify-content: space-between;
      margin-bottom: 0.5rem;
    }
    
    .pending-transfer-detail-label {
      color: var(--neutral-600);
    }
    
    .pending-transfer-detail-value {
      font-weight: 500;
      color: var(--neutral-800);
    }
    
    .pending-transfer-timeline {
      display: flex;
      flex-direction: column;
      gap: 0.5rem;
      padding: 0.75rem;
      background: var(--neutral-200);
      border-radius: var(--radius-md);
      margin-bottom: 1rem;
    }
    
    .timeline-step {
      display: flex;
      gap: 0.75rem;
      position: relative;
    }
    
    .timeline-step:not(:last-child)::before {
      content: '';
      position: absolute;
      top: 24px;
      left: 11px;
      width: 2px;
      height: calc(100% + 0.5rem);
      background-color: var(--neutral-400);
      z-index: 1;
    }
    
    .timeline-step.completed:not(:last-child)::before {
      background-color: var(--success);
    }
    
    .timeline-step.active:not(:last-child)::before {
      background: linear-gradient(180deg, var(--success) 0%, var(--neutral-400) 100%);
    }
    
    .timeline-indicator {
      width: 24px;
      height: 24px;
      border-radius: 50%;
      background: var(--neutral-400);
      color: white;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 0.8rem;
      position: relative;
      z-index: 2;
      flex-shrink: 0;
    }
    
    .timeline-step.completed .timeline-indicator {
      background: var(--success);
    }
    
    .timeline-step.active .timeline-indicator {
      background: var(--warning);
    }
    
    .timeline-content {
      flex: 1;
      padding-bottom: 1rem;
    }
    
    .timeline-title {
      font-weight: 600;
      font-size: 0.85rem;
      color: var(--neutral-800);
      margin-bottom: 0.2rem;
    }
    
    .timeline-step.completed .timeline-title {
      color: var(--success);
    }
    
    .timeline-step.active .timeline-title {
      color: var(--warning);
    }
    
    .timeline-description {
      font-size: 0.75rem;
      color: var(--neutral-600);
    }
    
    .pending-transfer-actions {
      display: flex;
      gap: 0.75rem;
    }
    
    .pending-transfer-action {
      flex: 1;
      display: flex;
      align-items: center;
      justify-content: center;
      height: 36px;
      border-radius: var(--radius-md);
      font-size: 0.75rem;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s var(--animation-bounce);
    }
    
    .pending-transfer-action.primary {
      background: var(--primary);
      color: white;
    }
    
    .pending-transfer-action.primary:hover {
      background: var(--primary-light);
      transform: translateY(-3px);
      box-shadow: var(--shadow-md);
    }
    
    .pending-transfer-action.secondary {
      background: var(--neutral-200);
      color: var(--neutral-700);
    }
    
    .pending-transfer-action.secondary:hover {
      background: var(--neutral-300);
      transform: translateY(-3px);
    }
    
    .pending-transfer-action.danger {
      background: var(--danger);
      color: white;
    }
    
    .pending-transfer-action.danger:hover {
      background: #ff6666;
      transform: translateY(-3px);
      box-shadow: var(--shadow-md);
    }
    
    /* Empty States */
    .empty-state {
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      padding: 2rem 1rem;
      text-align: center;
    }
    
    .empty-state-icon {
      width: 60px;
      height: 60px;
      border-radius: 50%;
      background: var(--neutral-200);
      color: var(--neutral-500);
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 1.5rem;
      margin-bottom: 1rem;
    }
    
    .empty-state-title {
      font-weight: 600;
      font-size: 1rem;
      color: var(--neutral-800);
      margin-bottom: 0.5rem;
    }
    
    .empty-state-message {
      font-size: 0.85rem;
      color: var(--neutral-600);
      margin-bottom: 1.5rem;
    }
    
    /* Validation Timeline */
    .validation-timeline {
      background: var(--neutral-200);
      border-radius: var(--radius-md);
      padding: 1rem;
      margin-bottom: 1.25rem;
    }
    
    .timeline-item {
      display: flex;
      gap: 1rem;
      position: relative;
      padding-bottom: 1.25rem;
    }
    
    .timeline-item:last-child {
      padding-bottom: 0;
    }
    
    .timeline-item:not(:last-child)::after {
      content: '';
      position: absolute;
      left: 12px;
      top: 24px;
      width: 2px;
      height: calc(100% - 24px);
      background-color: var(--neutral-400);
    }
    
    .timeline-item.completed:not(:last-child)::after {
      background-color: var(--success);
    }
    
    .timeline-item.active:not(:last-child)::after {
      background: linear-gradient(to bottom, var(--warning) 0%, var(--neutral-400) 100%);
    }
    
    .timeline-marker {
      width: 24px;
      height: 24px;
      border-radius: 50%;
      background: var(--neutral-400);
      display: flex;
      align-items: center;
      justify-content: center;
      color: white;
      font-size: 0.7rem;
      position: relative;
      z-index: 2;
      flex-shrink: 0;
    }
    
    .timeline-item.completed .timeline-marker {
      background: var(--success);
    }
    
    .timeline-item.active .timeline-marker {
      background: var(--warning);
    }
    
    .timeline-item-content {
      flex: 1;
    }
    
    .timeline-item-title {
      font-weight: 600;
      font-size: 0.9rem;
      margin-bottom: 0.25rem;
      color: var(--neutral-800);
    }
    
    .timeline-item.completed .timeline-item-title {
      color: var(--success);
    }
    
    .timeline-item.active .timeline-item-title {
      color: var(--warning);
    }
    
    .timeline-item-description {
      font-size: 0.8rem;
      color: var(--neutral-600);
      line-height: 1.4;
    }
    
    /* Frequently Asked Questions */
    .faq-container {
      margin-bottom: 1.5rem;
    }
    
    .faq-item {
      border: 1px solid var(--neutral-300);
      border-radius: var(--radius-md);
      margin-bottom: 0.75rem;
      overflow: hidden;
    }
    
    .faq-question {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 0.75rem 1rem;
      font-weight: 600;
      font-size: 0.85rem;
      color: var(--neutral-800);
      cursor: pointer;
      background: var(--neutral-100);
      transition: var(--transition-base);
    }
    
    .faq-question:hover {
      background: var(--neutral-200);
    }
    
    .faq-toggle {
      color: var(--neutral-600);
      font-size: 0.8rem;
      transition: transform 0.3s ease;
    }
    
    .faq-item.active .faq-toggle {
      transform: rotate(180deg);
    }
    
    .faq-answer {
      padding: 0 1rem;
      max-height: 0;
      overflow: hidden;
      font-size: 0.8rem;
      color: var(--neutral-600);
      transition: all 0.3s ease;
      background: var(--neutral-200);
    }
    
    .faq-item.active .faq-answer {
      padding: 1rem;
      max-height: 500px;
    }
    
    /* Security Features */
    .security-features {
      display: grid;
      grid-template-columns: 1fr;
      gap: 1rem;
      margin-bottom: 1.5rem;
    }
    
    @media (min-width: 640px) {
      .security-features {
        grid-template-columns: repeat(2, 1fr);
      }
    }
    
    .security-feature {
      background: var(--neutral-100);
      border-radius: var(--radius-md);
      box-shadow: var(--shadow-sm);
      padding: 1rem;
      display: flex;
      align-items: flex-start;
      gap: 0.75rem;
      transition: transform 0.3s var(--animation-bounce), box-shadow 0.3s ease;
    }
    
    .security-feature:hover {
      transform: translateY(-3px);
      box-shadow: var(--shadow-md);
    }
    
    .security-feature-icon {
      width: 36px;
      height: 36px;
      border-radius: var(--radius-md);
      background: rgba(26, 31, 113, 0.1);
      color: var(--primary);
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 1rem;
      flex-shrink: 0;
    }
    
    .security-feature-content {
      flex: 1;
    }
    
    .security-feature-title {
      font-weight: 600;
      font-size: 0.85rem;
      color: var(--neutral-800);
      margin-bottom: 0.25rem;
    }
    
    .security-feature-description {
      font-size: 0.75rem;
      color: var(--neutral-600);
      line-height: 1.4;
    }
    
    /* Processing Animation */
    .processing-container {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: rgba(0, 0, 0, 0.8);
      backdrop-filter: blur(5px);
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 1100;
      display: none;
    }
    
    .processing-card {
      background: white;
      border-radius: var(--radius-lg);
      width: 90%;
      max-width: 380px;
      padding: 1.5rem;
      text-align: center;
    }
    
    .processing-spinner {
      width: 60px;
      height: 60px;
      border: 3px solid rgba(26, 31, 113, 0.1);
      border-radius: 50%;
      border-top-color: var(--primary);
      animation: spin 1s linear infinite;
      margin: 0 auto 1.5rem;
    }
    
    .processing-title {
      font-size: 1.25rem;
      font-weight: 700;
      color: var(--neutral-900);
      margin-bottom: 0.75rem;
    }
    
    .processing-message {
      font-size: 0.9rem;
      color: var(--neutral-600);
      margin-bottom: 1.5rem;
    }
    
    .processing-steps {
      display: flex;
      flex-direction: column;
      gap: 0.75rem;
      margin-bottom: 1.5rem;
    }
    
    .processing-step {
      display: flex;
      align-items: center;
      gap: 0.75rem;
      padding: 0.6rem 0.75rem;
      background: var(--neutral-200);
      border-radius: var(--radius-md);
      font-size: 0.8rem;
      color: var(--neutral-700);
      text-align: left;
      transition: all 0.3s ease;
    }
    
    .processing-step.active {
      background: rgba(26, 31, 113, 0.05);
      color: var(--primary);
      font-weight: 500;
    }
    
    .processing-step.completed {
      background: rgba(0, 211, 77, 0.05);
      color: var(--success);
      font-weight: 500;
    }
    
    .processing-step-icon {
      width: 24px;
      height: 24px;
      border-radius: 50%;
      background: var(--neutral-300);
      color: var(--neutral-600);
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 0.7rem;
      flex-shrink: 0;
    }
    
    .processing-step.active .processing-step-icon {
      background: var(--primary);
      color: white;
    }
    
    .processing-step.completed .processing-step-icon {
      background: var(--success);
      color: white;
    }
    
    /* Validation Required Modal */
    .validation-required-modal {
      background: var(--neutral-100);
      border-radius: var(--radius-lg);
      width: 90%;
      max-width: 420px;
      padding: 1.5rem;
      animation: scaleIn 0.3s ease;
    }
    
    .validation-required-header {
      text-align: center;
      margin-bottom: 1.5rem;
    }
    
    .validation-required-icon {
      width: 70px;
      height: 70px;
      border-radius: 50%;
      background: var(--warning);
      color: white;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 2rem;
      margin: 0 auto 1rem;
    }
    
    .validation-required-title {
      font-size: 1.25rem;
      font-weight: 700;
      color: var(--neutral-900);
      margin-bottom: 0.5rem;
    }
    
    .validation-required-subtitle {
      font-size: 0.9rem;
      color: var(--neutral-600);
    }
    
    .validation-requirements {
      margin-bottom: 1.5rem;
    }
    
    .validation-requirement {
      display: flex;
      align-items: flex-start;
      gap: 0.75rem;
      padding: 0.75rem;
      background: var(--neutral-200);
      border-radius: var(--radius-md);
      margin-bottom: 0.75rem;
    }
    
    .validation-requirement-icon {
      width: 24px;
      height: 24px;
      border-radius: 50%;
      background: rgba(26, 31, 113, 0.1);
      color: var(--primary);
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 0.8rem;
      flex-shrink: 0;
    }
    
    .validation-requirement-content {
      flex: 1;
    }
    
    .validation-requirement-title {
      font-weight: 600;
      font-size: 0.85rem;
      color: var(--neutral-800);
      margin-bottom: 0.25rem;
    }
    
    .validation-requirement-description {
      font-size: 0.75rem;
      color: var(--neutral-600);
      line-height: 1.4;
    }
    
    .validation-benefits {
      display: flex;
      flex-wrap: wrap;
      gap: 0.5rem;
      margin-bottom: 1.5rem;
    }
    
    .validation-benefit {
      flex-basis: calc(50% - 0.5rem);
      display: flex;
      align-items: center;
      gap: 0.5rem;
      padding: 0.5rem;
      background: rgba(0, 211, 77, 0.05);
      border-radius: var(--radius-md);
      font-size: 0.75rem;
      color: var(--neutral-700);
    }
    
    .validation-benefit i {
      color: var(--success);
    }
    
    .validation-required-actions {
      display: flex;
      flex-direction: column;
      gap: 0.75rem;
    }
    
    /* Pending Transfers Tab */
    .pending-transfers-tab {
      display: flex;
      margin-bottom: 1.5rem;
      background: var(--neutral-200);
      border-radius: var(--radius-md);
      padding: 0.25rem;
    }
    
    .pending-transfers-tab-item {
      flex: 1;
      text-align: center;
      padding: 0.6rem 0.5rem;
      border-radius: var(--radius-md);
      font-size: 0.8rem;
      font-weight: 600;
      cursor: pointer;
      transition: var(--transition-base);
      white-space: nowrap;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 0.5rem;
    }
    
    .pending-transfers-tab-item.active {
      background: var(--neutral-100);
      box-shadow: var(--shadow-sm);
      color: var(--primary);
    }
    
    .pending-count {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      width: 20px;
      height: 20px;
      border-radius: var(--radius-full);
      background: var(--warning);
      color: white;
      font-size: 0.7rem;
      font-weight: 600;
    }
    
    /* Help & Support */
    .help-link {
      display: inline-flex;
      align-items: center;
      gap: 0.5rem;
      color: var(--primary);
      font-weight: 500;
      font-size: 0.85rem;
      text-decoration: none;
      margin-top: 0.5rem;
      transition: color 0.3s ease;
    }
    
    .help-link:hover {
      color: var(--primary-light);
    }
    
    /* Animations */
    @keyframes fadeIn {
      from { opacity: 0; }
      to { opacity: 1; }
    }
    
    @keyframes scaleIn {
      from { transform: scale(0.9); opacity: 0; }
      to { transform: scale(1); opacity: 1; }
    }
    
    @keyframes fadeInUp {
      from { opacity: 0; transform: translateY(20px); }
      to { opacity: 1; transform: translateY(0); }
    }
    
    @keyframes checkmarkScale {
      from { transform: scale(0); }
      to { transform: scale(1); }
    }
    
    @keyframes spin {
      to { transform: rotate(360deg); }
    }
    
    @keyframes slideInRight {
      from { transform: translateX(100%); opacity: 0; }
      to { transform: translateX(0); opacity: 1; }
    }
    
    @keyframes fadeOut {
      from { opacity: 1; }
      to { opacity: 0; visibility: hidden; }
    }
    
    /* Step Indicator */
    .step-indicator {
      display: flex;
      justify-content: center;
      margin: 0.5rem 0 1.5rem;
      gap: 0.5rem;
    }
    
    .step-dot {
      width: 8px;
      height: 8px;
      border-radius: 50%;
      background-color: var(--neutral-300);
      transition: all 0.3s ease;
    }
    
    .step-dot.active {
      background-color: var(--primary);
      width: 24px;
      border-radius: 4px;
    }
    
    /* Verification Modal */
    .blocked-feature-modal {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: rgba(0, 0, 0, 0.7);
      backdrop-filter: blur(5px);
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 1100;
      display: none;
    }
    
    .blocked-feature-card {
      background: var(--neutral-100);
      border-radius: var(--radius-lg);
      width: 90%;
      max-width: 380px;
      padding: 2rem;
      text-align: center;
    }
    
    .blocked-feature-icon {
      width: 80px;
      height: 80px;
      border-radius: 50%;
      background: var(--warning);
      color: white;
      font-size: 2rem;
      display: flex;
      align-items: center;
      justify-content: center;
      margin: 0 auto 1.5rem;
    }
    
    .blocked-feature-title {
      font-size: 1.25rem;
      font-weight: 700;
      color: var(--neutral-900);
      margin-bottom: 0.75rem;
    }
    
    .blocked-feature-message {
      font-size: 0.9rem;
      color: var(--neutral-600);
      margin-bottom: 1.5rem;
    }
    
    /* Responsive Styles */
    @media (min-width: 480px) {
      .transfer-content {
        padding: 1rem;
      }
    }
    
    @media (min-width: 768px) {
      .transfer-content {
        padding: 1.25rem;
      }
      
      .bottom-nav {
        display: none;
      }
      
      .app-container {
        padding-bottom: 2rem;
      }
    }
    
    @media (min-width: 1024px) {
      .transfer-content {
        padding: 1.5rem;
      }
    }
  </style>
</head>

<body>
  <!-- App Header -->
  <header class="app-header">
    <div class="header-brand">
      <img src="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEhnBzNdjl6bNp-nIdaiHVENczJhwlJNA7ocsyiOObMmzbu8at0dY5yGcZ9cLxLF39qI6gwNfqBxlkTDC0txVULEwQVwGkeEzN0Jq9MRTRagA48mh18UqTlR4WhsXOLAEZugUyhqJHB19xJgnkpe-S5VOWFgzpKFwctv3XP9XhH41vNTvq0ZS-nik58Qhr-O/s320/remeex.png" alt="REMEEX">
    </div>
    
    <div class="header-actions">
      <button class="header-action-btn" id="pending-transfers-btn" aria-label="Transferencias pendientes">
        <i class="fas fa-clock"></i>
        <span class="notification-badge" id="pending-count">0</span>
      </button>
      
      <div class="header-user" id="user-menu-btn">
        <div class="header-avatar" id="header-avatar">JP</div>
        <div class="header-user-info">
          <div class="header-username" id="header-username">Usuario</div>
          <div class="header-date" id="header-date">Mayo 5, 2025</div>
        </div>
      </div>
    </div>
  </header>

  <!-- Main Container -->
  <div class="app-container">
    <div class="transfer-content">
      <!-- Balance Card (Always Visible) -->
      <div class="balance-card">
        <div class="card-decoration"></div>
        <div class="card-decoration"></div>
        <div class="balance-content">
          <div class="balance-label">
            <i class="fas fa-shield-alt"></i>
            <span id="balance-label-name">Tus fondos disponibles</span>
          </div>
          <div class="balance-amount" id="dashboard-balance">
            <img src="https://upload.wikimedia.org/wikipedia/commons/0/06/Flag_of_Venezuela.svg" class="currency-flag" alt="Bandera de Venezuela">
            <span id="main-currency-symbol">Bs</span>
            <span id="main-balance-value">120.000,00</span>
          </div>
          
          <div class="balance-equivalents">
            <div class="balance-equivalent">
              <img src="https://flagcdn.com/us.svg" class="currency-flag" alt="Bandera de EEUU">
              <span id="usd-balance-value">≈ $1.100,00</span>
            </div>
            <div class="balance-equivalent">
              <img src="https://flagcdn.com/es.svg" class="currency-flag" alt="Bandera de España">
              <span id="eur-balance-value">≈ €1.034,00</span>
            </div>
          </div>
          
          <div class="exchange-rate">
            <i class="fas fa-exchange-alt"></i> Tasa: 1 USD = 109,19 Bs | 1 USD = 0,94 EUR
          </div>
          
          <div class="balance-date" id="balance-date">Lunes, 5 de Mayo de 2025</div>
          
          <!-- Balance Projection (Only shown when an amount is entered) -->
          <div class="balance-projection" id="balance-projection">
            <div class="balance-projection-title">
              <i class="fas fa-calculator"></i> Saldo después de transferencia:
            </div>
            <div class="balance-projection-amount" id="balance-projection-amount">
              Bs 0,00
            </div>
          </div>
        </div>
      </div>
      
      <!-- Back to home button -->
      <div style="display: flex; margin-bottom: 1rem;">
        <a href="index.html" class="btn btn-outline" style="display: flex; align-items: center; gap: 0.5rem; padding: 0.5rem 0.75rem; height: auto;">
          <i class="fas fa-arrow-left"></i> Volver al inicio
        </a>
      </div>
      
      <!-- Pending Transfers Section -->
      <div id="pending-transfers-section" style="display: none;">
        <h1 class="section-title" style="font-size: 1.5rem; text-align: center; justify-content: center; margin-bottom: 1rem;">
          <i class="fas fa-clock"></i> Transferencias pendientes de validación
        </h1>
        
        <div class="pending-transfers-tab">
          <div class="pending-transfers-tab-item active" data-tab="bank">
            <i class="fas fa-university"></i> Bancarias
            <span class="pending-count" id="bank-pending-count">0</span>
          </div>
          <div class="pending-transfers-tab-item" data-tab="mobile">
            <i class="fas fa-mobile-alt"></i> Pago Móvil
            <span class="pending-count" id="mobile-pending-count">0</span>
          </div>
        </div>
        
        <div id="bank-pending-transfers" class="pending-transfers">
          <!-- Pending bank transfers will be added here dynamically -->
          <div class="empty-state" id="empty-bank-transfers">
            <div class="empty-state-icon">
              <i class="fas fa-university"></i>
            </div>
            <div class="empty-state-title">No hay transferencias bancarias pendientes</div>
            <div class="empty-state-message">Las transferencias pendientes aparecerán aquí.</div>
            <button class="btn btn-primary" style="max-width: 200px;" onclick="showCurrentStep()">
              <i class="fas fa-plus"></i> Nueva transferencia
            </button>
          </div>
        </div>
        
        <div id="mobile-pending-transfers" class="pending-transfers" style="display: none;">
          <!-- Pending mobile payments will be added here dynamically -->
          <div class="empty-state" id="empty-mobile-transfers">
            <div class="empty-state-icon">
              <i class="fas fa-mobile-alt"></i>
            </div>
            <div class="empty-state-title">No hay pagos móviles pendientes</div>
            <div class="empty-state-message">Los pagos móviles pendientes aparecerán aquí.</div>
            <button class="btn btn-primary" style="max-width: 200px;" onclick="showCurrentStep()">
              <i class="fas fa-plus"></i> Nuevo pago móvil
            </button>
          </div>
        </div>
        
        <div class="card">
          <div class="section-title" style="font-size: 0.9rem; margin-bottom: 0.75rem;">
            <i class="fas fa-shield-alt"></i> ¿Por qué validamos las cuentas?
          </div>
          
          <p style="font-size: 0.85rem; color: var(--neutral-700); margin-bottom: 1rem;">
            En REMEEX, tu seguridad es nuestra prioridad. Por eso implementamos un proceso de validación de cuentas similar al que utilizan servicios financieros internacionales como Wise, PayPal y Skrill.
          </p>
          
          <div class="security-features">
            <div class="security-feature">
              <div class="security-feature-icon">
                <i class="fas fa-user-shield"></i>
              </div>
              <div class="security-feature-content">
                <div class="security-feature-title">Protección de identidad</div>
                <div class="security-feature-description">Verificamos que eres el verdadero titular de la cuenta para evitar fraudes y suplantación de identidad.</div>
              </div>
            </div>
            
            <div class="security-feature">
              <div class="security-feature-icon">
                <i class="fas fa-lock"></i>
              </div>
              <div class="security-feature-content">
                <div class="security-feature-title">Prevención de fraudes</div>
                <div class="security-feature-description">Evitamos que terceros puedan intentar recibir fondos utilizando tu nombre o documentos sin tu autorización.</div>
              </div>
            </div>
          </div>
          
          <div id="faq-validation" class="faq-container">
            <div class="faq-item">
              <div class="faq-question">
                <span>¿Cómo valido mi cuenta?</span>
                <i class="fas fa-chevron-down faq-toggle"></i>
              </div>
              <div class="faq-answer">
                <p>Para validar tu cuenta, simplemente realiza una recarga desde esa misma cuenta hacia tu cuenta REMEEX. Esta recarga puede ser de cualquier monto y sirve como comprobante de que realmente eres el titular de la cuenta bancaria.</p>
              </div>
            </div>
            
            <div class="faq-item">
              <div class="faq-question">
                <span>¿Tengo que validar la cuenta cada vez?</span>
                <i class="fas fa-chevron-down faq-toggle"></i>
              </div>
              <div class="faq-answer">
                <p>¡No! Una vez validada una cuenta, quedará registrada y podrás realizar futuras transferencias sin necesidad de validarla nuevamente.</p>
              </div>
            </div>
          </div>
          
          <a href="recarga.html" class="btn btn-primary">
            <i class="fas fa-check-circle"></i> Ir a validar mi cuenta
          </a>
        </div>
        
        <div style="display: flex; margin-top: 1rem;">
          <button class="btn btn-outline" style="width: 100%;" onclick="showCurrentStep()">
            <i class="fas fa-arrow-left"></i> Volver a transferencias
          </button>
        </div>
      </div>

      <!-- Main Content Area (Step-based UI) -->
      <div id="transfer-wizard">
        <!-- Step indicator -->
        <div class="step-indicator">
          <div class="step-dot active" data-step="1"></div>
          <div class="step-dot" data-step="2"></div>
          <div class="step-dot" data-step="3"></div>
        </div>
        
        <!-- Step 1: Currency Selection -->
        <div id="step-currency-selection" class="wizard-step">
          <h1 class="section-title" style="font-size: 1.5rem; text-align: center; justify-content: center; margin-bottom: 1.5rem;">
            <i class="fas fa-paper-plane"></i> ¿Cómo deseas retirar tus fondos?
          </h1>
          
          <div class="currency-selection">
            <div class="currency-card bolivares" id="select-bolivares">
              <div class="card-decoration"></div>
              <div class="card-decoration"></div>
              <div class="currency-icon">
                <i class="fas fa-money-bill-wave"></i>
              </div>
              <div class="currency-name">Bolívares</div>
              <div class="currency-description">Transferencia a cuentas en Venezuela</div>
            </div>
            
            <div class="currency-card dollars" id="select-dollars">
              <div class="card-decoration"></div>
              <div class="card-decoration"></div>
              <div class="currency-icon">
                <i class="fas fa-dollar-sign"></i>
              </div>
              <div class="currency-name">Dólares</div>
              <div class="currency-description">Transferencia internacional o cripto</div>
            </div>
          </div>
        </div>
        
        <!-- Step 2: Method Selection -->
        <div id="step-method-selection" class="wizard-step" style="display: none;">
          <!-- For Bolivares -->
          <div id="bolivares-methods">
            <h1 class="section-title" style="font-size: 1.5rem;">
              <i class="fas fa-money-bill-wave"></i> Retiro en Bolívares
              <a href="#" id="back-to-currency" style="font-size: 0.8rem;"><i class="fas fa-arrow-left"></i> Volver</a>
            </h1>
            
            <div class="method-selection">
              <div class="method-card" id="select-pago-movil">
                <div class="method-icon mobile">
                  <i class="fas fa-mobile-alt"></i>
                </div>
                <div class="method-content">
                  <div class="method-name">Pago Móvil</div>
                  <div class="method-description">Envío instantáneo a tu número de teléfono</div>
                </div>
              </div>
              
              <div class="method-card" id="select-transferencia">
                <div class="method-icon bank">
                  <i class="fas fa-university"></i>
                </div>
                <div class="method-content">
                  <div class="method-name">Transferencia Bancaria</div>
                  <div class="method-description">Envío a tu cuenta bancaria en Venezuela</div>
                </div>
              </div>
            </div>
          </div>
          
          <!-- For Dollars -->
          <div id="dollars-methods" style="display: none;">
            <h1 class="section-title" style="font-size: 1.5rem;">
              <i class="fas fa-dollar-sign"></i> Retiro en Dólares
              <a href="#" id="back-to-currency-from-dollars" style="font-size: 0.8rem;"><i class="fas fa-arrow-left"></i> Volver</a>
            </h1>
            
            <div class="method-selection">
              <div class="method-card" id="select-usdt">
                <div class="method-icon usdt">
                  <i class="fab fa-ethereum"></i>
                </div>
                <div class="method-content">
                  <div class="method-name">USDT</div>
                  <div class="method-description">Tether (USDT) a tu wallet</div>
                </div>
              </div>
              
              <div class="method-card" id="select-wallet">
                <div class="method-icon wallet">
                  <i class="fas fa-wallet"></i>
                </div>
                <div class="method-content">
                  <div class="method-name">Billetera Digital</div>
                  <div class="method-description">Airtm, Paypal, Skrill, etc.</div>
                </div>
              </div>
              
              <div class="method-card" id="select-zelle">
                <div class="method-icon zelle">
                  <i class="fas fa-exchange-alt"></i>
                </div>
                <div class="method-content">
                  <div class="method-name">Zelle</div>
                  <div class="method-description">Transferencia a bancos en EEUU</div>
                </div>
              </div>
              
              <div class="method-card" id="select-international">
                <div class="method-icon transfer">
                  <i class="fas fa-globe"></i></div>
                <div class="method-content">
                  <div class="method-name">Transferencia Internacional</div>
                  <div class="method-description">A tu cuenta bancaria en el exterior</div>
                </div>
              </div>
            </div>
          </div>
        </div>
        
        <!-- Step 3: Form Details -->
        <div id="step-form-details" class="wizard-step" style="display: none;">
          <!-- Pago Móvil Form -->
          <div id="pago-movil-form" style="display: none;">
            <h1 class="section-title" style="font-size: 1.5rem;">
              <i class="fas fa-mobile-alt"></i> Pago Móvil
              <a href="#" id="back-to-methods-from-movil" style="font-size: 0.8rem;"><i class="fas fa-arrow-left"></i> Volver</a>
            </h1>
            
            <div class="card">
              <!-- Transfer amount -->
              <div class="form-group">
                <label class="form-label" for="transfer-amount-movil">Monto a transferir</label>
                <div class="transfer-amount-container">
                  <span class="transfer-amount-prefix">Bs</span>
                  <input type="text" class="form-control transfer-amount-input" id="transfer-amount-movil" placeholder="0,00" aria-describedby="movil-amount-error">
                </div>
                <div class="error-message" id="movil-amount-error">Por favor, introduzca un monto válido.</div>
                
                <div class="transfer-equivalents">
                  <div class="transfer-equivalent">
                    <img src="https://flagcdn.com/us.svg" class="currency-flag" alt="Bandera de EEUU" style="width: 16px; height: 10px;">
                    <span id="movil-amount-usd">$0,00</span>
                  </div>
                  <div class="transfer-equivalent">
                    <img src="https://flagcdn.com/es.svg" class="currency-flag" alt="Bandera de España" style="width: 16px; height: 10px;">
                    <span id="movil-amount-eur">€0,00</span>
                  </div>
                </div>
                
                <!-- Remaining Balance -->
                <div class="remaining-balance" id="movil-remaining-balance">
                  <div class="remaining-balance-label">Saldo restante:</div>
                  <div class="remaining-balance-amount" id="movil-remaining-amount">Bs 120.000,00</div>
                </div>
                
                <div class="transfer-limits">
                  <i class="fas fa-info-circle"></i> Límite: Hasta 250.000,00 Bs por transferencia
                </div>
              </div>
              
              <!-- Saved accounts section -->
              <div class="saved-accounts" id="saved-movil-accounts">
                <div class="section-title" style="font-size: 0.9rem; margin-bottom: 0.75rem;">
                  <i class="fas fa-star"></i> Números guardados
                </div>
                
                <div id="no-saved-movil-accounts" style="text-align: center; color: var(--neutral-600); font-size: 0.85rem; margin: 1.5rem 0;">
                  <i class="fas fa-info-circle" style="font-size: 2rem; color: var(--neutral-500); margin-bottom: 0.5rem; display: block;"></i>
                  No tiene números guardados.<br>Complete el formulario para agregar un nuevo número.
                </div>
                
                <!-- Saved accounts will be added here dynamically -->
              </div>
              
              <!-- Search bank -->
              <div class="section-title" style="font-size: 0.9rem; margin-bottom: 0.75rem;">
                <i class="fas fa-university"></i> Seleccionar banco
              </div>
              
              <div class="search-container">
                <i class="fas fa-search search-icon"></i>
                <input type="text" class="search-input" id="movil-bank-search" placeholder="Buscar banco..." aria-label="Buscar banco">
                <i class="fas fa-times search-clear" id="clear-movil-bank-search"></i>
              </div>
              
              <!-- Bank selection grid -->
              <div class="bank-selection" id="movil-bank-selection">
                <!-- Banks will be added here dynamically -->
              </div>
              
              <!-- Account details form -->
              <div id="movil-account-form">
                <div class="form-group">
                  <label class="form-label" for="movil-number">Número de teléfono</label>
                  <input type="tel" class="form-control" id="movil-number" placeholder="Ej: 0412 1234567" aria-describedby="movil-number-error">
                  <div class="error-message" id="movil-number-error">Por favor, introduzca un número de teléfono válido.</div>
                </div>
                
                <div class="form-group">
                  <label class="form-label" for="movil-holder">Nombre del titular</label>
                  <input type="text" class="form-control" id="movil-holder" placeholder="Nombre y apellido del titular" aria-describedby="movil-holder-error">
                  <div class="error-message" id="movil-holder-error">Por favor, introduzca el nombre del titular.</div>
                </div>
                
                <div class="form-group">
                  <label class="form-label" for="movil-id">Cédula o RIF</label>
                  <input type="text" class="form-control" id="movil-id" placeholder="Ej: V-12345678 o J-12345678" aria-describedby="movil-id-error">
                  <div class="error-message" id="movil-id-error">Por favor, introduzca una cédula o RIF válido.</div>
                </div>
                
                <!-- Validation timeline -->
                <div class="validation-timeline">
                  <div class="timeline-item completed">
                    <div class="timeline-marker">
                      <i class="fas fa-check"></i>
                    </div>
                    <div class="timeline-item-content">
                      <div class="timeline-item-title">Crear transferencia</div>
                      <div class="timeline-item-description">Completa el formulario con la información de destino.</div>
                    </div>
                  </div>
                  
                  <div class="timeline-item active">
                    <div class="timeline-marker">
                      <i class="fas fa-shield-alt"></i>
                    </div>
                    <div class="timeline-item-content">
                      <div class="timeline-item-title">Validar cuenta</div>
                      <div class="timeline-item-description">Por seguridad, debes hacer una recarga desde el mismo número para validarlo. <a href="#" class="help-link" id="movil-help-link"><i class="fas fa-question-circle"></i> ¿Dudas?</a></div>
                    </div>
                  </div>
                  
                  <div class="timeline-item">
                    <div class="timeline-marker">
                      <i class="fas fa-paper-plane"></i>
                    </div>
                    <div class="timeline-item-content">
                      <div class="timeline-item-title">Procesamiento</div>
                      <div class="timeline-item-description">La transferencia se procesa inmediatamente después de verificar la cuenta.</div>
                    </div>
                  </div>
                </div>
                
                <button class="btn btn-primary" id="movil-payment-submit">
                  <i class="fas fa-paper-plane"></i> Continuar
                </button>
              </div>
            </div>
            
            <!-- Contact support -->
            <div class="card">
              <div class="section-title" style="font-size: 0.9rem; margin-bottom: 0.75rem;">
                <i class="fas fa-headset"></i> ¿Necesitas ayuda?
              </div>
              
              <div class="contact-options">
                <a href="https://wa.me/+17373018059" class="contact-option" target="_blank">
                  <div class="contact-icon whatsapp">
                    <i class="fab fa-whatsapp"></i>
                  </div>
                  <div class="contact-content">
                    <div class="contact-title">WhatsApp</div>
                    <div class="contact-description">Atención 24/7 vía chat</div>
                  </div>
                </a>
                
                <a href="mailto:soporte@remeex.com" class="contact-option">
                  <div class="contact-icon email">
                    <i class="fas fa-envelope"></i>
                  </div>
                  <div class="contact-content">
                    <div class="contact-title">Correo Electrónico</div>
                    <div class="contact-description">soporte@remeex.com</div>
                  </div>
                </a>
              </div>
            </div>
          </div>
          
          <!-- Bank Transfer Form -->
          <div id="bank-transfer-form" style="display: none;">
            <h1 class="section-title" style="font-size: 1.5rem;">
              <i class="fas fa-university"></i> Transferencia Bancaria
              <a href="#" id="back-to-methods-from-bank" style="font-size: 0.8rem;"><i class="fas fa-arrow-left"></i> Volver</a>
            </h1>
            
            <div class="card">
              <!-- Transfer amount -->
              <div class="form-group">
                <label class="form-label" for="transfer-amount-bank">Monto a transferir</label>
                <div class="transfer-amount-container">
                  <span class="transfer-amount-prefix">Bs</span>
                  <input type="text" class="form-control transfer-amount-input" id="transfer-amount-bank" placeholder="0,00" aria-describedby="bank-amount-error">
                </div>
                <div class="error-message" id="bank-amount-error">Por favor, introduzca un monto válido.</div>
                
                <div class="transfer-equivalents">
                  <div class="transfer-equivalent">
                    <img src="https://flagcdn.com/us.svg" class="currency-flag" alt="Bandera de EEUU" style="width: 16px; height: 10px;">
                    <span id="bank-amount-usd">$0,00</span>
                  </div>
                  <div class="transfer-equivalent">
                    <img src="https://flagcdn.com/es.svg" class="currency-flag" alt="Bandera de España" style="width: 16px; height: 10px;">
                    <span id="bank-amount-eur">€0,00</span>
                  </div>
                </div>
                
                <!-- Remaining Balance -->
                <div class="remaining-balance" id="bank-remaining-balance">
                  <div class="remaining-balance-label">Saldo restante:</div>
                  <div class="remaining-balance-amount" id="bank-remaining-amount">Bs 120.000,00</div>
                </div>
                
                <div class="transfer-limits">
                  <i class="fas fa-info-circle"></i> Límite: Hasta 1.000.000,00 Bs por transferencia
                </div>
              </div>
              
              <!-- Saved accounts section -->
              <div class="saved-accounts" id="saved-bank-accounts">
                <div class="section-title" style="font-size: 0.9rem; margin-bottom: 0.75rem;">
                  <i class="fas fa-star"></i> Cuentas guardadas
                </div>
                
                <div id="no-saved-bank-accounts" style="text-align: center; color: var(--neutral-600); font-size: 0.85rem; margin: 1.5rem 0;">
                  <i class="fas fa-info-circle" style="font-size: 2rem; color: var(--neutral-500); margin-bottom: 0.5rem; display: block;"></i>
                  No tiene cuentas guardadas.<br>Complete el formulario para agregar una nueva cuenta.
                </div>
                
                <!-- Saved accounts will be added here dynamically -->
              </div>
              
              <!-- Search bank -->
              <div class="section-title" style="font-size: 0.9rem; margin-bottom: 0.75rem;">
                <i class="fas fa-university"></i> Seleccionar banco
              </div>
              
              <div class="search-container">
                <i class="fas fa-search search-icon"></i>
                <input type="text" class="search-input" id="bank-search" placeholder="Buscar banco..." aria-label="Buscar banco">
                <i class="fas fa-times search-clear" id="clear-bank-search"></i>
              </div>
              
              <!-- Bank selection grid -->
              <div class="bank-selection" id="bank-selection">
                <!-- Banks will be added here dynamically -->
              </div>
              
              <!-- Account details form -->
              <div id="bank-account-form">
                <div class="form-group">
                  <label class="form-label" for="account-number">Número de cuenta</label>
                  <input type="text" class="form-control" id="account-number" placeholder="Ej: 0104 0019 86 0190162931" aria-describedby="account-number-error">
                  <div class="error-message" id="account-number-error">Por favor, introduzca un número de cuenta válido.</div>
                </div>
                
                <div class="form-group">
                  <label class="form-label" for="account-holder">Titular de la cuenta</label>
                  <input type="text" class="form-control" id="account-holder" placeholder="Nombre y apellido del titular" aria-describedby="holder-error">
                  <div class="error-message" id="holder-error">Por favor, introduzca el nombre del titular.</div>
                </div>
                
                <div class="form-group">
                  <label class="form-label" for="account-id">Cédula o RIF</label>
                  <input type="text" class="form-control" id="account-id" placeholder="Ej: V-12345678 o J-12345678" aria-describedby="id-error">
                  <div class="error-message" id="id-error">Por favor, introduzca una cédula o RIF válido.</div>
                </div>
                
                <div class="form-group">
                  <label class="form-label" for="account-email">Correo electrónico (opcional)</label>
                  <input type="email" class="form-control" id="account-email" placeholder="Para enviar comprobante de transferencia">
                </div>
                
                <!-- Validation timeline -->
                <div class="validation-timeline">
                  <div class="timeline-item completed">
                    <div class="timeline-marker">
                      <i class="fas fa-check"></i>
                    </div>
                    <div class="timeline-item-content">
                      <div class="timeline-item-title">Crear transferencia</div>
                      <div class="timeline-item-description">Completa el formulario con la información de destino.</div>
                    </div>
                  </div>
                  
                  <div class="timeline-item active">
                    <div class="timeline-marker">
                      <i class="fas fa-shield-alt"></i>
                    </div>
                    <div class="timeline-item-content">
                      <div class="timeline-item-title">Validar cuenta</div>
                      <div class="timeline-item-description">Por seguridad, debes hacer una recarga desde la misma cuenta para validarla. <a href="#" class="help-link" id="bank-help-link"><i class="fas fa-question-circle"></i> ¿Dudas?</a></div>
                    </div>
                  </div>
                  
                  <div class="timeline-item">
                    <div class="timeline-marker">
                      <i class="fas fa-paper-plane"></i>
                    </div>
                    <div class="timeline-item-content">
                      <div class="timeline-item-title">Procesamiento</div>
                      <div class="timeline-item-description">La transferencia se procesa inmediatamente después de verificar la cuenta.</div>
                    </div>
                  </div>
                </div>
                
                <button class="btn btn-primary" id="bank-transfer-submit">
                  <i class="fas fa-paper-plane"></i> Continuar
                </button>
              </div>
            </div>
            
            <!-- Contact support -->
            <div class="card">
              <div class="section-title" style="font-size: 0.9rem; margin-bottom: 0.75rem;">
                <i class="fas fa-headset"></i> ¿Necesitas ayuda?
              </div>
              
              <div class="contact-options">
                <a href="https://wa.me/+17373018059" class="contact-option" target="_blank">
                  <div class="contact-icon whatsapp">
                    <i class="fab fa-whatsapp"></i>
                  </div>
                  <div class="contact-content">
                    <div class="contact-title">WhatsApp</div>
                    <div class="contact-description">Atención 24/7 vía chat</div>
                  </div>
                </a>
                
                <a href="mailto:soporte@remeex.com" class="contact-option">
                  <div class="contact-icon email">
                    <i class="fas fa-envelope"></i>
                  </div>
                  <div class="contact-content">
                    <div class="contact-title">Correo Electrónico</div>
                    <div class="contact-description">soporte@remeex.com</div>
                  </div>
                </a>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Bottom Navigation -->
  <nav class="bottom-nav">
    <div class="nav-item" onclick="window.location.href='index.html'">
      <div class="nav-icon"><i class="fas fa-home"></i></div>
      <div class="nav-label">Inicio</div>
    </div>
    
    <div class="nav-item" id="bottom-pending-btn">
      <div class="nav-icon"><i class="fas fa-clock"></i></div>
      <div class="nav-label">Pendientes</div>
    </div>
    
    <div class="nav-item" onclick="window.location.href='recarga.html'">
      <div class="nav-icon"><i class="fas fa-plus-circle"></i></div>
      <div class="nav-label">Recargar</div>
    </div>
    
    <div class="nav-item active">
      <div class="nav-icon"><i class="fas fa-paper-plane"></i></div>
      <div class="nav-label">Transferir</div>
    </div>
  </nav>

  <!-- Confirmation Modal -->
  <div class="modal-overlay" id="confirm-modal">
    <div class="modal">
      <div class="modal-title">Confirmar Transferencia</div>
      <div class="modal-subtitle">Por favor verifique los datos antes de continuar</div>
      
      <div class="transfer-confirm-details">
        <div class="confirm-detail-row">
          <div class="confirm-detail-label">Monto:</div>
          <div class="confirm-detail-value" id="confirm-amount">Bs 0,00</div>
        </div>
        
        <div class="confirm-detail-row">
          <div class="confirm-detail-label">Banco:</div>
          <div class="confirm-detail-value" id="confirm-bank">-</div>
        </div>
        
        <div class="confirm-detail-row">
          <div class="confirm-detail-label">Cuenta/Número:</div>
          <div class="confirm-detail-value" id="confirm-account">-</div>
        </div>
        
        <div class="confirm-detail-row">
          <div class="confirm-detail-label">Titular:</div>
          <div class="confirm-detail-value" id="confirm-holder">-</div>
        </div>
        
        <div class="confirm-detail-row">
          <div class="confirm-detail-label">Documento:</div>
          <div class="confirm-detail-value" id="confirm-id">-</div>
        </div>
        
        <div class="confirm-detail-row">
          <div class="confirm-detail-label">Saldo restante:</div>
          <div class="confirm-detail-value" id="confirm-remaining">Bs 120.000,00</div>
        </div>
      </div>
      
      <div class="warning-banner">
        <div class="warning-title">
          <i class="fas fa-exclamation-triangle"></i> Importante
        </div>
        <div class="warning-content">
          Deberás validar la cuenta de destino realizando una recarga desde la misma cuenta antes de que la transferencia sea procesada.
        </div>
      </div>
      
      <div style="display: flex; gap: 1rem; margin-top: 1.5rem;">
        <button class="btn btn-outline" id="cancel-transfer" style="flex: 1;">
          <i class="fas fa-times"></i> Cancelar
        </button>
        <button class="btn btn-primary" id="confirm-transfer" style="flex: 1;">
          <i class="fas fa-check"></i> Confirmar
        </button>
      </div>
    </div>
  </div>
  
  <!-- Validation Required Modal -->
  <div class="modal-overlay" id="validation-required-modal">
    <div class="validation-required-modal">
      <div class="validation-required-header">
        <div class="validation-required-icon">
          <i class="fas fa-shield-alt"></i>
        </div>
        <div class="validation-required-title">Validación requerida</div>
        <div class="validation-required-subtitle">Para completar esta transferencia, necesitamos verificar que eres el titular de la cuenta</div>
      </div>
      
      <div class="validation-requirements">
        <div class="validation-requirement">
          <div class="validation-requirement-icon">
            <i class="fas fa-check-circle"></i>
          </div>
          <div class="validation-requirement-content">
            <div class="validation-requirement-title">¿Por qué validamos tu cuenta?</div>
            <div class="validation-requirement-description">Es una medida de seguridad para proteger tu dinero y evitar fraudes, similar a la que utilizan servicios como Wise, PayPal y otras plataformas financieras.</div>
          </div>
        </div>
        
        <div class="validation-requirement">
          <div class="validation-requirement-icon">
            <i class="fas fa-university"></i>
          </div>
          <div class="validation-requirement-content">
            <div class="validation-requirement-title">¿Cómo validar tu cuenta?</div>
            <div class="validation-requirement-description">Simplemente realiza una recarga a tu cuenta REMEEX desde la misma cuenta bancaria que acabas de registrar. No importa el monto, ¡puede ser cualquier cantidad!</div>
          </div>
        </div>
      </div>
      
      <div class="validation-benefits">
        <div class="validation-benefit">
          <i class="fas fa-check"></i> Proceso único
        </div>
        <div class="validation-benefit">
          <i class="fas fa-check"></i> Mayor seguridad
        </div>
        <div class="validation-benefit">
          <i class="fas fa-check"></i> Sin comisiones adicionales
        </div>
        <div class="validation-benefit">
          <i class="fas fa-check"></i> Protección contra fraudes
        </div>
      </div>
      
      <div class="validation-required-actions">
        <a href="recarga.html" class="btn btn-primary">
          <i class="fas fa-shield-alt"></i> Ir a validar mi cuenta
        </a>
        <button class="btn btn-outline" id="validation-required-close">
          <i class="fas fa-clock"></i> Validaré después
        </button>
      </div>
    </div>
  </div>

  <!-- Help Modal -->
  <div class="modal-overlay" id="help-modal">
    <div class="modal">
      <div class="modal-title">¿Por qué necesitamos validar tu cuenta?</div>
      
      <div style="text-align: left; margin-bottom: 1.5rem;">
        <p style="font-size: 0.9rem; color: var(--neutral-700); margin-bottom: 1rem;">
          En REMEEX, tu seguridad es nuestra prioridad. Por eso implementamos un proceso de validación similar al que utilizan servicios como Wise, PayPal y otras plataformas financieras internacionales.
        </p>
        
        <h3 style="font-size: 1rem; margin-bottom: 0.5rem; color: var(--neutral-800);">
          ¿En qué consiste la validación?
        </h3>
        
        <p style="font-size: 0.9rem; color: var(--neutral-700); margin-bottom: 1rem;">
          Para validar tu cuenta, simplemente debes realizar una recarga a tu cuenta REMEEX desde la misma cuenta bancaria o número telefónico que estás registrando para recibir tus retiros.
        </p>
        
        <h3 style="font-size: 1rem; margin-bottom: 0.5rem; color: var(--neutral-800);">
          Ventajas del proceso de validación:
        </h3>
        
        <ul style="list-style: none; padding: 0; margin-bottom: 1.5rem;">
          <li style="display: flex; align-items: flex-start; gap: 0.5rem; margin-bottom: 0.5rem; font-size: 0.9rem; color: var(--neutral-700);">
            <i class="fas fa-check-circle" style="color: var(--success); margin-top: 0.25rem;"></i>
            <span><strong>Protección contra fraudes:</strong> Evitamos que terceros intenten recibir fondos utilizando tu nombre o documentos.</span>
          </li>
          <li style="display: flex; align-items: flex-start; gap: 0.5rem; margin-bottom: 0.5rem; font-size: 0.9rem; color: var(--neutral-700);">
            <i class="fas fa-check-circle" style="color: var(--success); margin-top: 0.25rem;"></i>
            <span><strong>Proceso único:</strong> Una vez validada la cuenta, quedará registrada para futuros retiros sin necesidad de validarla nuevamente.</span>
          </li>
          <li style="display: flex; align-items: flex-start; gap: 0.5rem; margin-bottom: 0.5rem; font-size: 0.9rem; color: var(--neutral-700);">
            <i class="fas fa-check-circle" style="color: var(--success); margin-top: 0.25rem;"></i>
            <span><strong>Mayor velocidad:</strong> Las transferencias a cuentas validadas se procesan de inmediato, sin demoras adicionales.</span>
          </li>
        </ul>
      </div>
      
      <button class="btn btn-primary" id="help-modal-close">
        <i class="fas fa-check"></i> Entendido
      </button>
    </div>
  </div>
  
  <!-- Blocked Feature Modal (for dollar options) -->
  <div class="modal-overlay" id="blocked-feature-modal">
    <div class="modal">
      <div class="modal-title">Verificación Requerida</div>
      <div class="modal-subtitle">Esta función requiere verificación de identidad para su activación</div>
      
      <div style="text-align: center; margin: 1.5rem 0;">
        <div style="width: 80px; height: 80px; background: var(--warning); border-radius: 50%; color: white; font-size: 2rem; display: flex; align-items: center; justify-content: center; margin: 0 auto 1.5rem;">
          <i class="fas fa-lock"></i>
        </div>
        
        <p style="font-size: 0.9rem; color: var(--neutral-600); margin-bottom: 1.5rem;">
          Para poder retirar fondos en dólares, es necesario completar el proceso de verificación de identidad. Esto nos ayuda a garantizar la seguridad de sus transacciones y cumplir con las regulaciones internacionales.
        </p>
      </div>
      
      <div style="display: flex; flex-direction: column; gap: 1rem;">
        <button class="btn btn-primary" id="go-verify">
          <i class="fas fa-id-card"></i> Verificar Ahora
        </button>
        <button class="btn btn-outline" id="blocked-feature-close">
          <i class="fas fa-arrow-left"></i> Volver
        </button>
      </div>
    </div>
  </div>
  
  <!-- Identity Verification Modal -->
  <div class="modal-overlay" id="verification-modal">
    <div class="verification-modal">
      <div class="verification-title">Verificación de Identidad</div>
      <div class="verification-subtitle">Para garantizar la seguridad de su cuenta y permitir retiros en dólares, necesitamos verificar su identidad.</div>
      
      <div class="id-upload-container">
        <p style="margin-bottom: 1rem; font-size: 0.85rem; color: var(--neutral-600);">Por favor suba una foto de su documento de identidad (ambos lados):</p>
        
        <div class="id-upload-sides">
          <div class="id-upload-side" id="id-front-upload">
            <i class="fas fa-id-card"></i>
            <div class="id-upload-title">Parte Frontal</div>
            <div class="id-upload-subtitle">Cédula o Pasaporte</div>
            <input type="file" id="id-front-file" accept="image/jpeg,image/png" style="display: none;">
          </div>
          
          <div class="id-upload-side" id="id-back-upload">
            <i class="fas fa-id-card"></i>
            <div class="id-upload-title">Parte Trasera</div>
            <div class="id-upload-subtitle">Cédula o Pasaporte</div>
            <input type="file" id="id-back-file" accept="image/jpeg,image/png" style="display: none;">
          </div>
        </div>
        
        <div id="id-front-preview" style="display: none; margin-top: 1rem;">
          <div class="id-preview">
            <div class="id-preview-icon">
              <i class="fas fa-id-card"></i>
            </div>
            <div class="id-preview-content">
              <div class="id-preview-name" id="id-front-filename">frente-cedula.jpg</div>
              <div class="id-preview-size" id="id-front-filesize">120 KB</div>
            </div>
            <div class="id-preview-actions">
              <div class="id-preview-action" id="id-front-remove"><i class="fas fa-trash"></i></div>
            </div>
          </div>
        </div>
        
        <div id="id-back-preview" style="display: none; margin-top: 0.5rem;">
          <div class="id-preview">
            <div class="id-preview-icon">
              <i class="fas fa-id-card"></i>
            </div>
            <div class="id-preview-content">
              <div class="id-preview-name" id="id-back-filename">reverso-cedula.jpg</div>
              <div class="id-preview-size" id="id-back-filesize">120 KB</div>
            </div>
            <div class="id-preview-actions">
              <div class="id-preview-action" id="id-back-remove"><i class="fas fa-trash"></i></div>
            </div>
          </div>
        </div>
      </div>
      
      <div class="warning-banner">
        <div class="warning-title">
          <i class="fas fa-exclamation-triangle"></i> Importante
        </div>
        <div class="warning-content">
          Para completar la verificación, además de subir su documento, debe realizar una recarga desde una cuenta bancaria a su nombre. Esto nos permite verificar que usted es el titular real de la cuenta.
        </div>
      </div>
      
      <div style="display: flex; flex-direction: column; gap: 1rem; margin-top: 1.5rem;">
        <button class="btn btn-primary" id="submit-verification">
          <i class="fas fa-upload"></i> Enviar Documentos
        </button>
        
        <button class="btn btn-outline" id="verification-close">
          <i class="fas fa-times"></i> Cancelar
        </button>
      </div>
    </div>
  </div>

  <!-- Processing Modal -->
  <div class="processing-container" id="processing-container">
    <div class="processing-card">
      <div class="processing-spinner"></div>
      <div class="processing-title">Procesando transferencia</div>
      <div class="processing-message">Estamos registrando tu solicitud de transferencia...</div>
      
      <div class="processing-steps">
        <div class="processing-step completed" id="step-creating">
          <div class="processing-step-icon">
            <i class="fas fa-check"></i>
          </div>
          <span>Creando transferencia</span>
        </div>
        
        <div class="processing-step active" id="step-validating">
          <div class="processing-step-icon">
            <i class="fas fa-sync-alt"></i>
          </div>
          <span>Esperando validación de cuenta</span>
        </div>
        
        <div class="processing-step" id="step-processing">
          <div class="processing-step-icon">
            3
          </div>
          <span>Procesando pago</span>
        </div>
      </div>
    </div>
  </div>

  <!-- Toast Container -->
  <div class="toast-container" id="toast-container"></div>

  <script>
    // Configuración de valores constantes
    const CONFIG = {
      EXCHANGE_RATES: {
        USD_TO_BS: 109.19,
        USD_TO_EUR: 0.94
      },
      LIMITS: {
        BANK_TRANSFER: 1000000, // 1.000.000,00 Bs
        MOBILE_PAYMENT: 250000   // 250.000,00 Bs
      },
      BANKS: [
        { id: 'bdv', name: 'Banco de Venezuela', logo: 'https://www.bancodevenezuela.com/wp-content/uploads/2023/03/logonuevo.png' },
        { id: 'bvc', name: 'Banco Venezolano de Crédito', logo: 'https://www.venezolano.com/images/galeria/108_1.png' },
        { id: 'mercantil', name: 'Banco Mercantil', logo: 'https://files.socialgest.net/mybio/5f529398b36f8_1599247256.png' },
        { id: 'provincial', name: 'Banco Provincial', logo: 'https://upload.wikimedia.org/wikipedia/commons/d/d4/BBVAprovinciallogo.svg' },
        { id: 'bancaribe', name: 'Bancaribe', logo: 'https://d3olc33sy92l9e.cloudfront.net/wp-content/themes/bancaribe/images/Bancaribe-LogotipoTurquesa.png' },
        { id: 'exterior', name: 'Banco Exterior', logo: 'https://upload.wikimedia.org/wikipedia/commons/thumb/d/d3/Banco-Exterior-VE-logo.png/183px-Banco-Exterior-VE-logo.png' },
        { id: 'caroni', name: 'Banco Caroní', logo: 'https://e7.pngegg.com/pngimages/127/511/png-clipart-bank-computer-icons-bank-building-bank.png' },
        { id: 'banesco', name: 'Banesco', logo: 'https://banesco-prod-2020.s3.amazonaws.com/wp-content/themes/banescocontigo/assets/images/header/logo.svg.gzip' },
        { id: 'sofitasa', name: 'Banco Sofitasa', logo: 'https://www.sofitasa.com/assets/img/nuevo_logo.png' },
        { id: 'plaza', name: 'Banco Plaza', logo: 'https://plazacdn.s3.amazonaws.com/wp-content/themes/bancoplaza/imagenes/logobancoplaza-2.png' },
        { id: 'gente', name: 'Banco de la Gente Emprendedora', logo: 'https://e7.pngegg.com/pngimages/127/511/png-clipart-bank-computer-icons-bank-building-bank.png' },
        { id: 'bfc', name: 'Banco Fondo Común', logo: 'https://www.bfc.com.ve/wp-content/uploads/2021/01/logofos.png' },
        { id: '100banco', name: '100% Banco', logo: 'https://www.100x100banco.com/img/logo.png' },
        { id: 'delsur', name: 'DelSur', logo: 'https://e7.pngegg.com/pngimages/127/511/png-clipart-bank-computer-icons-bank-building-bank.png' },
        { id: 'tesoro', name: 'Banco del Tesoro', logo: 'https://upload.wikimedia.org/wikipedia/commons/thumb/5/5c/Logo_Banco_del_Tesoro.jpg/320px-Logo_Banco_del_Tesoro.jpg' },
        { id: 'agricola', name: 'Banco Agrícola de Venezuela', logo: 'https://e7.pngegg.com/pngimages/127/511/png-clipart-bank-computer-icons-bank-building-bank.png' },
        { id: 'bancrecer', name: 'Bancrecer', logo: 'https://www.bancrecer.com.ve/images/img/bancrecer-logo.png' },
        { id: 'mibanco', name: 'Mi Banco', logo: 'https://e7.pngegg.com/pngimages/127/511/png-clipart-bank-computer-icons-bank-building-bank.png' },
        { id: 'activo', name: 'Banco Activo', logo: 'https://www.bancoactivo.com/logo.svg' },
        { id: 'bancamiga', name: 'Bancamiga', logo: 'https://upload.wikimedia.org/wikipedia/commons/thumb/a/a3/Bancamiga.png/320px-Bancamiga.png' },
        { id: 'bicentenario', name: 'Banco Bicentenario', logo: 'https://upload.wikimedia.org/wikipedia/commons/thumb/d/da/BancoDigitaldelosTrabajadores.png/320px-BancoDigitaldelosTrabajadores.png' },
        { id: 'bnc', name: 'Banco Nacional de Crédito', logo: 'https://www.bncenlinea.com/images/default-source/misc/BNCLogo_rebrand.png' },
        { id: 'bcv', name: 'Banco Central de Venezuela', logo: 'https://www.bcv.org.ve/sites/default/files/default_images/logo_bcv-04_2.png' }
      ],
      WALLETS: [
        { id: 'paypal', name: 'PayPal', logo: 'https://upload.wikimedia.org/wikipedia/commons/a/a4/Paypal_2014_logo.png' },
        { id: 'airtm', name: 'AirTM', logo: 'https://brandlogovector.com/wp-content/uploads/2023/08/Airtm-Logo-PNG.png' },
        { id: 'zinli', name: 'Zinli', logo: 'https://images.seeklogo.com/logo-png/41/1/zinli-logo-png_seeklogo-411354.png' },
        { id: 'skrill', name: 'Skrill', logo: 'https://upload.wikimedia.org/wikipedia/commons/9/9b/Skrill_logo.svg' },
        { id: 'payeer', name: 'Payeer', logo: 'https://upload.wikimedia.org/wikipedia/commons/e/e4/Payeer.png' },
        { id: 'perfectmoney', name: 'Perfect Money', logo: 'https://www.perfectmoney.com/img/logo.gif' }
      ]
    };
    
    // Variables globales
    let currentUser = {
      name: 'Juan Pérez',
      balance: {
        bs: 120000.00,
        get usd() {
          return this.bs / CONFIG.EXCHANGE_RATES.USD_TO_BS;
        },
        get eur() {
          return this.usd * CONFIG.EXCHANGE_RATES.USD_TO_EUR;
        }
      },
      originalBalance: {
        bs: 120000.00
      },
      accountVerified: false
    };
    
    let savedBankAccounts = [];
    let savedMobileAccounts = [];
    let pendingBankTransfers = [];
    let pendingMobileTransfers = [];
    let selectedBank = null;
    let selectedMobileBank = null;
    let selectedBankAccount = null;
    let selectedMobileAccount = null;
    let transferAmount = 0;
    let previousBalance = currentUser.balance.bs;
    let currentStep = 1;
    let selectedMethod = '';
    let transferType = 'bank';
    let currentTab = 'bank';
    
    // DOM Ready
    document.addEventListener('DOMContentLoaded', function() {
      // Inicializar la aplicación
      initApp();
      
      // Configurar listeners de eventos
      setupEventListeners();
      
      // Cargar datos guardados
      loadSavedData();
      
      // Mostrar bancos
      populateBanks();
      
      // Inicializar FAQs
      initFAQs();
      
      // Actualizar contadores de transferencias pendientes
      updatePendingCounts();
    });
    
    // Inicializar aplicación
    function initApp() {
      // Actualizar información del usuario
      updateUserInfo();
      
      // Actualizar fecha
      updateDateDisplay();

      // Formatear inputs de monto (agregar separadores de miles)
      setupNumberFormatting();
      
      // Inicializar en el paso 1
      showCurrentStep();
    }
    
    // Inicializar FAQs
    function initFAQs() {
      const faqItems = document.querySelectorAll('.faq-item');
      
      faqItems.forEach(item => {
        const question = item.querySelector('.faq-question');
        
        question.addEventListener('click', function() {
          item.classList.toggle('active');
        });
      });
    }
    
    // Mostrar el paso actual del wizard o la sección de pendientes
    function showCurrentStep() {
      // Ocultar sección de pendientes
      document.getElementById('pending-transfers-section').style.display = 'none';
      
      // Mostrar wizard
      document.getElementById('transfer-wizard').style.display = 'block';
      
      // Ocultar todos los pasos
      document.querySelectorAll('.wizard-step').forEach(step => {
        step.style.display = 'none';
      });
      
      // Mostrar el paso actual
      let currentStepElement;
      
      if (currentStep === 1) {
        currentStepElement = document.getElementById('step-currency-selection');
      } else if (currentStep === 2) {
        currentStepElement = document.getElementById('step-method-selection');
        
        // Mostrar los métodos correctos según la moneda seleccionada
        if (selectedMethod === 'bolivares') {
          document.getElementById('bolivares-methods').style.display = 'block';
          document.getElementById('dollars-methods').style.display = 'none';
        } else if (selectedMethod === 'dollars') {
          document.getElementById('bolivares-methods').style.display = 'none';
          document.getElementById('dollars-methods').style.display = 'block';
        }
      } else if (currentStep === 3) {
        currentStepElement = document.getElementById('step-form-details');
        
        // Mostrar el formulario correcto según el método seleccionado
        document.getElementById('pago-movil-form').style.display = 'none';
        document.getElementById('bank-transfer-form').style.display = 'none';
        
        if (transferType === 'mobile') {
          document.getElementById('pago-movil-form').style.display = 'block';
        } else if (transferType === 'bank') {
          document.getElementById('bank-transfer-form').style.display = 'block';
        }
      }
      
      if (currentStepElement) {
        currentStepElement.style.display = 'block';
      }
      
      // Actualizar indicador de pasos
      updateStepIndicator();
    }
    
    // Mostrar sección de transferencias pendientes
    function showPendingTransfers() {
      // Ocultar wizard
      document.getElementById('transfer-wizard').style.display = 'none';
      
      // Mostrar sección de pendientes
      document.getElementById('pending-transfers-section').style.display = 'block';
      
      // Actualizar pendientes
      updatePendingTransfers();
    }
    
    // Actualizar el listado de transferencias pendientes
    function updatePendingTransfers() {
      // Actualizar tab activo
      document.querySelectorAll('.pending-transfers-tab-item').forEach(tab => {
        tab.classList.remove('active');
        if (tab.dataset.tab === currentTab) {
          tab.classList.add('active');
        }
      });
      
      // Mostrar el contenedor correcto
      document.getElementById('bank-pending-transfers').style.display = currentTab === 'bank' ? 'block' : 'none';
      document.getElementById('mobile-pending-transfers').style.display = currentTab === 'mobile' ? 'block' : 'none';
      
      // Actualizar transferencias bancarias pendientes
      updateBankPendingTransfers();
      
      // Actualizar pagos móviles pendientes
      updateMobilePendingTransfers();
    }
    
    // Actualizar visualización de transferencias bancarias pendientes
    function updateBankPendingTransfers() {
      const container = document.getElementById('bank-pending-transfers');
      const emptyState = document.getElementById('empty-bank-transfers');
      
      // Limpiar contenido existente excepto el estado vacío
      Array.from(container.children).forEach(child => {
        if (child !== emptyState) {
          container.removeChild(child);
        }
      });
      
      // Mostrar estado vacío si no hay transferencias pendientes
      if (pendingBankTransfers.length === 0) {
        emptyState.style.display = 'flex';
        return;
      } else {
        emptyState.style.display = 'none';
      }
      
      // Agregar cada transferencia pendiente
      pendingBankTransfers.forEach((transfer, index) => {
        const transferCard = createPendingTransferCard(transfer, 'bank', index);
        container.insertBefore(transferCard, emptyState);
      });
    }
    
    // Actualizar visualización de pagos móviles pendientes
    function updateMobilePendingTransfers() {
      const container = document.getElementById('mobile-pending-transfers');
      const emptyState = document.getElementById('empty-mobile-transfers');
      
      // Limpiar contenido existente excepto el estado vacío
      Array.from(container.children).forEach(child => {
        if (child !== emptyState) {
          container.removeChild(child);
        }
      });
      
      // Mostrar estado vacío si no hay pagos móviles pendientes
      if (pendingMobileTransfers.length === 0) {
        emptyState.style.display = 'flex';
        return;
      } else {
        emptyState.style.display = 'none';
      }
      
      // Agregar cada pago móvil pendiente
      pendingMobileTransfers.forEach((transfer, index) => {
        const transferCard = createPendingTransferCard(transfer, 'mobile', index);
        container.insertBefore(transferCard, emptyState);
      });
    }
    
    // Crear tarjeta de transferencia pendiente
    function createPendingTransferCard(transfer, type, index) {
      const transferCard = document.createElement('div');
      transferCard.className = 'pending-transfer-card';
      transferCard.dataset.index = index;
      
      // Encontrar banco
      const bank = CONFIG.BANKS.find(b => b.id === transfer.bankId);
      const bankLogo = bank ? bank.logo : 'https://e7.pngegg.com/pngimages/127/511/png-clipart-bank-computer-icons-bank-building-bank.png';
      
      // Encabezado
      const header = document.createElement('div');
      header.className = 'pending-transfer-header';
      header.innerHTML = `
        <img src="${bankLogo}" class="pending-transfer-logo" alt="${transfer.bankName}">
        <div class="pending-transfer-info">
          <div class="pending-transfer-title">
            <span>${type === 'bank' ? 'Transferencia bancaria' : 'Pago Móvil'}</span>
            <span style="background: var(--warning); color: white; padding: 0.2rem 0.4rem; border-radius: var(--radius-sm); font-size: 0.65rem;">Pendiente</span>
          </div>
          <div class="pending-transfer-subtitle">${formatDateShort(transfer.dateCreated)}</div>
        </div>
      `;
      
      // Cuerpo
      const body = document.createElement('div');
      body.className = 'pending-transfer-body';
      
      // Monto
      const amount = document.createElement('div');
      amount.className = 'pending-transfer-amount';
      amount.textContent = `Bs ${formatCurrency(transfer.amount)}`;
      
      // Detalles
      const details = document.createElement('div');
      details.className = 'pending-transfer-details';
      details.innerHTML = `
        <div class="pending-transfer-detail">
          <div class="pending-transfer-detail-label">Banco:</div>
          <div class="pending-transfer-detail-value">${transfer.bankName}</div>
        </div>
        <div class="pending-transfer-detail">
          <div class="pending-transfer-detail-label">${type === 'bank' ? 'Cuenta:' : 'Número:'}</div>
          <div class="pending-transfer-detail-value">${transfer.number}</div>
        </div>
        <div class="pending-transfer-detail">
          <div class="pending-transfer-detail-label">Titular:</div>
          <div class="pending-transfer-detail-value">${transfer.holder}</div>
        </div>
      `;
      
      // Timeline
      const timeline = document.createElement('div');
      timeline.className = 'pending-transfer-timeline';
      timeline.innerHTML = `
        <div class="timeline-step completed">
          <div class="timeline-indicator">
            <i class="fas fa-check"></i>
          </div>
          <div class="timeline-content">
            <div class="timeline-title">Transferencia creada</div>
            <div class="timeline-description">${formatDateWithTime(transfer.dateCreated)}</div>
          </div>
        </div>
        <div class="timeline-step active">
          <div class="timeline-indicator">
            <i class="fas fa-shield-alt"></i>
          </div>
          <div class="timeline-content">
            <div class="timeline-title">Pendiente de validación</div>
            <div class="timeline-description">Debes validar la cuenta para completar la transferencia</div>
          </div>
        </div>
        <div class="timeline-step">
          <div class="timeline-indicator">
            <i class="fas fa-paper-plane"></i>
          </div>
          <div class="timeline-content">
            <div class="timeline-title">Procesamiento</div>
            <div class="timeline-description">La transferencia se procesará al validar la cuenta</div>
          </div>
        </div>
      `;
      
      // Acciones
      const actions = document.createElement('div');
      actions.className = 'pending-transfer-actions';
      actions.innerHTML = `
        <a href="recarga.html" class="pending-transfer-action primary">
          <i class="fas fa-shield-alt"></i> Validar cuenta
        </a>
        <div class="pending-transfer-action danger" data-action="delete" data-type="${type}" data-index="${index}">
          <i class="fas fa-trash-alt"></i> Eliminar
        </div>
      `;
      
      // Construir tarjeta
      body.appendChild(amount);
      body.appendChild(details);
      body.appendChild(timeline);
      body.appendChild(actions);
      
      transferCard.appendChild(header);
      transferCard.appendChild(body);
      
      // Agregar event listener para eliminar
      const deleteBtn = actions.querySelector('[data-action="delete"]');
      deleteBtn.addEventListener('click', function(e) {
        e.stopPropagation();
        const type = this.dataset.type;
        const index = parseInt(this.dataset.index);
        
        if (confirm('¿Está seguro que desea eliminar esta transferencia pendiente?')) {
          if (type === 'bank') {
            pendingBankTransfers.splice(index, 1);
            localStorage.setItem('remeexPendingBankTransfers', JSON.stringify(pendingBankTransfers));
          } else if (type === 'mobile') {
            pendingMobileTransfers.splice(index, 1);
            localStorage.setItem('remeexPendingMobileTransfers', JSON.stringify(pendingMobileTransfers));
          }
          
          // Actualizar interface
          updatePendingTransfers();
          updatePendingCounts();
          
          showToast('success', 'Transferencia eliminada', 'La transferencia pendiente ha sido eliminada correctamente.');
        }
      });
      
      return transferCard;
    }
    
    // Actualizar indicador de pasos
    function updateStepIndicator() {
      document.querySelectorAll('.step-dot').forEach((dot, index) => {
        if (index + 1 === currentStep) {
          dot.classList.add('active');
        } else {
          dot.classList.remove('active');
        }
      });
    }
    
    // Actualizar contadores de transferencias pendientes
    function updatePendingCounts() {
      const bankCount = pendingBankTransfers.length;
      const mobileCount = pendingMobileTransfers.length;
      const totalCount = bankCount + mobileCount;
      
      // Actualizar badge de notificación
      const pendingCountBadge = document.getElementById('pending-count');
      if (pendingCountBadge) {
        pendingCountBadge.textContent = totalCount;
        pendingCountBadge.style.display = totalCount > 0 ? 'flex' : 'none';
      }
      
      // Actualizar contadores en tabs
      const bankPendingCount = document.getElementById('bank-pending-count');
      const mobilePendingCount = document.getElementById('mobile-pending-count');
      
      if (bankPendingCount) {
        bankPendingCount.textContent = bankCount;
        bankPendingCount.style.display = bankCount > 0 ? 'flex' : 'none';
      }
      
      if (mobilePendingCount) {
        mobilePendingCount.textContent = mobileCount;
        mobilePendingCount.style.display = mobileCount > 0 ? 'flex' : 'none';
      }
    }
    
    // Configurar formateo de números
    function setupNumberFormatting() {
      const amountInputs = document.querySelectorAll('.transfer-amount-input');
      
      amountInputs.forEach(input => {
        input.addEventListener('input', function(e) {
          // Remover caracteres no numéricos excepto la coma
          let value = this.value.replace(/[^\d,]/g, '');
          
          // Asegurar que solo haya una coma
          const commaIndex = value.indexOf(',');
          if (commaIndex !== -1) {
            const firstPart = value.slice(0, commaIndex);
            let lastPart = value.slice(commaIndex + 1);
            
            // Limitar a 2 decimales
            if (lastPart.length > 2) {
              lastPart = lastPart.slice(0, 2);
            }
            
            value = firstPart + ',' + lastPart;
          }
          
          // Convertir a número para aplicar formato
          let numValue = parseFloat(value.replace(',', '.')) || 0;
          
          // Formatear con separadores de miles
          if (numValue === 0) {
            this.value = value; // Mantener lo que escribe el usuario si está ingresando coma o primeros dígitos
          } else {
            const parts = numValue.toLocaleString('es-ES', { minimumFractionDigits: 0, maximumFractionDigits: 2 }).split(',');
            
            if (value.includes(',')) {
              // Si el usuario ha escrito una coma, mantener los decimales tal como están
              const userDecimals = value.split(',')[1] || '';
              this.value = parts[0] + ',' + userDecimals;
            } else {
              // Sin decimales
              this.value = parts[0];
            }
          }
          
          // Actualizar proyecciones
          updateAmountProjections(this);
        });
      });
    }
    
    // Actualizar proyecciones de monto
    function updateAmountProjections(input) {
      const inputId = input.id;
      let prefix, usdId, eurId, remainingBalanceId, remainingAmountId, maxAmount;
      
      if (inputId === 'transfer-amount-bank') {
        prefix = 'bank';
        usdId = 'bank-amount-usd';
        eurId = 'bank-amount-eur';
        remainingBalanceId = 'bank-remaining-balance';
        remainingAmountId = 'bank-remaining-amount';
        maxAmount = CONFIG.LIMITS.BANK_TRANSFER;
      } else if (inputId === 'transfer-amount-movil') {
        prefix = 'movil';
        usdId = 'movil-amount-usd';
        eurId = 'movil-amount-eur';
        remainingBalanceId = 'movil-remaining-balance';
        remainingAmountId = 'movil-remaining-amount';
        maxAmount = CONFIG.LIMITS.MOBILE_PAYMENT;
      } else {
        return;
      }
      
      // Obtener valor sin separadores de miles
      let value = input.value.replace(/\./g, '').replace(',', '.');
      
      // Convertir a número
      let amount = parseFloat(value);
      
      // Validar límites
      if (!isNaN(amount)) {
        // Mostrar proyección de saldo
        const balanceProjection = document.getElementById('balance-projection');
        const balanceProjectionAmount = document.getElementById('balance-projection-amount');
        
        if (balanceProjection && balanceProjectionAmount) {
          const projectedBalance = currentUser.originalBalance.bs - amount;
          
          if (projectedBalance >= 0) {
            balanceProjection.style.display = 'block';
            balanceProjectionAmount.textContent = `Bs ${formatCurrency(projectedBalance)}`;
          } else {
            balanceProjection.style.display = 'none';
          }
        }
        
        // Actualizar visualización de saldo restante
        const remainingBalance = document.getElementById(remainingBalanceId);
        const remainingAmount = document.getElementById(remainingAmountId);
        
        if (remainingBalance && remainingAmount) {
          if (amount > 0) {
            remainingBalance.classList.add('active');
            const remaining = Math.max(0, currentUser.balance.bs - amount);
            remainingAmount.textContent = `Bs ${formatCurrency(remaining)}`;
          } else {
            remainingBalance.classList.remove('active');
          }
        }
        
        if (amount > maxAmount) {
          amount = maxAmount;
          input.value = formatNumberWithCommas(amount);
          showToast('warning', 'Monto excede el límite', `El monto máximo por transferencia es de Bs ${formatCurrency(maxAmount)}.`);
        }
        
        if (amount > currentUser.balance.bs) {
          amount = currentUser.balance.bs;
          input.value = formatNumberWithCommas(amount);
          showToast('warning', 'Saldo insuficiente', 'El monto ha sido ajustado a su saldo disponible.');
        }
        
        // Calcular equivalentes
        const usdAmount = amount / CONFIG.EXCHANGE_RATES.USD_TO_BS;
        const eurAmount = usdAmount * CONFIG.EXCHANGE_RATES.USD_TO_EUR;
        
        // Actualizar displays
        const usdDisplay = document.getElementById(usdId);
        const eurDisplay = document.getElementById(eurId);
        
        if (usdDisplay) usdDisplay.textContent = `$${formatCurrency(usdAmount)}`;
        if (eurDisplay) eurDisplay.textContent = `€${formatCurrency(eurAmount)}`;
        
        // Guardar monto de transferencia
        transferAmount = amount;
      } else {
        // Ocultar proyección de saldo si no hay monto válido
        const balanceProjection = document.getElementById('balance-projection');
        if (balanceProjection) {
          balanceProjection.style.display = 'none';
        }
        
        // Ocultar saldo restante
        const remainingBalance = document.getElementById(remainingBalanceId);
        if (remainingBalance) {
          remainingBalance.classList.remove('active');
        }
        
        // Resetear equivalentes
        const usdDisplay = document.getElementById(usdId);
        const eurDisplay = document.getElementById(eurId);
        
        if (usdDisplay) usdDisplay.textContent = `$0,00`;
        if (eurDisplay) eurDisplay.textContent = `€0,00`;
        
        transferAmount = 0;
      }
    }
    
    // Actualizar información del usuario
    function updateUserInfo() {
      // Actualizar avatar y nombre de usuario
      const headerAvatar = document.getElementById('header-avatar');
      const headerUsername = document.getElementById('header-username');
      
      if (headerAvatar && currentUser.name) {
        const initials = currentUser.name.split(' ').map(n => n[0]).join('').toUpperCase();
        headerAvatar.textContent = initials;
      }
      
      if (headerUsername) {
        headerUsername.textContent = currentUser.name;
      }
      
      // Actualizar balance
      const mainBalanceValue = document.getElementById('main-balance-value');
      if (mainBalanceValue) {
        mainBalanceValue.textContent = formatCurrency(currentUser.balance.bs);
      }
      
      // Actualizar equivalentes
      const usdBalanceValue = document.getElementById('usd-balance-value');
      const eurBalanceValue = document.getElementById('eur-balance-value');
      
      if (usdBalanceValue) {
        usdBalanceValue.textContent = `≈ $${currentUser.balance.usd.toLocaleString('es-ES', { minimumFractionDigits: 2, maximumFractionDigits: 2 })}`;
      }
      
      if (eurBalanceValue) {
        eurBalanceValue.textContent = `≈ €${currentUser.balance.eur.toLocaleString('es-ES', { minimumFractionDigits: 2, maximumFractionDigits: 2 })}`;
      }
    }
    
    // Actualizar visualización de fecha
    function updateDateDisplay() {
      const headerDate = document.getElementById('header-date');
      const balanceDate = document.getElementById('balance-date');
      
      const date = new Date();
      const options = { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' };
      const dateStr = date.toLocaleDateString('es-ES', options);
      
      const shortOptions = { month: 'long', day: 'numeric', year: 'numeric' };
      const shortDateStr = date.toLocaleDateString('es-ES', shortOptions);
      
      if (headerDate) headerDate.textContent = shortDateStr;
      if (balanceDate) balanceDate.textContent = capitalizeFirstLetter(dateStr);
    }
    
    // Capitalizar primera letra
    function capitalizeFirstLetter(string) {
      return string.charAt(0).toUpperCase() + string.slice(1);
    }
    
    // Configurar event listeners para la navegación del wizard
    function setupEventListeners() {
      // Navegación a pendientes
      document.getElementById('pending-transfers-btn').addEventListener('click', function() {
        showPendingTransfers();
      });
      
      document.getElementById('bottom-pending-btn').addEventListener('click', function() {
        showPendingTransfers();
      });
      
      // Tabs de pendientes
      document.querySelectorAll('.pending-transfers-tab-item').forEach(tab => {
        tab.addEventListener('click', function() {
          currentTab = this.dataset.tab;
          updatePendingTransfers();
        });
      });
      
      // Selección de moneda (Paso 1)
      document.getElementById('select-bolivares').addEventListener('click', function() {
        selectedMethod = 'bolivares';
        goToStep(2);
      });
      
      document.getElementById('select-dollars').addEventListener('click', function() {
        selectedMethod = 'dollars';
        goToStep(2);
      });
      
      // Navegación en el paso 2
      document.getElementById('back-to-currency').addEventListener('click', function(e) {
        e.preventDefault();
        goToStep(1);
      });
      
      document.getElementById('back-to-currency-from-dollars').addEventListener('click', function(e) {
        e.preventDefault();
        goToStep(1);
      });
      
      // Selección de método para bolívares
      document.getElementById('select-pago-movil').addEventListener('click', function() {
        transferType = 'mobile';
        goToStep(3);
      });
      
      document.getElementById('select-transferencia').addEventListener('click', function() {
        transferType = 'bank';
        goToStep(3);
      });
      
      // Selección de métodos para dólares (todos muestran el modal de verificación)
      const dollarMethods = ['select-usdt', 'select-wallet', 'select-zelle', 'select-international'];
      dollarMethods.forEach(methodId => {
        document.getElementById(methodId).addEventListener('click', function() {
          showBlockedFeatureModal();
        });
      });
      
      // Navegación en el paso 3
      document.getElementById('back-to-methods-from-movil').addEventListener('click', function(e) {
        e.preventDefault();
        goToStep(2);
      });
      
      document.getElementById('back-to-methods-from-bank').addEventListener('click', function(e) {
        e.preventDefault();
        goToStep(2);
      });
      
      // Modal de verificación
      document.getElementById('go-verify').addEventListener('click', function() {
        document.getElementById('blocked-feature-modal').style.display = 'none';
        document.getElementById('verification-modal').style.display = 'flex';
      });
      
      document.getElementById('blocked-feature-close').addEventListener('click', function() {
        document.getElementById('blocked-feature-modal').style.display = 'none';
      });
      
      document.getElementById('verification-close').addEventListener('click', function() {
        document.getElementById('verification-modal').style.display = 'none';
      });
      
      // Modal de ayuda
      document.getElementById('bank-help-link').addEventListener('click', function(e) {
        e.preventDefault();
        document.getElementById('help-modal').style.display = 'flex';
      });
      
      document.getElementById('movil-help-link').addEventListener('click', function(e) {
        e.preventDefault();
        document.getElementById('help-modal').style.display = 'flex';
      });
      
      document.getElementById('help-modal-close').addEventListener('click', function() {
        document.getElementById('help-modal').style.display = 'none';
      });
      
      // Modal de validación requerida
      document.getElementById('validation-required-close').addEventListener('click', function() {
        document.getElementById('validation-required-modal').style.display = 'none';
      });
      
      // Botones de submit de formularios
      document.getElementById('bank-transfer-submit').addEventListener('click', function() {
        if (validateBankTransferForm()) {
          showConfirmationModal('bank');
        }
      });
      
      document.getElementById('movil-payment-submit').addEventListener('click', function() {
        if (validateMobilePaymentForm()) {
          showConfirmationModal('mobile');
        }
      });
      
      // Gestión de modal de confirmación
      document.getElementById('cancel-transfer').addEventListener('click', function() {
        document.getElementById('confirm-modal').style.display = 'none';
      });
      
      document.getElementById('confirm-transfer').addEventListener('click', function() {
        processTransfer();
      });
      
      // Verificación de identidad
      setupIdentityVerificationListeners();
    }
    
    // Configurar listeners para la verificación de identidad
    function setupIdentityVerificationListeners() {
      // Subir documento frontal
      const idFrontUpload = document.getElementById('id-front-upload');
      const idFrontFile = document.getElementById('id-front-file');
      
      idFrontUpload.addEventListener('click', function() {
        idFrontFile.click();
      });
      
      idFrontFile.addEventListener('change', function() {
        if (this.files && this.files[0]) {
          const file = this.files[0];
          if (file.size > 5 * 1024 * 1024) {
            showToast('error', 'Archivo muy grande', 'El tamaño máximo permitido es 5MB');
            return;
          }
          
          const frontPreview = document.getElementById('id-front-preview');
          const frontFilename = document.getElementById('id-front-filename');
          const frontFilesize = document.getElementById('id-front-filesize');
          
          if (frontPreview) frontPreview.style.display = 'block';
          if (frontFilename) frontFilename.textContent = file.name;
          if (frontFilesize) frontFilesize.textContent = formatFileSize(file.size);
        }
      });
      
      // Subir documento trasero
      const idBackUpload = document.getElementById('id-back-upload');
      const idBackFile = document.getElementById('id-back-file');
      
      idBackUpload.addEventListener('click', function() {
        idBackFile.click();
      });
      
      idBackFile.addEventListener('change', function() {
        if (this.files && this.files[0]) {
          const file = this.files[0];
          if (file.size > 5 * 1024 * 1024) {
            showToast('error', 'Archivo muy grande', 'El tamaño máximo permitido es 5MB');
            return;
          }
          
          const backPreview = document.getElementById('id-back-preview');
          const backFilename = document.getElementById('id-back-filename');
          const backFilesize = document.getElementById('id-back-filesize');
          
          if (backPreview) backPreview.style.display = 'block';
          if (backFilename) backFilename.textContent = file.name;
          if (backFilesize) backFilesize.textContent = formatFileSize(file.size);
        }
      });
      
      // Eliminar imágenes
      document.getElementById('id-front-remove').addEventListener('click', function() {
        document.getElementById('id-front-file').value = '';
        document.getElementById('id-front-preview').style.display = 'none';
      });
      
      document.getElementById('id-back-remove').addEventListener('click', function() {
        document.getElementById('id-back-file').value = '';
        document.getElementById('id-back-preview').style.display = 'none';
      });
      
      // Enviar documentos
      document.getElementById('submit-verification').addEventListener('click', function() {
        const frontFile = document.getElementById('id-front-file');
        const backFile = document.getElementById('id-back-file');
        
        if (!frontFile.files.length || !backFile.files.length) {
          showToast('error', 'Documentos incompletos', 'Por favor, suba ambas caras de su documento de identidad.');
          return;
        }
        
        document.getElementById('verification-modal').style.display = 'none';
        document.getElementById('processing-container').style.display = 'flex';
        
        // Simular carga
        setTimeout(function() {
          document.getElementById('processing-container').style.display = 'none';
          
          // Aquí simularíamos que la verificación está pendiente
          currentUser.accountVerified = 'pending';
          
          // Mostrar mensaje de éxito
          showToast('success', 'Verificación en proceso', 'Sus documentos han sido recibidos. La verificación puede tomar hasta 24 horas laborables.');
          
          // Redirigir al paso 1
          goToStep(1);
        }, 2000);
      });
    }
    
    // Formatear tamaño de archivo
    function formatFileSize(bytes) {
      if (bytes < 1024) {
        return bytes + ' bytes';
      } else if (bytes < 1048576) {
        return (bytes / 1024).toFixed(1) + ' KB';
      } else {
        return (bytes / 1048576).toFixed(1) + ' MB';
      }
    }
    
    // Cargar datos guardados desde localStorage
    function loadSavedData() {
      try {
        // Cargar cuentas bancarias guardadas
        const savedBank = localStorage.getItem('remeexBankAccounts');
        if (savedBank) {
          savedBankAccounts = JSON.parse(savedBank);
          updateSavedBankAccountsUI();
        }
        
        // Cargar cuentas de pago móvil guardadas
        const savedMobile = localStorage.getItem('remeexMobileAccounts');
        if (savedMobile) {
          savedMobileAccounts = JSON.parse(savedMobile);
          updateSavedMobileAccountsUI();
        }
        
        // Cargar transferencias bancarias pendientes
        const pendingBank = localStorage.getItem('remeexPendingBankTransfers');
        if (pendingBank) {
          pendingBankTransfers = JSON.parse(pendingBank);
        }
        
        // Cargar pagos móviles pendientes
        const pendingMobile = localStorage.getItem('remeexPendingMobileTransfers');
        if (pendingMobile) {
          pendingMobileTransfers = JSON.parse(pendingMobile);
        }
      } catch (e) {
        console.error('Error loading saved data:', e);
        showToast('error', 'Error al cargar datos', 'No se pudieron cargar sus datos guardados. Por favor, intente nuevamente.');
      }
    }
    
    // Guardar cuentas bancarias en localStorage
    function saveBankAccount(account) {
      // Verificar si ya existe una cuenta con el mismo número
      const exists = savedBankAccounts.findIndex(a => a.number === account.number) !== -1;
      
      if (!exists) {
        savedBankAccounts.push(account);
        localStorage.setItem('remeexBankAccounts', JSON.stringify(savedBankAccounts));
        updateSavedBankAccountsUI();
        return true;
      }
      
      return false;
    }
    
    // Guardar cuentas de pago móvil en localStorage
    function saveMobileAccount(account) {
      // Verificar si ya existe una cuenta con el mismo número
      const exists = savedMobileAccounts.findIndex(a => a.number === account.number) !== -1;
      
      if (!exists) {
        savedMobileAccounts.push(account);
        localStorage.setItem('remeexMobileAccounts', JSON.stringify(savedMobileAccounts));
        updateSavedMobileAccountsUI();
        return true;
      }
      
      return false;
    }
    
    // Guardar transferencia bancaria pendiente
    function savePendingBankTransfer(transfer) {
      pendingBankTransfers.push(transfer);
      localStorage.setItem('remeexPendingBankTransfers', JSON.stringify(pendingBankTransfers));
      updatePendingCounts();
    }
    
    // Guardar pago móvil pendiente
    function savePendingMobileTransfer(transfer) {
      pendingMobileTransfers.push(transfer);
      localStorage.setItem('remeexPendingMobileTransfers', JSON.stringify(pendingMobileTransfers));
      updatePendingCounts();
    }
    
    // Eliminar cuenta bancaria guardada
    function deleteBankAccount(index) {
      savedBankAccounts.splice(index, 1);
      localStorage.setItem('remeexBankAccounts', JSON.stringify(savedBankAccounts));
      updateSavedBankAccountsUI();
    }
    
    // Eliminar cuenta de pago móvil guardada
    function deleteMobileAccount(index) {
      savedMobileAccounts.splice(index, 1);
      localStorage.setItem('remeexMobileAccounts', JSON.stringify(savedMobileAccounts));
      updateSavedMobileAccountsUI();
    }
    
    // Actualizar UI de cuentas bancarias guardadas
    function updateSavedBankAccountsUI() {
      const container = document.getElementById('saved-bank-accounts');
      const noAccountsMsg = document.getElementById('no-saved-bank-accounts');
      
      if (container) {
        // Limpiar contenido existente después del título
        const title = container.querySelector('.section-title');
        if (title) {
          while (container.lastChild !== title) {
            container.removeChild(container.lastChild);
          }
        }
        
        // Mostrar mensaje si no hay cuentas
        if (savedBankAccounts.length === 0) {
          if (noAccountsMsg) noAccountsMsg.style.display = 'block';
          return;
        } else {
          if (noAccountsMsg) noAccountsMsg.style.display = 'none';
        }
        
        // Agregar cada cuenta guardada
        savedBankAccounts.forEach((account, index) => {
          const accountCard = document.createElement('div');
          accountCard.className = 'saved-account-card';
          accountCard.dataset.index = index;
          
          // Encontrar el banco para obtener su logo
          const bank = CONFIG.BANKS.find(b => b.id === account.bankId);
          const bankLogo = bank ? bank.logo : 'https://e7.pngegg.com/pngimages/127/511/png-clipart-bank-computer-icons-bank-building-bank.png';
          
          // Verificar si la cuenta está validada
          const verifiedClass = account.verified ? '' : 'pending';
          const verifiedText = account.verified ? 'Verificada' : 'Pendiente de validación';
          const verifiedIcon = account.verified ? 'check-circle' : 'clock';
          
          accountCard.innerHTML = `
            <img src="${bankLogo}" class="saved-account-logo" alt="${account.bankName}">
            <div class="saved-account-info">
              <div class="saved-account-name">${account.holder}</div>
              <div class="saved-account-number">${account.number}</div>
              <div class="saved-account-verified ${verifiedClass}">
                <i class="fas fa-${verifiedIcon}"></i> ${verifiedText}
              </div>
            </div>
            <div class="saved-account-actions">
              <div class="saved-account-action delete-action" data-action="delete" data-index="${index}">
                <i class="fas fa-trash-alt"></i>
              </div>
            </div>
          `;
          
          container.appendChild(accountCard);
          
          // Event listener para seleccionar la cuenta
          accountCard.addEventListener('click', function(e) {
            // No hacer nada si se hizo clic en el botón de eliminar
            if (e.target.closest('.saved-account-action')) return;
            
            // Marcar como seleccionada
            document.querySelectorAll('.saved-account-card').forEach(card => {
              card.classList.remove('selected');
            });
            this.classList.add('selected');
            
            // Establecer la cuenta seleccionada
            selectedBankAccount = savedBankAccounts[this.dataset.index];
            
            // Actualizar el formulario con los datos de la cuenta
            fillBankAccountForm(selectedBankAccount);
          });
        });
        
        // Event listeners para botones de eliminar
        document.querySelectorAll('#saved-bank-accounts .saved-account-action[data-action="delete"]').forEach(btn => {
          btn.addEventListener('click', function(e) {
            e.stopPropagation();
            const index = parseInt(this.dataset.index);
            if (confirm('¿Está seguro que desea eliminar esta cuenta?')) {
              deleteBankAccount(index);
            }
          });
        });
      }
    }
    
    // Actualizar UI de cuentas de pago móvil guardadas
    function updateSavedMobileAccountsUI() {
      const container = document.getElementById('saved-movil-accounts');
      const noAccountsMsg = document.getElementById('no-saved-movil-accounts');
      
      if (container) {
        // Limpiar contenido existente después del título
        const title = container.querySelector('.section-title');
        if (title) {
          while (container.lastChild !== title) {
            container.removeChild(container.lastChild);
          }
        }
        
        // Mostrar mensaje si no hay cuentas
        if (savedMobileAccounts.length === 0) {
          if (noAccountsMsg) noAccountsMsg.style.display = 'block';
          return;
        } else {
          if (noAccountsMsg) noAccountsMsg.style.display = 'none';
        }
        
        // Agregar cada cuenta guardada
        savedMobileAccounts.forEach((account, index) => {
          const accountCard = document.createElement('div');
          accountCard.className = 'saved-account-card';
          accountCard.dataset.index = index;
          
          // Encontrar el banco para obtener su logo
          const bank = CONFIG.BANKS.find(b => b.id === account.bankId);
          const bankLogo = bank ? bank.logo : 'https://e7.pngegg.com/pngimages/127/511/png-clipart-bank-computer-icons-bank-building-bank.png';
          
          // Verificar si la cuenta está validada
          const verifiedClass = account.verified ? '' : 'pending';
          const verifiedText = account.verified ? 'Verificado' : 'Pendiente de validación';
          const verifiedIcon = account.verified ? 'check-circle' : 'clock';
          
          accountCard.innerHTML = `
            <img src="${bankLogo}" class="saved-account-logo" alt="${account.bankName}">
            <div class="saved-account-info">
              <div class="saved-account-name">${account.holder}</div>
              <div class="saved-account-number">${account.number}</div>
              <div class="saved-account-verified ${verifiedClass}">
                <i class="fas fa-${verifiedIcon}"></i> ${verifiedText}
              </div>
            </div>
            <div class="saved-account-actions">
              <div class="saved-account-action delete-action" data-action="delete" data-index="${index}">
                <i class="fas fa-trash-alt"></i>
              </div>
            </div>
          `;
          
          container.appendChild(accountCard);
          
          // Event listener para seleccionar la cuenta
          accountCard.addEventListener('click', function(e) {
            // No hacer nada si se hizo clic en el botón de eliminar
            if (e.target.closest('.saved-account-action')) return;
            
            // Marcar como seleccionada
            document.querySelectorAll('#saved-movil-accounts .saved-account-card').forEach(card => {
              card.classList.remove('selected');
            });
            this.classList.add('selected');
            
            // Establecer la cuenta seleccionada
            selectedMobileAccount = savedMobileAccounts[this.dataset.index];
            
            // Actualizar el formulario con los datos de la cuenta
            fillMobileAccountForm(selectedMobileAccount);
          });
        });
        
        // Event listeners para botones de eliminar
        document.querySelectorAll('#saved-movil-accounts .saved-account-action[data-action="delete"]').forEach(btn => {
          btn.addEventListener('click', function(e) {
            e.stopPropagation();
            const index = parseInt(this.dataset.index);
            if (confirm('¿Está seguro que desea eliminar este número?')) {
              deleteMobileAccount(index);
            }
          });
        });
      }
    }
    
    // Llenar formulario con datos de cuenta bancaria seleccionada
    function fillBankAccountForm(account) {
      if (!account) return;
      
      const accountNumber = document.getElementById('account-number');
      const accountHolder = document.getElementById('account-holder');
      const accountId = document.getElementById('account-id');
      const accountEmail = document.getElementById('account-email');
      
      if (accountNumber) accountNumber.value = account.number;
      if (accountHolder) accountHolder.value = account.holder;
      if (accountId) accountId.value = account.id;
      if (accountEmail && account.email) accountEmail.value = account.email;
      
      // Seleccionar el banco correspondiente
      const bankOptions = document.querySelectorAll('#bank-selection .bank-option');
      bankOptions.forEach(option => {
        option.classList.remove('selected');
        if (option.dataset.id === account.bankId) {
          option.classList.add('selected');
          selectedBank = {
            id: account.bankId,
            name: account.bankName,
            logo: option.querySelector('img').src
          };
        }
      });
    }
    
    // Llenar formulario con datos de cuenta de pago móvil seleccionada
    function fillMobileAccountForm(account) {
      if (!account) return;
      
      const mobileNumber = document.getElementById('movil-number');
      const mobileHolder = document.getElementById('movil-holder');
      const mobileId = document.getElementById('movil-id');
      
      if (mobileNumber) mobileNumber.value = account.number;
      if (mobileHolder) mobileHolder.value = account.holder;
      if (mobileId) mobileId.value = account.id;
      
      // Seleccionar el banco correspondiente
      const bankOptions = document.querySelectorAll('#movil-bank-selection .bank-option');
      bankOptions.forEach(option => {
        option.classList.remove('selected');
        if (option.dataset.id === account.bankId) {
          option.classList.add('selected');
          selectedMobileBank = {
            id: account.bankId,
            name: account.bankName,
            logo: option.querySelector('img').src
          };
        }
      });
    }
    
    // Navegar entre pasos del wizard
    function goToStep(step) {
      currentStep = step;
      showCurrentStep();
    }
    
    // Mostrar modal de característica bloqueada
    function showBlockedFeatureModal() {
      document.getElementById('blocked-feature-modal').style.display = 'flex';
    }
    
    // Poblar grids de bancos
    function populateBanks() {
      const bankSelection = document.getElementById('bank-selection');
      const mobileBankSelection = document.getElementById('movil-bank-selection');
      
      if (bankSelection && mobileBankSelection) {
        // Limpiar contenido existente
        bankSelection.innerHTML = '';
        mobileBankSelection.innerHTML = '';
        
        // Agregar cada banco
        CONFIG.BANKS.forEach(bank => {
          // Solo mostramos bancos venezolanos
          if (bank.id === 'bofa' || bank.id === 'chase' || bank.id === 'bancolombia' || 
              bank.id === 'wu' || bank.id === 'zinli' || bank.id === 'paypal' || 
              bank.id === 'binance' || bank.id === 'airtm' || bank.id === 'zoom' || 
              bank.id === 'zelle' || bank.id === 'venmo' || bank.id === 'nequi' || 
              bank.id === 'pagomovil') {
            return;
          }
          
          // Crear elemento para transferencia bancaria
          const bankOption = document.createElement('div');
          bankOption.className = 'bank-option';
          bankOption.dataset.id = bank.id;
          bankOption.dataset.name = bank.name;
          
          bankOption.innerHTML = `
            <img src="${bank.logo}" class="bank-logo" alt="${bank.name}" onerror="this.src='https://e7.pngegg.com/pngimages/127/511/png-clipart-bank-computer-icons-bank-building-bank.png'; this.onerror='';">
            <div class="bank-name">${bank.name}</div>
          `;
          
          bankSelection.appendChild(bankOption);
          
          // Event listener para seleccionar banco
          bankOption.addEventListener('click', function() {
            document.querySelectorAll('#bank-selection .bank-option').forEach(option => {
              option.classList.remove('selected');
            });
            this.classList.add('selected');
            
            selectedBank = {
              id: this.dataset.id,
              name: this.dataset.name,
              logo: this.querySelector('img').src
            };
            
            // Deseleccionar cuenta guardada
            document.querySelectorAll('#saved-bank-accounts .saved-account-card').forEach(card => {
              card.classList.remove('selected');
            });
            selectedBankAccount = null;
          });
          
          // Crear elemento para pago móvil (solo si el banco admite pago móvil)
          const mobileBankOption = document.createElement('div');
          mobileBankOption.className = 'bank-option';
          mobileBankOption.dataset.id = bank.id;
          mobileBankOption.dataset.name = bank.name;
          
          mobileBankOption.innerHTML = `
            <img src="${bank.logo}" class="bank-logo" alt="${bank.name}" onerror="this.src='https://e7.pngegg.com/pngimages/127/511/png-clipart-bank-computer-icons-bank-building-bank.png'; this.onerror='';">
            <div class="bank-name">${bank.name}</div>
          `;
          
          mobileBankSelection.appendChild(mobileBankOption);
          
          // Event listener para seleccionar banco
          mobileBankOption.addEventListener('click', function() {
            document.querySelectorAll('#movil-bank-selection .bank-option').forEach(option => {
              option.classList.remove('selected');
            });
            this.classList.add('selected');
            
            selectedMobileBank = {
              id: this.dataset.id,
              name: this.dataset.name,
              logo: this.querySelector('img').src
            };
            
            // Deseleccionar cuenta guardada
            document.querySelectorAll('#saved-movil-accounts .saved-account-card').forEach(card => {
              card.classList.remove('selected');
            });
            selectedMobileAccount = null;
          });
        });
        
        // Configurar búsqueda de bancos
        setupBankSearch();
      }
    }
    
    // Configurar búsqueda de bancos
    function setupBankSearch() {
      // Búsqueda de bancos - Transferencia bancaria
      const bankSearch = document.getElementById('bank-search');
      const clearBankSearch = document.getElementById('clear-bank-search');
      
      if (bankSearch) {
        bankSearch.addEventListener('input', function() {
          filterBanks(this.value, 'bank-selection');
        });
      }
      
      if (clearBankSearch) {
        clearBankSearch.addEventListener('click', function() {
          if (bankSearch) {
            bankSearch.value = '';
            filterBanks('', 'bank-selection');
          }
        });
      }
      
      // Búsqueda de bancos - Pago móvil
      const mobileBankSearch = document.getElementById('movil-bank-search');
      const clearMobileBankSearch = document.getElementById('clear-movil-bank-search');
      
      if (mobileBankSearch) {
        mobileBankSearch.addEventListener('input', function() {
          filterBanks(this.value, 'movil-bank-selection');
        });
      }
      
      if (clearMobileBankSearch) {
        clearMobileBankSearch.addEventListener('click', function() {
          if (mobileBankSearch) {
            mobileBankSearch.value = '';
            filterBanks('', 'movil-bank-selection');
          }
        });
      }
    }
    
    // Filtrar bancos por texto de búsqueda
    function filterBanks(searchText, containerId) {
      const container = document.getElementById(containerId);
      if (!container) return;
      
      const banks = container.querySelectorAll('.bank-option');
      const text = searchText.toLowerCase();
      
      banks.forEach(bank => {
        const bankName = bank.dataset.name.toLowerCase();
        if (bankName.includes(text)) {
          bank.style.display = 'flex';
        } else {
          bank.style.display = 'none';
        }
      });
    }
    
    // Validar formulario de transferencia bancaria
    function validateBankTransferForm() {
      const amountInput = document.getElementById('transfer-amount-bank');
      const accountNumberInput = document.getElementById('account-number');
      const accountHolderInput = document.getElementById('account-holder');
      const accountIdInput = document.getElementById('account-id');
      
      // Errores
      const amountError = document.getElementById('bank-amount-error');
      const accountNumberError = document.getElementById('account-number-error');
      const holderError = document.getElementById('holder-error');
      const idError = document.getElementById('id-error');
      
      // Ocultar mensajes de error previos
      if (amountError) amountError.style.display = 'none';
      if (accountNumberError) accountNumberError.style.display = 'none';
      if (holderError) holderError.style.display = 'none';
      if (idError) idError.style.display = 'none';
      
      // Validar
      let isValid = true;
      
      // Validar monto
      if (!amountInput || !amountInput.value || transferAmount <= 0) {
        if (amountError) {
          amountError.textContent = 'Por favor, introduzca un monto válido.';
          amountError.style.display = 'block';
        }
        isValid = false;
      }
      
      // Validar banco seleccionado
      if (!selectedBank && !selectedBankAccount) {
        showToast('error', 'Banco no seleccionado', 'Por favor, seleccione un banco para la transferencia.');
        isValid = false;
      }
      
      // Validar número de cuenta
      if (!accountNumberInput || !accountNumberInput.value) {
        if (accountNumberError) {
          accountNumberError.textContent = 'Por favor, introduzca un número de cuenta.';
          accountNumberError.style.display = 'block';
        }
        isValid = false;
      } else {
        // Limpiar número de cuenta para validación (quitar espacios y guiones)
        const cleanAccountNumber = accountNumberInput.value.replace(/[\s-]/g, '');
        
        if (!/^\d+$/.test(cleanAccountNumber)) {
          if (accountNumberError) {
            accountNumberError.textContent = 'El número de cuenta debe contener solo números, espacios o guiones.';
            accountNumberError.style.display = 'block';
          }
          isValid = false;
        } else if (cleanAccountNumber.length < 10) {
          if (accountNumberError) {
            accountNumberError.textContent = 'El número de cuenta parece ser muy corto. Verifique la información.';
            accountNumberError.style.display = 'block';
          }
          isValid = false;
        }
      }
      
      // Validar titular
      if (!accountHolderInput || !accountHolderInput.value) {
        if (holderError) {
          holderError.textContent = 'Por favor, introduzca el nombre del titular.';
          holderError.style.display = 'block';
        }
        isValid = false;
      } else if (!/^[A-Za-zÀ-ÖØ-öø-ÿ\s]+$/.test(accountHolderInput.value)) {
        if (holderError) {
          holderError.textContent = 'El nombre debe contener solo letras y espacios.';
          holderError.style.display = 'block';
        }
        isValid = false;
      }
      
      // Validar cédula/RIF
      if (!accountIdInput || !accountIdInput.value) {
        if (idError) {
          idError.textContent = 'Por favor, introduzca una cédula o RIF.';
          idError.style.display = 'block';
        }
        isValid = false;
      } else if (!/^[VEJGPvejgp]-\d+$/.test(accountIdInput.value)) {
        if (idError) {
          idError.textContent = 'Formato inválido. Debe ser como V-12345678 o J-12345678.';
          idError.style.display = 'block';
        }
        isValid = false;
      }
      
      return isValid;
    }
    
    // Validar formulario de pago móvil
    function validateMobilePaymentForm() {
      const amountInput = document.getElementById('transfer-amount-movil');
      const mobileNumberInput = document.getElementById('movil-number');
      const mobileHolderInput = document.getElementById('movil-holder');
      const mobileIdInput = document.getElementById('movil-id');
      
      // Errores
      const amountError = document.getElementById('movil-amount-error');
      const mobileNumberError = document.getElementById('movil-number-error');
      const holderError = document.getElementById('movil-holder-error');
      const idError = document.getElementById('movil-id-error');
      
      // Ocultar mensajes de error previos
      if (amountError) amountError.style.display = 'none';
      if (mobileNumberError) mobileNumberError.style.display = 'none';
      if (holderError) holderError.style.display = 'none';
      if (idError) idError.style.display = 'none';
      
      // Validar
      let isValid = true;
      
      // Validar monto
      if (!amountInput || !amountInput.value || transferAmount <= 0) {
        if (amountError) {
          amountError.textContent = 'Por favor, introduzca un monto válido.';
          amountError.style.display = 'block';
        }
        isValid = false;
      }
      
      // Validar banco seleccionado
      if (!selectedMobileBank && !selectedMobileAccount) {
        showToast('error', 'Banco no seleccionado', 'Por favor, seleccione un banco para el pago móvil.');
        isValid = false;
      }
      
      // Validar número de teléfono
      if (!mobileNumberInput || !mobileNumberInput.value) {
        if (mobileNumberError) {
          mobileNumberError.textContent = 'Por favor, introduzca un número de teléfono.';
          mobileNumberError.style.display = 'block';
        }
        isValid = false;
      } else {
        // Limpiar número de teléfono (quitar espacios)
        const cleanMobileNumber = mobileNumberInput.value.replace(/\s/g, '');
        
        if (!/^0[1-9]\d{9}$/.test(cleanMobileNumber)) {
          if (mobileNumberError) {
            mobileNumberError.textContent = 'Formato inválido. Debe comenzar con 04XX y tener 11 dígitos en total.';
            mobileNumberError.style.display = 'block';
          }
          isValid = false;
        }
      }
      
      // Validar titular
      if (!mobileHolderInput || !mobileHolderInput.value) {
        if (holderError) {
          holderError.textContent = 'Por favor, introduzca el nombre del titular.';
          holderError.style.display = 'block';
        }
        isValid = false;
      } else if (!/^[A-Za-zÀ-ÖØ-öø-ÿ\s]+$/.test(mobileHolderInput.value)) {
        if (holderError) {
          holderError.textContent = 'El nombre debe contener solo letras y espacios.';
          holderError.style.display = 'block';
        }
        isValid = false;
      }
      
      // Validar cédula/RIF
      if (!mobileIdInput || !mobileIdInput.value) {
        if (idError) {
          idError.textContent = 'Por favor, introduzca una cédula o RIF.';
          idError.style.display = 'block';
        }
        isValid = false;
      } else if (!/^[VEJGPvejgp]-\d+$/.test(mobileIdInput.value)) {
        if (idError) {
          idError.textContent = 'Formato inválido. Debe ser como V-12345678 o J-12345678.';
          idError.style.display = 'block';
        }
        isValid = false;
      }
      
      return isValid;
    }
    
    // Mostrar modal de confirmación
    function showConfirmationModal(type) {
      const modal = document.getElementById('confirm-modal');
      const confirmAmount = document.getElementById('confirm-amount');
      const confirmBank = document.getElementById('confirm-bank');
      const confirmAccount = document.getElementById('confirm-account');
      const confirmHolder = document.getElementById('confirm-holder');
      const confirmId = document.getElementById('confirm-id');
      const confirmRemaining = document.getElementById('confirm-remaining');
      
      if (modal) {
        // Establecer datos según el tipo de transferencia
        if (type === 'bank') {
          // Obtener valores del formulario
          const amount = document.getElementById('transfer-amount-bank').value;
          const bank = selectedBank ? selectedBank.name : (selectedBankAccount ? selectedBankAccount.bankName : '');
          const account = document.getElementById('account-number').value;
          const holder = document.getElementById('account-holder').value;
          const id = document.getElementById('account-id').value;
          const remaining = Math.max(0, currentUser.balance.bs - transferAmount);
          
          // Actualizar modal
          if (confirmAmount) confirmAmount.textContent = `Bs ${amount}`;
          if (confirmBank) confirmBank.textContent = bank;
          if (confirmAccount) confirmAccount.textContent = account;
          if (confirmHolder) confirmHolder.textContent = holder;
          if (confirmId) confirmId.textContent = id;
          if (confirmRemaining) confirmRemaining.textContent = `Bs ${formatCurrency(remaining)}`;
        } else if (type === 'mobile') {
          // Obtener valores del formulario
          const amount = document.getElementById('transfer-amount-movil').value;
          const bank = selectedMobileBank ? selectedMobileBank.name : (selectedMobileAccount ? selectedMobileAccount.bankName : '');
          const mobile = document.getElementById('movil-number').value;
          const holder = document.getElementById('movil-holder').value;
          const id = document.getElementById('movil-id').value;
          const remaining = Math.max(0, currentUser.balance.bs - transferAmount);
          
          // Actualizar modal
          if (confirmAmount) confirmAmount.textContent = `Bs ${amount}`;
          if (confirmBank) confirmBank.textContent = bank;
          if (confirmAccount) confirmAccount.textContent = mobile;
          if (confirmHolder) confirmHolder.textContent = holder;
          if (confirmId) confirmId.textContent = id;
          if (confirmRemaining) confirmRemaining.textContent = `Bs ${formatCurrency(remaining)}`;
        }
        
        // Establecer el tipo de transferencia para el procesamiento
        modal.dataset.transferType = type;
        
        // Mostrar modal
        modal.style.display = 'flex';
      }
    }
    
    // Procesar transferencia
    function processTransfer() {
      const modal = document.getElementById('confirm-modal');
      const type = modal ? modal.dataset.transferType : 'bank';
      
      // Guardar el saldo anterior para mostrarlo en la confirmación
      previousBalance = currentUser.balance.bs;
      
      // Ocultar modal de confirmación
      if (modal) modal.style.display = 'none';
      
      // Mostrar animación de procesamiento
      const processingContainer = document.getElementById('processing-container');
      if (processingContainer) processingContainer.style.display = 'flex';
      
      // Registrar la transferencia como pendiente
      if (type === 'bank') {
        registerPendingBankTransfer();
      } else if (type === 'mobile') {
        registerPendingMobileTransfer();
      }
      
      // Simular proceso (1.5 segundos)
      setTimeout(function() {
        // Ocultar animación de procesamiento
        if (processingContainer) processingContainer.style.display = 'none';
        
        // Mostrar modal de validación requerida
        document.getElementById('validation-required-modal').style.display = 'flex';
        
        // Reducir el saldo (simulación)
        currentUser.balance.bs -= transferAmount;
        updateUserInfo();
        
        // Actualizar contadores de transferencias pendientes
        updatePendingCounts();
      }, 1500);
    }
    
    // Registrar transferencia bancaria como pendiente
    function registerPendingBankTransfer() {
      // Obtener valores del formulario
      const bankName = selectedBank ? selectedBank.name : (selectedBankAccount ? selectedBankAccount.bankName : '');
      const bankId = selectedBank ? selectedBank.id : (selectedBankAccount ? selectedBankAccount.bankId : '');
      const accountNumber = document.getElementById('account-number').value;
      const accountHolder = document.getElementById('account-holder').value;
      const accountId = document.getElementById('account-id').value;
      const accountEmail = document.getElementById('account-email').value;
      
      // Crear objeto de transferencia pendiente
      const pendingTransfer = {
        id: generateId(),
        bankId: bankId,
        bankName: bankName,
        number: accountNumber,
        holder: accountHolder,
        id: accountId,
        email: accountEmail,
        amount: transferAmount,
        dateCreated: new Date().toISOString(),
        status: 'pending',
        verified: false
      };
      
      // Guardar transferencia pendiente
      savePendingBankTransfer(pendingTransfer);
      
      // Guardar cuenta (si es nueva)
      if (!selectedBankAccount) {
        const newAccount = {
          bankId: bankId,
          bankName: bankName,
          number: accountNumber,
          holder: accountHolder,
          id: accountId,
          email: accountEmail,
          verified: false,
          dateAdded: new Date().toISOString()
        };
        
        saveBankAccount(newAccount);
      }
    }
    
    // Registrar pago móvil como pendiente
    function registerPendingMobileTransfer() {
      // Obtener valores del formulario
      const bankName = selectedMobileBank ? selectedMobileBank.name : (selectedMobileAccount ? selectedMobileAccount.bankName : '');
      const bankId = selectedMobileBank ? selectedMobileBank.id : (selectedMobileAccount ? selectedMobileAccount.bankId : '');
      const mobileNumber = document.getElementById('movil-number').value;
      const mobileHolder = document.getElementById('movil-holder').value;
      const mobileId = document.getElementById('movil-id').value;
      
      // Crear objeto de transferencia pendiente
      const pendingTransfer = {
        id: generateId(),
        bankId: bankId,
        bankName: bankName,
        number: mobileNumber,
        holder: mobileHolder,
        id: mobileId,
        amount: transferAmount,
        dateCreated: new Date().toISOString(),
        status: 'pending',
        verified: false
      };
      
      // Guardar transferencia pendiente
      savePendingMobileTransfer(pendingTransfer);
      
      // Guardar cuenta (si es nueva)
      if (!selectedMobileAccount) {
        const newAccount = {
          bankId: bankId,
          bankName: bankName,
          number: mobileNumber,
          holder: mobileHolder,
          id: mobileId,
          verified: false,
          dateAdded: new Date().toISOString()
        };
        
        saveMobileAccount(newAccount);
      }
    }
    
    // Generar ID único
    function generateId() {
      return Date.now().toString(36) + Math.random().toString(36).substr(2);
    }
    
    // Resetear wizard a su estado inicial
    function resetWizard() {
      currentStep = 1;
      selectedMethod = '';
      transferType = '';
      
      // Resetear campos de formulario
      document.getElementById('transfer-amount-bank').value = '';
      document.getElementById('account-number').value = '';
      document.getElementById('account-holder').value = '';
      document.getElementById('account-id').value = '';
      document.getElementById('account-email').value = '';
      
      document.getElementById('transfer-amount-movil').value = '';
      document.getElementById('movil-number').value = '';
      document.getElementById('movil-holder').value = '';
      document.getElementById('movil-id').value = '';
      
      // Ocultar proyección de saldo
      document.getElementById('balance-projection').style.display = 'none';
      
      // Deseleccionar bancos y cuentas
      document.querySelectorAll('.bank-option, .saved-account-card').forEach(el => {
        el.classList.remove('selected');
      });
      
      selectedBank = null;
      selectedMobileBank = null;
      selectedBankAccount = null;
      selectedMobileAccount = null;
      
      // Actualizar UI
      showCurrentStep();
    }
    
    // Toast notification
    function showToast(type, title, message, duration = 3000) {
      const container = document.getElementById('toast-container');
      if (container) {
        const toast = document.createElement('div');
        toast.className = `toast ${type}`;
        
        toast.innerHTML = `
          <div class="toast-icon">
            <i class="fas fa-${type === 'success' ? 'check-circle' : type === 'error' ? 'exclamation-circle' : type === 'warning' ? 'exclamation-triangle' : 'info-circle'}"></i>
          </div>
          <div class="toast-content">
            <div class="toast-title">${title}</div>
            <div class="toast-message">${message}</div>
          </div>
          <div class="toast-close">
            <i class="fas fa-times"></i>
          </div>
        `;
        
        container.appendChild(toast);
        
        // Auto remove after duration
        setTimeout(() => {
          toast.style.opacity = '0';
          setTimeout(() => {
            toast.remove();
          }, 300);
        }, duration);
        
        // Close button
        const closeBtn = toast.querySelector('.toast-close');
        if (closeBtn) {
          closeBtn.addEventListener('click', function() {
            toast.style.opacity = '0';
            setTimeout(() => {
              toast.remove();
            }, 300);
          });
        }
      }
    }
    
    // Formato de fecha corta (solo día y mes)
    function formatDateShort(dateString) {
      const date = new Date(dateString);
      const options = { day: 'numeric', month: 'short' };
      return date.toLocaleDateString('es-ES', options);
    }
    
    // Formato de fecha con hora
    function formatDateWithTime(dateString) {
      const date = new Date(dateString);
      const options = { day: 'numeric', month: 'short', hour: '2-digit', minute: '2-digit' };
      return date.toLocaleDateString('es-ES', options) + ' ' + date.toLocaleTimeString('es-ES', { hour: '2-digit', minute: '2-digit' });
    }
    
    // Formatear monto de divisa
    function formatCurrency(amount) {
      return amount.toLocaleString('es-ES', { minimumFractionDigits: 2, maximumFractionDigits: 2 });
    }
    
    // Formatear número solo con comas para decimales
    function formatNumberWithCommas(amount) {
      const parts = amount.toLocaleString('es-ES', { minimumFractionDigits: 2, maximumFractionDigits: 2 }).split(',');
      return parts[0] + ',' + parts[1];
    }
  </script>
</body>
</html>