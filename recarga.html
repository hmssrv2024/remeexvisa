<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>REMEEX Visa Banking</title>
  <link rel="icon" href="https://w7.pngwing.com/pngs/400/28/png-transparent-credit-card-computer-icons-visa-electron-bank-curio-blue-text-rectangle-thumbnail.png" type="image/png">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <script src="https://cdn.jsdelivr.net/npm/vue@2.6.14/dist/vue.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/v-mask@2.3.0/dist/v-mask.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/chart.js@3.9.1/dist/chart.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/gsap@3.11.4/dist/gsap.min.js"></script>

  <style>
    :root {
      /* Modern color palette based on Revolut/N26 style */
      --primary: #1a1f71;
      --primary-dark: #0c1045;
      --primary-light: #3244b6;
      --secondary: #00579f;
      --accent: #f7b600;
      --success: #00d34d;
      --danger: #ff4d4d;
      --warning: #ffad33;
      --info: #0095ff;
      --neutral-100: #ffffff;
      --neutral-200: #f5f7fa;
      --neutral-300: #eaecf0;
      --neutral-400: #d0d5dd;
      --neutral-500: #9da4b4;
      --neutral-600: #6e7891;
      --neutral-700: #4f5d75;
      --neutral-800: #293249;
      --neutral-900: #1a1f37;

      /* Shadows & Effects */
      --shadow-sm: 0 1px 3px rgba(16, 24, 40, 0.1);
      --shadow-md: 0 4px 8px -2px rgba(16, 24, 40, 0.1), 0 2px 4px -2px rgba(16, 24, 40, 0.06);
      --shadow-lg: 0 12px 16px -4px rgba(16, 24, 40, 0.08), 0 4px 6px -2px rgba(16, 24, 40, 0.03);
      --shadow-xl: 0 20px 24px -4px rgba(16, 24, 40, 0.08), 0 8px 8px -4px rgba(16, 24, 40, 0.03);
      --shadow-inner: inset 0 2px 4px 0 rgba(0, 0, 0, 0.06);
      
      /* Border radius */
      --radius-sm: 6px;
      --radius-md: 12px;
      --radius-lg: 16px;
      --radius-xl: 24px;
      --radius-full: 9999px;
      
      /* Transitions */
      --transition-fast: all 0.2s ease;
      --transition-base: all 0.3s ease;
      --transition-slow: all 0.5s ease;
      
      /* Card gradients */
      --card-gradient: linear-gradient(135deg, #1a1f71 0%, #0c1045 100%);
      --success-gradient: linear-gradient(135deg, #00c057 0%, #00a346 100%);
      
      /* Animations */
      --animation-bounce: cubic-bezier(0.34, 1.56, 0.64, 1);
    }
    
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }
    
    body {
      font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
      background: var(--neutral-200);
      color: var(--neutral-900);
      line-height: 1.5;
      -webkit-font-smoothing: antialiased;
      -moz-osx-font-smoothing: grayscale;
      overflow-x: hidden;
      height: 100vh;
      margin: 0;
      position: relative;
    }
    
    /* Scrollbars */
    ::-webkit-scrollbar {
      width: 6px;
      height: 6px;
    }
    
    ::-webkit-scrollbar-track {
      background: var(--neutral-200);
    }
    
    ::-webkit-scrollbar-thumb {
      background: var(--neutral-500);
      border-radius: var(--radius-full);
    }
    
    /* Header */
    .app-header {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 0.6rem 1.25rem;
      background: var(--neutral-100);
      border-bottom: 1px solid var(--neutral-300);
      box-shadow: var(--shadow-sm);
      z-index: 1000;
      height: 70px;
    }
    
    .header-brand {
      display: flex;
      align-items: center;
      gap: 0.5rem;
    }
    
    .header-brand img {
      height: 38px;
      width: auto;
    }
    
    .header-actions {
      display: flex;
      align-items: center;
      gap: 0.75rem;
    }
    
    .header-action-btn {
      width: 40px;
      height: 40px;
      border-radius: var(--radius-full);
      display: flex;
      align-items: center;
      justify-content: center;
      background: var(--neutral-200);
      color: var(--neutral-700);
      border: none;
      cursor: pointer;
      transition: var(--transition-base);
      position: relative;
    }
    
    .header-action-btn:hover {
      background: var(--neutral-300);
      color: var(--neutral-900);
    }
    
    .notification-badge {
      position: absolute;
      top: -2px;
      right: -2px;
      background: var(--danger);
      color: white;
      border-radius: var(--radius-full);
      font-size: 0.6rem;
      width: 18px;
      height: 18px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: 600;
    }
    
    .header-user {
      display: flex;
      align-items: center;
      gap: 0.5rem;
      cursor: pointer;
      padding: 0.375rem 0.75rem;
      border-radius: var(--radius-md);
      transition: var(--transition-base);
    }
    
    .header-user:hover {
      background: var(--neutral-200);
    }
    
    .header-avatar {
      width: 36px;
      height: 36px;
      border-radius: var(--radius-full);
      background: var(--primary);
      color: white;
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: 600;
      font-size: 0.875rem;
    }
    
    .header-user-info {
      display: none;
    }
    
    .header-username {
      font-weight: 600;
      font-size: 0.875rem;
      color: var(--neutral-900);
    }
    
    .header-date {
      font-size: 0.75rem;
      color: var(--neutral-600);
    }
    
    /* Connected Users Badge */
    .users-online-badge {
      display: flex;
      align-items: center;
      gap: 0.5rem;
      padding: 0.375rem 0.75rem;
      background: rgba(26, 31, 113, 0.08);
      border-radius: var(--radius-md);
      font-size: 0.75rem;
      color: var(--primary);
      font-weight: 500;
    }
    
    .users-online-badge i {
      font-size: 0.8rem;
    }
    
    .pulse-dot {
      width: 8px;
      height: 8px;
      background-color: var(--success);
      border-radius: 50%;
      animation: pulse 1.5s infinite;
    }
    
    @keyframes pulse {
      0% {
        transform: scale(0.95);
        box-shadow: 0 0 0 0 rgba(0, 211, 77, 0.7);
      }
      
      70% {
        transform: scale(1);
        box-shadow: 0 0 0 5px rgba(0, 211, 77, 0);
      }
      
      100% {
        transform: scale(0.95);
        box-shadow: 0 0 0 0 rgba(0, 211, 77, 0);
      }
    }
    
    /* Account Balance Card */
    .balance-card {
      background: var(--card-gradient);
      border-radius: var(--radius-lg);
      padding: 1.5rem;
      color: white;
      box-shadow: var(--shadow-lg);
      position: relative;
      overflow: hidden;
      margin-bottom: 1.25rem;
      transition: transform 0.3s var(--animation-bounce), box-shadow 0.3s ease;
    }
    
    .balance-card:hover {
      transform: translateY(-5px);
      box-shadow: var(--shadow-xl);
    }
    
    .balance-card::after {
      content: '';
      position: absolute;
      top: 0;
      left: -100%;
      width: 100%;
      height: 100%;
      background: linear-gradient(90deg, transparent, rgba(255,255,255,0.1), transparent);
      animation: shine 3s infinite;
    }
    
    @keyframes shine {
      100% { left: 200%; }
    }
    
    .card-decoration {
      position: absolute;
      right: -50px;
      bottom: -50px;
      width: 200px;
      height: 200px;
      border-radius: 50%;
      background: radial-gradient(circle, rgba(255,255,255,0.1) 0%, rgba(255,255,255,0) 70%);
      z-index: 1;
    }
    
    .card-decoration:nth-child(2) {
      left: -30px;
      top: -30px;
      width: 150px;
      height: 150px;
    }
    
    .balance-content {
      position: relative;
      z-index: 2;
    }
    
    .balance-label {
      font-size: 0.875rem;
      opacity: 0.8;
      margin-bottom: 0.25rem;
      display: flex;
      align-items: center;
      gap: 0.5rem;
    }
    
    .balance-label i {
      font-size: 1rem;
    }
    
    .balance-amount {
      font-size: 2.5rem;
      font-weight: 700;
      margin: 0.75rem 0 1rem;
      display: flex;
      align-items: center;
      gap: 0.5rem;
    }
    
    .currency-flag {
      width: 24px;
      height: 16px;
      border-radius: 2px;
      object-fit: cover;
      box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
    }
    
    .balance-equivalents {
      display: flex;
      flex-wrap: wrap;
      gap: 1rem;
      margin-bottom: 1rem;
    }
    
    .balance-equivalent {
      background: rgba(255, 255, 255, 0.1);
      border-radius: var(--radius-md);
      padding: 0.5rem 0.75rem;
      font-size: 0.85rem;
      display: flex;
      align-items: center;
      gap: 0.5rem;
      backdrop-filter: blur(5px);
      box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
    }
    
    .exchange-rate {
      background: rgba(255, 255, 255, 0.15);
      border-radius: var(--radius-md);
      padding: 0.5rem 0.75rem;
      font-size: 0.8rem;
      margin-bottom: 1rem;
      display: inline-block;
    }
    
    .balance-date {
      font-size: 0.75rem;
      opacity: 0.7;
      margin-bottom: 1.25rem;
    }
    
    .balance-actions {
      display: flex;
      gap: 0.75rem;
      margin-top: 1rem;
    }
    
    .balance-btn {
      flex: 1;
      border: none;
      border-radius: var(--radius-md);
      height: 46px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: 600;
      font-size: 0.875rem;
      background: rgba(255,255,255,0.15);
      color: white;
      cursor: pointer;
      transition: all 0.3s var(--animation-bounce);
      backdrop-filter: blur(5px);
    }
    
    .balance-btn:hover {
      background: rgba(255,255,255,0.25);
      transform: translateY(-3px);
    }
    
    .balance-btn:active {
      transform: translateY(0);
    }
    
    .balance-btn i {
      margin-right: 8px;
      font-size: 1rem;
    }
    
    /* Pending transactions badge */
    .pending-transaction-badge {
      background: rgba(255, 173, 51, 0.2);
      border-left: 3px solid var(--warning);
      border-radius: var(--radius-md);
      padding: 0.75rem;
      margin-top: 0.75rem;
      font-size: 0.85rem;
      display: flex;
      align-items: center;
      gap: 0.5rem;
    }
    
    .pending-transaction-badge i {
      color: var(--warning);
      font-size: 1rem;
    }
    
    /* Dashboard Layout */
    .app-container {
      padding-top: 85px;
      padding-bottom: 70px;
      max-width: 100%;
      margin: 0 auto;
      height: 100vh;
      overflow-y: auto;
      overflow-x: hidden;
      position: relative;
    }
    
    .dashboard-content {
      padding: 1rem;
      max-width: 1200px;
      margin: 0 auto;
    }
    
    /* Quick Actions */
    .quick-actions {
      display: grid;
      grid-template-columns: repeat(4, 1fr);
      gap: 0.75rem;
      margin-bottom: 1.25rem;
    }
    
    .action-item {
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      background: var(--neutral-100);
      border-radius: var(--radius-md);
      padding: 1rem 0.75rem;
      box-shadow: var(--shadow-sm);
      cursor: pointer;
      transition: all 0.3s var(--animation-bounce);
    }
    
    .action-item:hover {
      transform: translateY(-5px);
      box-shadow: var(--shadow-md);
    }
    
    .action-item.disabled {
      opacity: 0.7;
      cursor: not-allowed;
    }
    
    .action-icon {
      width: 48px;
      height: 48px;
      border-radius: var(--radius-full);
      display: flex;
      align-items: center;
      justify-content: center;
      background: var(--primary-light);
      color: white;
      font-size: 1.25rem;
      margin-bottom: 0.75rem;
      transition: all 0.3s var(--animation-bounce);
    }
    
    .action-item:hover .action-icon {
      transform: scale(1.1);
    }
    
    .action-item.disabled:hover .action-icon {
      transform: none;
    }
    
    .action-icon.send {
      background: var(--secondary);
    }
    
    .action-icon.history {
      background: var(--accent);
      color: var(--neutral-900);
    }
    
    .action-icon.support {
      background: var(--success);
    }
    
    .action-icon.info {
      background: var(--info);
    }
    
    .action-icon.services {
      background: var(--primary);
    }
    
    .action-icon.account {
      background: var(--accent);
      color: var(--neutral-900);
    }
    
    .action-icon.chat {
      background: var(--info);
    }
    
    .action-icon.reviews {
      background: var(--success);
    }
    
    .action-label {
      font-size: 0.85rem;
      font-weight: 600;
      text-align: center;
      color: var(--neutral-700);
    }
    
    .action-description {
      font-size: 0.75rem;
      color: var(--neutral-500);
      text-align: center;
      margin-top: 0.25rem;
    }
    
    /* Sections */
    .section-title {
      font-size: 1.125rem;
      font-weight: 600;
      color: var(--neutral-900);
      margin-bottom: 1rem;
      display: flex;
      align-items: center;
      justify-content: space-between;
    }
    
    .section-title i {
      margin-right: 0.5rem;
      color: var(--primary);
    }
    
    .section-title a {
      font-size: 0.75rem;
      color: var(--primary);
      text-decoration: none;
    }
    
    /* Cards */
    .card {
      background: var(--neutral-100);
      border-radius: var(--radius-lg);
      box-shadow: var(--shadow-sm);
      padding: 1.25rem;
      margin-bottom: 1.25rem;
      transition: transform 0.3s var(--animation-bounce), box-shadow 0.3s ease;
    }
    
    .card:hover {
      transform: translateY(-3px);
      box-shadow: var(--shadow-md);
    }
    
    /* Stats */
    .stats-grid {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 1rem;
      margin-bottom: 1.25rem;
    }
    
    .stat-card {
      background: var(--neutral-100);
      border-radius: var(--radius-md);
      padding: 1rem;
      box-shadow: var(--shadow-sm);
      position: relative;
      transition: transform 0.3s var(--animation-bounce), box-shadow 0.3s ease;
    }
    
    .stat-card:hover {
      transform: translateY(-3px);
      box-shadow: var(--shadow-md);
    }
    
    .stat-icon {
      position: absolute;
      top: 0.75rem;
      right: 0.75rem;
      font-size: 1.25rem;
      color: var(--neutral-400);
      transition: transform 0.3s var(--animation-bounce);
    }
    
    .stat-card:hover .stat-icon {
      transform: scale(1.1);
    }
    
    .stat-label {
      font-size: 0.75rem;
      color: var(--neutral-600);
      margin-bottom: 0.25rem;
      display: flex;
      align-items: center;
      gap: 0.5rem;
    }
    
    .stat-value {
      font-size: 1.5rem;
      font-weight: 700;
      color: var(--neutral-900);
    }
    
    .stat-change {
      font-size: 0.75rem;
      margin-top: 0.25rem;
      display: flex;
      align-items: center;
      gap: 0.25rem;
    }
    
    .stat-change.positive {
      color: var(--success);
    }
    
    .stat-change.negative {
      color: var(--danger);
    }
    
    /* Transactions */
    .transaction-list {
      display: flex;
      flex-direction: column;
      gap: 0.75rem;
    }
    
    .transaction-item {
      display: flex;
      align-items: center;
      gap: 1rem;
      padding: 1rem;
      background: var(--neutral-100);
      border-radius: var(--radius-md);
      transition: all 0.3s ease;
      box-shadow: var(--shadow-sm);
    }
    
    .transaction-item:hover {
      background: var(--neutral-200);
      transform: translateX(5px);
      box-shadow: var(--shadow-md);
    }
    
    .transaction-icon {
      width: 44px;
      height: 44px;
      border-radius: var(--radius-full);
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 1.25rem;
      flex-shrink: 0;
    }
    
    .transaction-icon.deposit {
      background: var(--success);
      color: white;
    }
    
    .transaction-icon.withdraw {
      background: var(--danger);
      color: white;
    }
    
    .transaction-icon.transfer {
      background: var(--primary-light);
      color: white;
    }
    
    .transaction-icon.pending {
      background: var(--warning);
      color: white;
    }
    
    .transaction-content {
      flex: 1;
      min-width: 0;
    }
    
    .transaction-title {
      font-weight: 600;
      font-size: 0.9rem;
      color: var(--neutral-900);
      margin-bottom: 0.125rem;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
      display: flex;
      align-items: center;
      gap: 0.5rem;
    }
    
    .transaction-badge {
      display: inline-flex;
      align-items: center;
      padding: 0.125rem 0.375rem;
      border-radius: var(--radius-sm);
      font-size: 0.65rem;
      font-weight: 600;
      text-transform: uppercase;
    }
    
    .transaction-badge.pending {
      background: rgba(255, 173, 51, 0.15);
      color: var(--warning);
    }
    
    .transaction-badge.processing {
      background: rgba(0, 149, 255, 0.15);
      color: var(--info);
    }
    
    .transaction-details {
      display: flex;
      align-items: center;
      gap: 0.5rem;
      font-size: 0.75rem;
      color: var(--neutral-600);
    }
    
    .transaction-date {
      display: flex;
      align-items: center;
      gap: 0.25rem;
    }
    
    .transaction-date i {
      font-size: 0.7rem;
    }
    
    .transaction-category {
      display: flex;
      align-items: center;
      gap: 0.25rem;
    }
    
    .transaction-category i {
      font-size: 0.7rem;
    }
    
    .transaction-amount {
      font-weight: 600;
      font-size: 0.9rem;
      white-space: nowrap;
    }
    
    .transaction-amount.deposit {
      color: var(--success);
    }
    
    .transaction-amount.withdraw {
      color: var(--danger);
    }
    
    .transaction-amount.pending {
      color: var(--warning);
    }
    
    /* Navigation Bar */
    .bottom-nav {
      position: fixed;
      bottom: 0;
      left: 0;
      right: 0;
      background: var(--neutral-100);
      display: flex;
      justify-content: space-around;
      padding: 0.5rem 0;
      box-shadow: 0 -4px 10px rgba(0, 0, 0, 0.05);
      z-index: 900;
    }
    
    .nav-item {
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      gap: 0.25rem;
      padding: 0.5rem;
      border-radius: var(--radius-md);
      transition: var(--transition-base);
      cursor: pointer;
      flex: 1;
      max-width: 80px;
    }
    
    .nav-item.active {
      color: var(--primary);
    }
    
    .nav-icon {
      font-size: 1.25rem;
      transition: transform 0.3s var(--animation-bounce);
    }
    
    .nav-item:hover .nav-icon {
      transform: translateY(-3px);
    }
    
    .nav-label {
      font-size: 0.625rem;
      font-weight: 600;
    }
    
    /* Login Page */
    .login-container {
      min-height: 100vh;
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 1.5rem;
      background: var(--neutral-200);
      background-image: linear-gradient(135deg, rgba(26, 31, 113, 0.05) 0%, rgba(26, 31, 113, 0.02) 100%);
    }
    
    .login-card {
      background: var(--neutral-100);
      border-radius: var(--radius-lg);
      box-shadow: var(--shadow-lg);
      padding: 2rem;
      width: 100%;
      max-width: 420px;
      animation: fadeIn 0.5s ease;
    }
    
    .login-logo {
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      margin-bottom: 2rem;
    }
    
    .login-logo-container {
      width: 70px;
      height: 70px;
      display: flex;
      align-items: center;
      justify-content: center;
      margin-bottom: 1rem;
    }
    
    .login-logo img {
      height: 50px;
      width: auto;
      object-fit: contain;
    }
    
    .login-heading {
      text-align: center;
      margin-bottom: 2rem;
    }
    
    .login-title {
      font-size: 1.75rem;
      font-weight: 700;
      color: var(--primary);
      margin-bottom: 0.5rem;
    }
    
    .login-subtitle {
      font-size: 0.9rem;
      color: var(--neutral-600);
    }
    
    .form-group {
      margin-bottom: 1.25rem;
    }
    
    .form-label {
      display: block;
      font-size: 0.875rem;
      font-weight: 500;
      color: var(--neutral-700);
      margin-bottom: 0.5rem;
    }
    
    .form-control {
      width: 100%;
      height: 48px;
      padding: 0 1rem;
      border: 1px solid var(--neutral-400);
      border-radius: var(--radius-md);
      font-size: 0.95rem;
      color: var(--neutral-900);
      background: var(--neutral-100);
      transition: var(--transition-base);
    }
    
    .form-control:focus {
      outline: none;
      border-color: var(--primary);
      box-shadow: 0 0 0 3px rgba(26, 31, 113, 0.15);
    }
    
    .error-message {
      font-size: 0.75rem;
      color: var(--danger);
      margin-top: 0.5rem;
      display: none;
    }
    
    .btn {
      display: flex;
      align-items: center;
      justify-content: center;
      height: 48px;
      padding: 0 1.5rem;
      border-radius: var(--radius-md);
      font-weight: 600;
      font-size: 0.95rem;
      border: none;
      cursor: pointer;
      transition: all 0.3s var(--animation-bounce);
    }
    
    .btn-primary {
      background: var(--primary);
      color: white;
      width: 100%;
    }
    
    .btn-primary:hover {
      background: var(--primary-light);
      transform: translateY(-3px);
      box-shadow: var(--shadow-md);
    }
    
    .btn-primary:active {
      transform: translateY(0);
    }
    
    .btn-outline {
      background: transparent;
      border: 1px solid var(--primary);
      color: var(--primary);
    }
    
    .btn-outline:hover {
      background: rgba(26, 31, 113, 0.05);
      transform: translateY(-3px);
    }
    
    .btn i {
      margin-right: 0.5rem;
      font-size: 1.1rem;
    }
    
    /* OTP Verification for Card Payment */
    .modal-overlay {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: rgba(0, 0, 0, 0.7);
      backdrop-filter: blur(5px);
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 1100;
      display: none;
      animation: fadeIn 0.3s ease;
    }
    
    .modal {
      background: var(--neutral-100);
      border-radius: var(--radius-lg);
      width: 90%;
      max-width: 400px;
      padding: 2rem;
      animation: scaleIn 0.3s ease;
    }
    
    .modal-title {
      font-size: 1.5rem;
      font-weight: 700;
      color: var(--neutral-900);
      margin-bottom: 0.75rem;
      text-align: center;
    }
    
    .modal-subtitle {
      font-size: 0.9rem;
      color: var(--neutral-600);
      margin-bottom: 1.5rem;
      text-align: center;
    }
    
    .otp-container {
      display: flex;
      gap: 0.75rem;
      margin: 1.5rem 0;
      justify-content: center;
    }
    
    .otp-input {
      width: 48px;
      height: 56px;
      border: 1px solid var(--neutral-400);
      border-radius: var(--radius-md);
      text-align: center;
      font-size: 1.5rem;
      font-weight: 600;
      color: var(--neutral-900);
    }
    
    .otp-input:focus {
      outline: none;
      border-color: var(--primary);
      box-shadow: 0 0 0 3px rgba(26, 31, 113, 0.15);
    }
    
    .resend-code {
      text-align: center;
      margin-top: 1rem;
      font-size: 0.85rem;
      color: var(--neutral-600);
    }
    
    .resend-code a {
      color: var(--primary);
      text-decoration: none;
      font-weight: 500;
    }
    
    /* Feature Blocked Modal */
    .feature-blocked-modal {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: rgba(0, 0, 0, 0.7);
      backdrop-filter: blur(5px);
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 1100;
      display: none;
    }

    .feature-blocked-card {
      background: var(--neutral-100);
      border-radius: var(--radius-lg);
      width: 90%;
      max-width: 400px;
      padding: 2rem;
      animation: scaleIn 0.3s ease;
      text-align: center;
    }

    .feature-blocked-icon {
      width: 70px;
      height: 70px;
      border-radius: 50%;
      background: var(--warning);
      color: white;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 2rem;
      margin: 0 auto 1.5rem;
    }

    .feature-blocked-title {
      font-size: 1.5rem;
      font-weight: 700;
      color: var(--neutral-900);
      margin-bottom: 0.75rem;
    }

    .feature-blocked-message {
      font-size: 0.9rem;
      color: var(--neutral-600);
      margin-bottom: 2rem;
      line-height: 1.6;
    }

    .feature-blocked-actions {
      display: flex;
      flex-direction: column;
      gap: 1rem;
    }
    
    /* Recharge Page */
    .recharge-container {
      padding: 1rem;
      padding-top: 85px;
      padding-bottom: 70px;
      display: none;
      max-width: 800px;
      margin: 0 auto;
    }
    
    .payment-method-tabs {
      display: flex;
      margin-bottom: 1.5rem;
      background: var(--neutral-200);
      border-radius: var(--radius-md);
      padding: 0.25rem;
    }
    
    .payment-method-tab {
      flex: 1;
      text-align: center;
      padding: 0.75rem;
      border-radius: var(--radius-md);
      font-size: 0.9rem;
      font-weight: 600;
      cursor: pointer;
      transition: var(--transition-base);
    }
    
    .payment-method-tab.active {
      background: var(--neutral-100);
      box-shadow: var(--shadow-sm);
      color: var(--primary);
    }
    
    .payment-method-content {
      display: none;
    }
    
    .payment-method-content.active {
      display: block;
      animation: fadeIn 0.5s ease;
    }
    
    .amount-options {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 1rem;
      margin: 1.5rem 0;
    }
    
    .amount-option {
      background: var(--neutral-100);
      border: 1px solid var(--neutral-300);
      border-radius: var(--radius-md);
      padding: 1.25rem;
      text-align: center;
      cursor: pointer;
      transition: all 0.3s var(--animation-bounce);
    }
    
    .amount-option:hover {
      border-color: var(--primary-light);
      transform: translateY(-5px);
      box-shadow: var(--shadow-md);
    }
    
    .amount-option.selected {
      border-color: var(--primary);
      background: rgba(26, 31, 113, 0.05);
    }
    
    .amount-value {
      font-size: 1.5rem;
      font-weight: 700;
      color: var(--neutral-900);
      margin-bottom: 0.5rem;
    }
    
    .amount-equivalent {
      font-size: 0.8rem;
      color: var(--neutral-600);
      line-height: 1.4;
    }
    
    .custom-amount {
      margin-top: 2rem;
    }
    
    .custom-amount-title {
      font-size: 1rem;
      font-weight: 600;
      color: var(--neutral-800);
      margin-bottom: 1rem;
      display: flex;
      align-items: center;
    }
    
    .custom-amount-title i {
      margin-right: 0.5rem;
      color: var(--primary);
    }
    
    .custom-amount-container {
      display: flex;
      align-items: center;
      position: relative;
    }
    
    .custom-amount-prefix {
      position: absolute;
      left: 1rem;
      font-size: 1.25rem;
      font-weight: 700;
      color: var(--neutral-700);
    }
    
    .custom-amount-input {
      height: 56px;
      padding-left: 2.5rem;
      font-size: 1.25rem;
      font-weight: 600;
    }
    
    .amount-limits {
      font-size: 0.8rem;
      color: var(--neutral-600);
      margin-top: 0.5rem;
    }
    
    /* Bank Account Details */
    .bank-details {
      background: var(--neutral-200);
      border-radius: var(--radius-md);
      padding: 1.25rem;
      margin: 1.5rem 0;
    }
    
    .bank-detail-row {
      display: flex;
      justify-content: space-between;
      margin-bottom: 0.75rem;
      padding-bottom: 0.75rem;
      border-bottom: 1px solid var(--neutral-300);
    }
    
    .bank-detail-row:last-child {
      margin-bottom: 0;
      padding-bottom: 0;
      border-bottom: none;
    }
    
    .bank-detail-label {
      font-size: 0.85rem;
      color: var(--neutral-600);
    }
    
    .bank-detail-value {
      font-size: 0.85rem;
      font-weight: 600;
      color: var(--neutral-900);
      display: flex;
      align-items: center;
      gap: 0.5rem;
    }
    
    .copy-btn {
      background: var(--neutral-300);
      color: var(--neutral-700);
      width: 28px;
      height: 28px;
      display: flex;
      align-items: center;
      justify-content: center;
      border-radius: var(--radius-full);
      cursor: pointer;
      transition: var(--transition-base);
    }
    
    .copy-btn:hover {
      background: var(--primary);
      color: white;
    }
    
    .bank-warning {
      background: rgba(247, 182, 0, 0.1);
      border-left: 3px solid var(--warning);
      padding: 1rem;
      margin-top: 1.5rem;
      border-radius: var(--radius-sm);
    }
    
    .bank-warning-title {
      font-weight: 600;
      font-size: 0.9rem;
      color: var(--neutral-900);
      margin-bottom: 0.5rem;
      display: flex;
      align-items: center;
      gap: 0.5rem;
    }
    
    .bank-warning-title i {
      color: var(--warning);
    }
    
    .bank-warning-content {
      font-size: 0.85rem;
      color: var(--neutral-700);
    }
    
    /* Receipt Upload */
    .receipt-upload {
      border: 2px dashed var(--neutral-400);
      border-radius: var(--radius-md);
      padding: 2rem 1rem;
      margin: 1.5rem 0;
      text-align: center;
      cursor: pointer;
      transition: var(--transition-base);
    }
    
    .receipt-upload:hover {
      border-color: var(--primary);
      background: rgba(26, 31, 113, 0.02);
    }
    
    .receipt-upload i {
      font-size: 2.5rem;
      color: var(--neutral-500);
      margin-bottom: 1rem;
    }
    
    .receipt-upload-title {
      font-weight: 600;
      font-size: 1rem;
      color: var(--neutral-800);
      margin-bottom: 0.5rem;
    }
    
    .receipt-upload-subtitle {
      font-size: 0.85rem;
      color: var(--neutral-600);
    }
    
    .receipt-preview {
      display: none;
      margin-top: 1.5rem;
    }
    
    .receipt-preview-container {
      display: flex;
      align-items: center;
      gap: 1rem;
      padding: 1rem;
      background: var(--neutral-200);
      border-radius: var(--radius-md);
      margin-bottom: 1rem;
    }
    
    .receipt-preview-icon {
      width: 48px;
      height: 48px;
      border-radius: var(--radius-md);
      background: var(--primary);
      color: white;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 1.25rem;
    }
    
    .receipt-preview-content {
      flex: 1;
    }
    
    .receipt-preview-name {
      font-weight: 600;
      font-size: 0.9rem;
      margin-bottom: 0.25rem;
    }
    
    .receipt-preview-size {
      font-size: 0.75rem;
      color: var(--neutral-600);
    }
    
    .receipt-preview-actions {
      display: flex;
      gap: 0.5rem;
    }
    
    /* Reference Number */
    .reference-number {
      margin-top: 1.5rem;
    }
    
    /* Credit Card Form */
    .card-preview {
      width: 100%;
      max-width: 380px;
      height: 220px;
      margin: 0 auto 2rem;
      perspective: 1000px;
      transition: var(--transition-base);
    }
    
    .card-inner {
      position: relative;
      width: 100%;
      height: 100%;
      transition: transform 0.8s;
      transform-style: preserve-3d;
    }
    
    .card-preview.-active .card-inner {
      transform: rotateY(180deg);
    }
    
    .card-front,
    .card-back {
      position: absolute;
      width: 100%;
      height: 100%;
      -webkit-backface-visibility: hidden;
      backface-visibility: hidden;
      border-radius: var(--radius-lg);
      padding: 1.5rem;
      box-shadow: var(--shadow-lg);
    }
    
    .card-front {
      background: var(--card-gradient);
      color: white;
    }
    
    .card-back {
      background: var(--card-gradient);
      color: white;
      transform: rotateY(180deg);
    }
    
    .card-logo {
      display: flex;
      justify-content: space-between;
      align-items: flex-start;
      margin-bottom: 2.5rem;
    }
    
    .card-chip {
      width: 45px;
      height: auto;
    }
    
    .card-brand {
      width: 65px;
      height: auto;
    }
    
    .card-number {
      font-size: 1.5rem;
      letter-spacing: 2px;
      margin-bottom: 1.5rem;
      font-family: monospace;
    }
    
    .card-details {
      display: flex;
      justify-content: space-between;
      font-size: 0.85rem;
    }
    
    .card-holder {
      text-transform: uppercase;
    }
    
    .card-expiry {
      display: flex;
      gap: 0.25rem;
    }
    
    .card-stripe {
      height: 50px;
      background: #000;
      margin: 1.25rem 0;
    }
    
    .card-cvv {
      display: flex;
      justify-content: flex-end;
      align-items: center;
      height: 45px;
      background: white;
      color: black;
      border-radius: 4px;
      padding: 0 0.75rem;
      font-size: 1rem;
      font-family: monospace;
    }
    
    .card-form {
      display: flex;
      flex-direction: column;
      gap: 1.5rem;
    }
    
    .card-row {
      display: flex;
      gap: 1rem;
    }
    
    .card-col {
      flex: 1;
    }
    
    /* Security Badge */
    .security-badge {
      display: flex;
      align-items: center;
      gap: 0.75rem;
      background: rgba(26, 31, 113, 0.05);
      border-radius: var(--radius-md);
      padding: 0.75rem 1rem;
      margin-bottom: 1.5rem;
    }
    
    .security-badge-icon {
      width: 32px;
      height: 32px;
      background: var(--primary);
      border-radius: var(--radius-full);
      display: flex;
      align-items: center;
      justify-content: center;
      color: white;
      font-size: 1rem;
    }
    
    .security-badge-content {
      flex: 1;
    }
    
    .security-badge-title {
      font-weight: 600;
      font-size: 0.85rem;
      color: var(--neutral-900);
      margin-bottom: 0.125rem;
    }
    
    .security-badge-text {
      font-size: 0.75rem;
      color: var(--neutral-600);
    }
    
    /* Loading */
    .loading-overlay {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: rgba(0, 0, 0, 0.8);
      backdrop-filter: blur(5px);
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      z-index: 1100;
      display: none;
    }
    
    .spinner {
      width: 60px;
      height: 60px;
      border: 4px solid rgba(255, 255, 255, 0.2);
      border-radius: 50%;
      border-top-color: white;
      animation: spin 1s linear infinite;
      margin-bottom: 2rem;
    }
    
    .loading-text {
      color: white;
      font-size: 1.1rem;
      margin-bottom: 2rem;
      font-weight: 500;
    }
    
    .progress-bar-container {
      width: 80%;
      max-width: 300px;
      height: 10px;
      background: rgba(255, 255, 255, 0.2);
      border-radius: var(--radius-full);
      overflow: hidden;
    }
    
    .progress-bar {
      height: 100%;
      background: white;
      width: 0%;
      border-radius: var(--radius-full);
      transition: width 0.3s ease;
    }
    
    /* Success Animation */
    .success-container {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: rgba(0, 0, 0, 0.9);
      backdrop-filter: blur(10px);
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 1200;
      display: none;
    }
    
    .success-card {
      background: white;
      border-radius: var(--radius-lg);
      width: 90%;
      max-width: 400px;
      padding: 2.5rem;
      text-align: center;
      animation: scaleIn 0.3s ease;
    }
    
    .success-checkmark {
      width: 90px;
      height: 90px;
      border-radius: 50%;
      background: var(--success);
      color: white;
      font-size: 2.5rem;
      display: flex;
      align-items: center;
      justify-content: center;
      margin: 0 auto 2rem;
      transform: scale(0);
      animation: checkmarkScale 0.5s ease forwards 0.3s;
    }
    
    .success-title {
      font-size: 1.75rem;
      font-weight: 700;
      color: var(--neutral-900);
      margin-bottom: 0.75rem;
      opacity: 0;
      animation: fadeInUp 0.5s ease forwards 0.8s;
    }
    
    .success-amount {
      font-size: 2.5rem;
      font-weight: 700;
      color: var(--primary);
      margin-bottom: 1.5rem;
      opacity: 0;
      animation: fadeInUp 0.5s ease forwards 1.1s;
    }
    
    .success-message {
      font-size: 1rem;
      color: var(--neutral-600);
      margin-bottom: 2rem;
      opacity: 0;
      animation: fadeInUp 0.5s ease forwards 1.4s;
    }
    
    .success-actions {
      display: flex;
      flex-direction: column;
      gap: 1rem;
      opacity: 0;
      animation: fadeInUp 0.5s ease forwards 1.7s;
    }
    
    /* Verification Banner */
    .verify-banner {
      background: linear-gradient(135deg, var(--warning) 0%, #f59e0b 100%);
      border-radius: var(--radius-md);
      padding: 1rem;
      display: flex;
      align-items: center;
      gap: 1rem;
      margin: 1.5rem 0;
      box-shadow: var(--shadow-md);
    }
    
    .verify-icon {
      width: 40px;
      height: 40px;
      background: white;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      color: var(--warning);
      font-size: 1.25rem;
      flex-shrink: 0;
    }
    
    .verify-content {
      flex: 1;
    }
    
    .verify-title {
      font-weight: 600;
      color: white;
      margin-bottom: 0.25rem;
      font-size: 1rem;
    }
    
    .verify-text {
      color: rgba(255, 255, 255, 0.8);
      font-size: 0.85rem;
    }
    
    .verify-action {
      background: white;
      color: var(--warning);
      font-weight: 600;
      font-size: 0.85rem;
      padding: 0.5rem 1rem;
      border-radius: var(--radius-md);
      flex-shrink: 0;
      transition: all 0.3s var(--animation-bounce);
      cursor: pointer;
      border: none;
    }
    
    .verify-action:hover {
      transform: translateY(-3px);
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
    }
    
    /* Identity Verification Modal */
    .id-upload-container {
      display: none;
      margin-top: 1rem;
    }
    
    .id-upload-sides {
      display: flex;
      gap: 1rem;
      margin-bottom: 1.5rem;
    }
    
    .id-upload-side {
      flex: 1;
      border: 2px dashed var(--neutral-400);
      border-radius: var(--radius-md);
      padding: 1.5rem 1rem;
      text-align: center;
      cursor: pointer;
      transition: var(--transition-base);
    }
    
    .id-upload-side:hover {
      border-color: var(--primary);
      background: rgba(26, 31, 113, 0.02);
    }
    
    .id-upload-side i {
      font-size: 2rem;
      color: var(--neutral-500);
      margin-bottom: 0.75rem;
    }
    
    .id-upload-title {
      font-weight: 600;
      font-size: 0.9rem;
      color: var(--neutral-800);
      margin-bottom: 0.25rem;
    }
    
    .id-upload-subtitle {
      font-size: 0.75rem;
      color: var(--neutral-600);
    }
    
    .id-preview {
      display: flex;
      align-items: center;
      gap: 1rem;
      padding: 0.75rem;
      background: var(--neutral-200);
      border-radius: var(--radius-md);
      margin-bottom: 0.75rem;
    }
    
    .id-preview-icon {
      width: 40px;
      height: 40px;
      border-radius: var(--radius-md);
      background: var(--primary);
      color: white;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 1.1rem;
    }
    
    .id-preview-content {
      flex: 1;
    }
    
    .id-preview-name {
      font-weight: 600;
      font-size: 0.8rem;
      margin-bottom: 0.25rem;
    }
    
    .id-preview-size {
      font-size: 0.7rem;
      color: var(--neutral-600);
    }
    
    .id-preview-actions {
      display: flex;
      gap: 0.5rem;
    }
    
    /* Contact Options */
    .contact-options {
      display: flex;
      flex-direction: column;
      gap: 1rem;
      margin-top: 1.5rem;
    }
    
    .contact-option {
      display: flex;
      align-items: center;
      gap: 1rem;
      padding: 1rem;
      background: var(--neutral-200);
      border-radius: var(--radius-md);
      transition: all 0.3s ease;
      text-decoration: none;
      color: var(--neutral-900);
    }
    
    .contact-option:hover {
      background: var(--neutral-300);
      transform: translateY(-3px);
      box-shadow: var(--shadow-md);
    }
    
    .contact-icon {
      width: 44px;
      height: 44px;
      border-radius: var(--radius-full);
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 1.25rem;
      flex-shrink: 0;
      color: white;
    }
    
    .contact-icon.whatsapp {
      background: #25D366;
    }
    
    .contact-icon.email {
      background: var(--primary);
    }
    
    .contact-content {
      flex: 1;
    }
    
    .contact-title {
      font-weight: 600;
      font-size: 0.9rem;
      margin-bottom: 0.25rem;
    }
    
    .contact-description {
      font-size: 0.8rem;
      color: var(--neutral-600);
    }
    
    /* Security Verification Modal */
    .verification-container {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: rgba(0, 0, 0, 0.9);
      backdrop-filter: blur(10px);
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 1200;
      display: none;
    }
    
    .verification-card {
      background: white;
      border-radius: var(--radius-lg);
      width: 90%;
      max-width: 480px;
      padding: 2rem;
      animation: scaleIn 0.3s ease;
    }
    
    .verification-header {
      text-align: center;
      margin-bottom: 2rem;
    }
    
    .verification-title {
      font-size: 1.5rem;
      font-weight: 700;
      color: var(--neutral-900);
      margin-bottom: 0.5rem;
    }
    
    .verification-subtitle {
      font-size: 0.9rem;
      color: var(--neutral-600);
    }
    
    .verification-steps {
      display: flex;
      flex-direction: column;
      gap: 1.5rem;
      margin-bottom: 2rem;
    }
    
    .verification-step {
      display: flex;
      gap: 1rem;
      align-items: flex-start;
    }
    
    .step-number {
      width: 28px;
      height: 28px;
      border-radius: var(--radius-full);
      background: var(--primary);
      color: white;
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: 600;
      font-size: 0.85rem;
      flex-shrink: 0;
    }
    
    .step-content {
      flex: 1;
    }
    
    .step-title {
      font-weight: 600;
      font-size: 1rem;
      color: var(--neutral-900);
      margin-bottom: 0.25rem;
    }
    
    .step-description {
      font-size: 0.85rem;
      color: var(--neutral-600);
    }
    
    /* Toast Notifications */
    .toast-container {
      position: fixed;
      top: 80px;
      right: 20px;
      z-index: 9999;
      display: flex;
      flex-direction: column;
      gap: 0.75rem;
    }
    
    .toast {
      background: var(--neutral-900);
      color: white;
      border-radius: var(--radius-md);
      padding: 1rem 1.25rem;
      min-width: 280px;
      max-width: 350px;
      box-shadow: var(--shadow-lg);
      display: flex;
      align-items: center;
      gap: 0.75rem;
      animation: slideInRight 0.3s ease, fadeOut 0.3s ease 3s forwards;
    }
    
    .toast.success {
      border-left: 4px solid var(--success);
    }
    
    .toast.error {
      border-left: 4px solid var(--danger);
    }
    
    .toast.warning {
      border-left: 4px solid var(--warning);
    }
    
    .toast.info {
      border-left: 4px solid var(--info);
    }
    
    .toast-icon {
      flex-shrink: 0;
    }
    
    .toast-content {
      flex: 1;
    }
    
    .toast-title {
      font-weight: 600;
      font-size: 0.9rem;
      margin-bottom: 0.25rem;
    }
    
    .toast-message {
      font-size: 0.8rem;
      opacity: 0.9;
    }
    
    .toast-close {
      color: var(--neutral-400);
      cursor: pointer;
      transition: var(--transition-base);
    }
    
    .toast-close:hover {
      color: white;
    }
    
    /* Inactivity Modal */
    .inactivity-modal {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: rgba(0, 0, 0, 0.8);
      backdrop-filter: blur(5px);
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 9999;
      display: none;
      animation: fadeIn 0.3s ease;
    }
    
    .inactivity-card {
      background: white;
      border-radius: var(--radius-lg);
      width: 90%;
      max-width: 400px;
      padding: 2rem;
      text-align: center;
      animation: scaleIn 0.3s ease;
    }
    
    .inactivity-icon {
      width: 70px;
      height: 70px;
      border-radius: 50%;
      background: var(--warning);
      color: white;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 2rem;
      margin: 0 auto 1.5rem;
    }
    
    .inactivity-title {
      font-size: 1.5rem;
      font-weight: 700;
      color: var(--neutral-900);
      margin-bottom: 0.75rem;
    }
    
    .inactivity-message {
      font-size: 0.9rem;
      color: var(--neutral-600);
      margin-bottom: 1.5rem;
    }
    
    .inactivity-timer {
      font-size: 2rem;
      font-weight: 700;
      color: var(--danger);
      margin-bottom: 1.5rem;
    }
    
    .inactivity-actions {
      display: flex;
      flex-direction: column;
      gap: 1rem;
    }
    
    /* Welcome Modal */
    .welcome-modal {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: rgba(0, 0, 0, 0.7);
      backdrop-filter: blur(5px);
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 1200;
      display: none;
    }
    
    .welcome-card {
      background: white;
      border-radius: var(--radius-lg);
      width: 90%;
      max-width: 500px;
      padding: 2rem;
      animation: scaleIn 0.3s ease;
    }
    
    .welcome-header {
      display: flex;
      align-items: center;
      gap: 1.5rem;
      margin-bottom: 1.5rem;
    }
    
    .welcome-icon {
      width: 60px;
      height: 60px;
      border-radius: 50%;
      background: var(--primary);
      color: white;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 1.5rem;
      flex-shrink: 0;
    }
    
    .welcome-title-container {
      flex: 1;
    }
    
    .welcome-title {
      font-size: 1.5rem;
      font-weight: 700;
      color: var(--neutral-900);
      margin-bottom: 0.25rem;
    }
    
    .welcome-subtitle {
      font-size: 0.9rem;
      color: var(--neutral-600);
    }
    
    .welcome-content {
      margin-bottom: 2rem;
    }
    
    .welcome-step {
      display: flex;
      gap: 1rem;
      align-items: flex-start;
      margin-bottom: 1.25rem;
    }
    
    .welcome-step-icon {
      width: 32px;
      height: 32px;
      border-radius: var(--radius-full);
      background: var(--primary-light);
      color: white;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 1rem;
      flex-shrink: 0;
    }
    
    .welcome-step-content {
      flex: 1;
    }
    
    .welcome-step-title {
      font-weight: 600;
      font-size: 1rem;
      color: var(--neutral-900);
      margin-bottom: 0.25rem;
    }
    
    .welcome-step-description {
      font-size: 0.85rem;
      color: var(--neutral-600);
    }

    /* Community feature buttons */
    .community-features {
      display: flex;
      gap: 1rem;
      margin-top: 1.5rem;
    }
    
    .community-feature {
      flex: 1;
      background: var(--neutral-200);
      border-radius: var(--radius-md);
      padding: 1rem;
      text-align: center;
      transition: all 0.3s var(--animation-bounce);
      text-decoration: none;
      color: var(--neutral-900);
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 0.5rem;
    }
    
    .community-feature:hover {
      background: var(--neutral-300);
      transform: translateY(-3px);
      box-shadow: var(--shadow-md);
    }
    
    .community-feature-icon {
      width: 48px;
      height: 48px;
      border-radius: var(--radius-full);
      background: var(--primary);
      color: white;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 1.25rem;
      margin-bottom: 0.5rem;
    }
    
    .community-feature-icon.chat {
      background: var(--info);
    }
    
    .community-feature-icon.reviews {
      background: var(--success);
    }
    
    .community-feature-title {
      font-weight: 600;
      font-size: 0.9rem;
    }
    
    .community-feature-description {
      font-size: 0.75rem;
      color: var(--neutral-600);
    }
    
    /* Tawk.to */
    .tawkto-container {
      position: fixed;
      z-index: 1000;
    }
    
    /* Animations */
    @keyframes fadeIn {
      from { opacity: 0; }
      to { opacity: 1; }
    }
    
    @keyframes scaleIn {
      from { transform: scale(0.9); opacity: 0; }
      to { transform: scale(1); opacity: 1; }
    }
    
    @keyframes fadeInUp {
      from { opacity: 0; transform: translateY(20px); }
      to { opacity: 1; transform: translateY(0); }
    }
    
    @keyframes checkmarkScale {
      from { transform: scale(0); }
      to { transform: scale(1); }
    }
    
    @keyframes spin {
      to { transform: rotate(360deg); }
    }
    
    @keyframes slideInRight {
      from { transform: translateX(100%); opacity: 0; }
      to { transform: translateX(0); opacity: 1; }
    }
    
    @keyframes fadeOut {
      from { opacity: 1; }
      to { opacity: 0; visibility: hidden; }
    }
    
    /* Responsive Styles */
    @media (min-width: 480px) {
      .header-user-info {
        display: block;
      }
      
      .quick-actions {
        grid-template-columns: repeat(4, 1fr);
      }
      
      .stats-grid {
        grid-template-columns: repeat(3, 1fr);
      }
      
      .amount-options {
        grid-template-columns: repeat(3, 1fr);
      }
    }
    
    @media (min-width: 768px) {
      .app-container {
        max-width: 100%;
      }
      
      .dashboard-content {
        padding: 1.5rem;
      }
      
      .header-brand-text {
        display: block;
      }
      
      .nav-desktop {
        display: flex;
        align-items: center;
        gap: 1.5rem;
      }
      
      .nav-desktop-item {
        padding: 0.5rem 0.75rem;
        border-radius: var(--radius-md);
        color: var(--neutral-700);
        font-weight: 500;
        font-size: 0.875rem;
        transition: var(--transition-base);
        cursor: pointer;
      }
      
      .nav-desktop-item.active {
        color: var(--primary);
        background: rgba(26, 31, 113, 0.05);
      }
      
      .nav-desktop-item:hover {
        color: var(--primary);
        transform: translateY(-2px);
      }
      
      .dashboard-grid {
        display: grid;
        grid-template-columns: 2fr 1fr;
        gap: 1.5rem;
        margin-bottom: 1.5rem;
      }
    }
    
    @media (min-width: 1024px) {
      .dashboard-content {
        padding: 2rem;
      }
      
      .bottom-nav {
        display: none;
      }
      
      .app-container {
        padding-bottom: 2rem;
      }
      
      .dashboard-content {
        display: grid;
        grid-template-columns: 3fr 1fr;
        gap: 1.5rem;
      }
      
      .dashboard-main {
        grid-column: 1;
      }
      
      .dashboard-side {
        grid-column: 2;
      }
      
      .card-actions {
        display: flex;
        justify-content: space-between;
        gap: 1rem;
        margin-top: 1.5rem;
      }
      
      .card-action {
        flex: 1;
        background: var(--neutral-100);
        border-radius: var(--radius-md);
        padding: 1rem;
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        gap: 0.5rem;
        box-shadow: var(--shadow-sm);
        transition: all 0.3s var(--animation-bounce);
        cursor: pointer;
      }
      
      .card-action:hover {
        transform: translateY(-5px);
        box-shadow: var(--shadow-md);
      }
      
      .card-action-icon {
        width: 40px;
        height: 40px;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        color: white;
        font-size: 1.25rem;
      }
      
      .card-action:hover .card-action-icon {
        transform: scale(1.1);
      }
      
      .card-action-icon.add {
        background: var(--success);
      }
      
      .card-action-icon.send {
        background: var(--primary);
      }
      
      .card-action-title {
        font-weight: 600;
        font-size: 0.85rem;
        color: var(--neutral-800);
        text-align: center;
      }
    }
  </style>
</head>

<body>
  <!-- Login Section -->
  <div class="login-container" id="login-container">
    <div class="login-card">
      <div class="login-logo">
        <div class="login-logo-container">
          <img src="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEhnBzNdjl6bNp-nIdaiHVENczJhwlJNA7ocsyiOObMmzbu8at0dY5yGcZ9cLxLF39qI6gwNfqBxlkTDC0txVULEwQVwGkeEzN0Jq9MRTRagA48mh18UqTlR4WhsXOLAEZugUyhqJHB19xJgnkpe-S5VOWFgzpKFwctv3XP9XhH41vNTvq0ZS-nik58Qhr-O/s320/remeex.png" alt="REMEEX">
        </div>
      </div>
      
      <div class="login-heading">
        <h1 class="login-title">Bienvenido</h1>
        <p class="login-subtitle">Ingrese sus datos para acceder a su cuenta</p>
      </div>
      
      <div class="security-badge">
        <div class="security-badge-icon">
          <i class="fas fa-shield-alt"></i>
        </div>
        <div class="security-badge-content">
          <div class="security-badge-title">Conexión segura</div>
          <div class="security-badge-text">Sus datos están protegidos con cifrado de nivel bancario</div>
        </div>
      </div>
      
      <div class="form-group">
        <label class="form-label" for="login-name">Nombre Completo</label>
        <input type="text" class="form-control" id="login-name" placeholder="Ej: Juan Pérez" aria-describedby="name-error">
        <div class="error-message" id="name-error">Por favor, introduce tu nombre y apellido (solo letras).</div>
      </div>
      
      <div class="form-group">
        <label class="form-label" for="login-email">Correo Electrónico</label>
        <input type="email" class="form-control" id="login-email" placeholder="ejemplo@correo.com" aria-describedby="email-error">
        <div class="error-message" id="email-error">Por favor, introduce un correo electrónico válido.</div>
      </div>
      
      <div class="form-group">
        <label class="form-label" for="login-code">Clave de 20 dígitos</label>
        <input type="password" class="form-control" id="login-code" placeholder="Enviada a tu correo electrónico" aria-describedby="code-error">
        <div class="error-message" id="code-error">La clave debe tener 20 dígitos.</div>
      </div>
      
      <button class="btn btn-primary" id="login-button">
        <i class="fas fa-sign-in-alt"></i> Iniciar Sesión
      </button>
      
      <div style="text-align: center; margin-top: 1.5rem;">
        <a href="https://wa.me/+17373018059" class="btn btn-outline" target="_blank" style="display: inline-flex; margin: 0 auto;">
          <i class="fab fa-whatsapp"></i> Contactar Soporte
        </a>
      </div>
    </div>
  </div>

  <!-- App Header (only visible after login) -->
  <header class="app-header" id="app-header" style="display: none;">
    <div class="header-brand">
      <img src="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEhnBzNdjl6bNp-nIdaiHVENczJhwlJNA7ocsyiOObMmzbu8at0dY5yGcZ9cLxLF39qI6gwNfqBxlkTDC0txVULEwQVwGkeEzN0Jq9MRTRagA48mh18UqTlR4WhsXOLAEZugUyhqJHB19xJgnkpe-S5VOWFgzpKFwctv3XP9XhH41vNTvq0ZS-nik58Qhr-O/s320/remeex.png" alt="REMEEX">
    </div>
    
    <div class="nav-desktop">
      <div class="nav-desktop-item active" data-section="home">Inicio</div>
      <div class="nav-desktop-item" data-section="history">Historial</div>
      <div class="nav-desktop-item" data-section="settings">Configuración</div>
    </div>
    
    <div class="header-actions">
      <div class="users-online-badge">
        <div class="pulse-dot"></div>
        <span id="users-online-count">124 usuarios conectados</span>
      </div>
      
      <button class="header-action-btn" id="notification-btn" aria-label="Notificaciones">
        <i class="fas fa-bell"></i>
        <span class="notification-badge">2</span>
      </button>
      
      <div class="header-user" id="user-menu-btn">
        <div class="header-avatar" id="header-avatar">JP</div>
        <div class="header-user-info">
          <div class="header-username" id="header-username">Usuario</div>
          <div class="header-date" id="header-date">Mayo 4, 2025</div>
        </div>
      </div>
    </div>
  </header>

  <!-- Dashboard Container -->
  <div class="app-container" id="dashboard-container" style="display: none;">
    <div class="dashboard-content">
      <!-- Home Section -->
      <div id="home-section">
        <!-- Main Account Card -->
        <div class="balance-card">
          <div class="card-decoration"></div>
          <div class="card-decoration"></div>
          <div class="balance-content">
            <div class="balance-label">
              <i class="fas fa-shield-alt"></i>
              <span id="balance-label-name">Saldo Disponible</span>
            </div>
            <div class="balance-amount" id="dashboard-balance">
              <img src="https://upload.wikimedia.org/wikipedia/commons/0/06/Flag_of_Venezuela.svg" class="currency-flag" id="main-currency-flag" alt="Bandera de Venezuela">
              <span id="main-currency-symbol">Bs</span>
              <span id="main-balance-value">0,00</span>
            </div>
            
            <div class="balance-equivalents">
              <div class="balance-equivalent">
                <img src="https://flagcdn.com/us.svg" class="currency-flag" alt="Bandera de EEUU">
                <span>≈ $0.00</span>
              </div>
              <div class="balance-equivalent">
                <img src="https://flagcdn.com/es.svg" class="currency-flag" alt="Bandera de España">
                <span>≈ €0.00</span>
              </div>
            </div>
            
            <div class="exchange-rate" id="exchange-rate">
              <i class="fas fa-exchange-alt"></i> Tasa: 1 USD = 109.19 Bs | 1 USD = 0.94 EUR
            </div>
            
            <div class="balance-date" id="balance-date">Domingo, 4 de Mayo de 2025</div>
            
            <!-- Pending Transaction Badge (hidden by default) -->
            <div class="pending-transaction-badge" id="pending-transaction-badge" style="display: none;">
              <i class="fas fa-clock"></i>
              <div>
                <div style="font-weight: 600; margin-bottom: 0.125rem;">Transacción pendiente</div>
                <div id="pending-transaction-amount">$0.00 en proceso de verificación</div>
              </div>
            </div>
            
            <div class="balance-actions">
              <button class="balance-btn" id="recharge-btn">
                <i class="fas fa-plus-circle"></i> Recargar Saldo
              </button>
              <button class="balance-btn" id="send-btn">
                <i class="fas fa-paper-plane"></i> Enviar Fondos
              </button>
            </div>
          </div>
        </div>
        
        <!-- Community Features -->
        <div class="community-features">
          <a href="chatreremeex.html" class="community-feature">
            <div class="community-feature-icon chat">
              <i class="fas fa-comments"></i>
            </div>
            <div class="community-feature-title">Chat con Usuarios</div>
            <div class="community-feature-description">Conéctate con la comunidad</div>
          </a>
          
          <a href="opinionesremeex.html" class="community-feature">
            <div class="community-feature-icon reviews">
              <i class="fas fa-star"></i>
            </div>
            <div class="community-feature-title">Opiniones</div>
            <div class="community-feature-description">Experiencias de usuarios</div>
          </a>
        </div>
        
        <!-- Quick Actions -->
        <div class="section-title">
          <i class="fas fa-bolt"></i> Acciones Rápidas
        </div>
        
        <div class="quick-actions">
          <div class="action-item" id="quick-recharge">
            <div class="action-icon">
              <i class="fas fa-credit-card"></i>
            </div>
            <div class="action-label">Recargar</div>
            <div class="action-description">Añadir fondos</div>
          </div>
          
          <div class="action-item" id="quick-send">
            <div class="action-icon send">
              <i class="fas fa-paper-plane"></i>
            </div>
            <div class="action-label">Transferir</div>
            <div class="action-description">Enviar dinero</div>
          </div>
          
          <div class="action-item" id="quick-services">
            <div class="action-icon services">
              <i class="fas fa-file-invoice-dollar"></i>
            </div>
            <div class="action-label">Servicios</div>
            <div class="action-description">Pagar facturas</div>
          </div>
          
          <div class="action-item" id="quick-account">
            <div class="action-icon account">
              <i class="fas fa-university"></i>
            </div>
            <div class="action-label">Visa/Zelle</div>
            <div class="action-description">Abrir cuenta</div>
          </div>
        </div>
        
        <!-- Verification Banner (if not verified) -->
        <div class="verify-banner" id="dashboard-verify-banner" style="display: none;">
          <div class="verify-icon">
            <i class="fas fa-id-card"></i>
          </div>
          <div class="verify-content">
            <div class="verify-title">Verificación de Identidad Requerida</div>
            <div class="verify-text">Para una mayor seguridad y acceso completo a todas las funciones, verifique su identidad.</div>
          </div>
          <button class="verify-action" id="dashboard-verify-action">Verificar</button>
        </div>
        
        <!-- Stats Section -->
        <div class="section-title">
          <i class="fas fa-chart-line"></i> Resumen de Cuenta
        </div>
        
        <div class="stats-grid">
          <div class="stat-card">
            <div class="stat-icon"><i class="fas fa-exchange-alt"></i></div>
            <div class="stat-label">
              <i class="fas fa-exchange-alt" style="color: var(--primary);"></i>
              Transacciones
            </div>
            <div class="stat-value" id="stat-transactions">0</div>
            <div class="stat-change positive">
              <i class="fas fa-arrow-up"></i> Nuevo usuario
            </div>
          </div>
          
          <div class="stat-card">
            <div class="stat-icon"><i class="fas fa-dollar-sign"></i></div>
            <div class="stat-label">
              <i class="fas fa-dollar-sign" style="color: var(--primary);"></i>
              Dólares (USD)
            </div>
            <div class="stat-value" id="stat-usd">$0.00</div>
            <div class="stat-change positive">
              <i class="fas fa-arrow-up"></i> 0%
            </div>
          </div>
          
          <div class="stat-card">
            <div class="stat-icon"><i class="fas fa-euro-sign"></i></div>
            <div class="stat-label">
              <i class="fas fa-euro-sign" style="color: var(--primary);"></i>
              Euros (EUR)
            </div>
            <div class="stat-value" id="stat-eur">€0.00</div>
            <div class="stat-change positive">
              <i class="fas fa-arrow-up"></i> 0%
            </div>
          </div>
        </div>
        
        <!-- Recent Transactions -->
        <div class="card">
          <div class="section-title" style="margin-bottom: 0.5rem;">
            <i class="fas fa-history"></i> Transacciones Recientes
            <a href="#" id="view-all-transactions">Ver todas</a>
          </div>
          
          <div class="transaction-list" id="recent-transactions">
            <!-- Will be populated by JavaScript -->
          </div>
        </div>
        
        <!-- Services Section -->
        <div class="card">
          <div class="section-title" style="margin-bottom: 1rem;">
            <i class="fas fa-star"></i> Servicios Destacados
          </div>
          
          <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 1rem;">
            <div class="action-item" id="service-bills">
              <div class="action-icon services">
                <i class="fas fa-file-invoice"></i>
              </div>
              <div class="action-label">Pago de Servicios</div>
              <div class="action-description">Luz, agua, teléfono</div>
            </div>
            
            <div class="action-item" id="service-currency">
              <div class="action-icon">
                <i class="fas fa-exchange-alt"></i>
              </div>
              <div class="action-label">Cambio de Divisas</div>
              <div class="action-description">Mejores tasas</div>
            </div>
            
            <div class="action-item" id="service-visa">
              <div class="action-icon account">
                <i class="fab fa-cc-visa"></i>
              </div>
              <div class="action-label">Cuenta Visa</div>
              <div class="action-description">Apertura inmediata</div>
            </div>
            
            <div class="action-item" id="service-zelle">
              <div class="action-icon info">
            <i class="fas fa-university"></i>
          </div>
          <div class="action-label">Cuenta Zelle</div>
          <div class="action-description">Pagos internacionales</div>
        </div>
      </div>
    </div>
    
    <!-- Contact Section -->
    <div class="card">
      <div class="section-title" style="margin-bottom: 1rem;">
        <i class="fas fa-headset"></i> Soporte y Ayuda
      </div>
      
      <div class="contact-options">
        <a href="https://wa.me/+17373018059" class="contact-option" target="_blank">
          <div class="contact-icon whatsapp">
            <i class="fab fa-whatsapp"></i>
          </div>
          <div class="contact-content">
            <div class="contact-title">WhatsApp</div>
            <div class="contact-description">Atención 24/7 vía chat</div>
          </div>
        </a>
        
        <a href="mailto:soporte@remeex.com" class="contact-option">
          <div class="contact-icon email">
            <i class="fas fa-envelope"></i>
          </div>
          <div class="contact-content">
            <div class="contact-title">Correo Electrónico</div>
            <div class="contact-description">soporte@remeex.com</div>
          </div>
        </a>
      </div>
    </div>
  </div>
  
  <!-- History Section -->
  <div id="history-section" style="display: none;">
    <div class="section-title">
      <i class="fas fa-history"></i> Historial de Transacciones
    </div>
    
    <div class="card">
      <div class="transaction-list" id="all-transactions">
        <!-- Will be populated by JavaScript -->
      </div>
    </div>
  </div>
  
  <!-- Settings Section -->
  <div id="settings-section" style="display: none;">
    <div class="section-title">
      <i class="fas fa-user"></i> Información de Cuenta
    </div>
    
    <div class="card">
      <div class="form-group">
        <label class="form-label" for="settings-name">Nombre Completo</label>
        <input type="text" class="form-control" id="settings-name" disabled>
      </div>
      
      <div class="form-group">
        <label class="form-label" for="settings-email">Correo Electrónico</label>
        <input type="email" class="form-control" id="settings-email" disabled>
      </div>
      
      <button class="btn btn-primary">
        <i class="fas fa-lock"></i> Cambiar Contraseña
      </button>
    </div>
    
    <div class="section-title" style="margin-top: 1.5rem;">
      <i class="fas fa-bell"></i> Notificaciones
    </div>
    
    <div class="card">
      <div style="display: flex; flex-direction: column; gap: 1rem;">
        <div style="display: flex; align-items: center; justify-content: space-between;">
          <div>Notificaciones por correo</div>
          <label class="switch">
            <input type="checkbox" checked>
            <span class="slider round"></span>
          </label>
        </div>
        
        <div style="display: flex; align-items: center; justify-content: space-between;">
          <div>Notificaciones por SMS</div>
          <label class="switch">
            <input type="checkbox" checked>
            <span class="slider round"></span>
          </label>
        </div>
        
        <div style="display: flex; align-items: center; justify-content: space-between;">
          <div>Alertas de seguridad</div>
          <label class="switch">
            <input type="checkbox" checked>
            <span class="slider round"></span>
          </label>
        </div>
      </div>
    </div>
    
    <div class="section-title" style="margin-top: 1.5rem;">
      <i class="fas fa-shield-alt"></i> Seguridad
    </div>
    
    <div class="card">
      <div style="display: flex; flex-direction: column; gap: 1rem;">
        <div style="display: flex; align-items: center; justify-content: space-between;">
          <div>Autenticación de dos factores</div>
          <label class="switch">
            <input type="checkbox">
            <span class="slider round"></span>
          </label>
        </div>
        
        <div style="display: flex; align-items: center; justify-content: space-between;">
          <div>Notificaciones de inicio de sesión</div>
          <label class="switch">
            <input type="checkbox" checked>
            <span class="slider round"></span>
          </label>
        </div>
      </div>
      
      <div style="display: flex; gap: 1rem; margin-top: 1.5rem;">
        <a href="verificacion.html" class="btn btn-primary" style="flex: 1;">
          <i class="fas fa-id-card"></i> Verificar mi Identidad
        </a>
        <button class="btn btn-primary" id="verify-identity-btn" style="flex: 1;">
          <i class="fas fa-user-shield"></i> Verificar Ahora
        </button>
      </div>
    </div>
    
    <div class="section-title" style="margin-top: 1.5rem;">
      <i class="fas fa-headset"></i> Soporte
    </div>
    
    <div class="card">
      <div class="contact-options">
        <a href="https://wa.me/+17373018059" class="contact-option" target="_blank">
          <div class="contact-icon whatsapp">
            <i class="fab fa-whatsapp"></i>
          </div>
          <div class="contact-content">
            <div class="contact-title">WhatsApp</div>
            <div class="contact-description">Atención 24/7 vía chat</div>
          </div>
        </a>
        
        <a href="mailto:soporte@remeex.com" class="contact-option">
          <div class="contact-icon email">
            <i class="fas fa-envelope"></i>
          </div>
          <div class="contact-content">
            <div class="contact-title">Correo Electrónico</div>
            <div class="contact-description">soporte@remeex.com</div>
          </div>
        </a>
      </div>
      
      <button class="btn btn-primary" style="width: 100%; margin-top: 1.5rem;" id="logout-btn">
        <i class="fas fa-sign-out-alt"></i> Cerrar Sesión</button>
    </div>
  </div>
</div>

<!-- Bottom Navigation -->
<nav class="bottom-nav">
  <div class="nav-item active" data-section="home">
    <div class="nav-icon"><i class="fas fa-home"></i></div>
    <div class="nav-label">Inicio</div>
  </div>
  
  <div class="nav-item" data-section="history">
    <div class="nav-icon"><i class="fas fa-history"></i></div>
    <div class="nav-label">Historial</div>
  </div>
  
  <div class="nav-item" id="nav-recharge">
    <div class="nav-icon"><i class="fas fa-plus-circle"></i></div>
    <div class="nav-label">Recargar</div>
  </div>
  
  <div class="nav-item" data-section="settings">
    <div class="nav-icon"><i class="fas fa-cog"></i></div>
    <div class="nav-label">Ajustes</div>
  </div>
</nav></div>
  <!-- Recharge Container -->
  <div class="recharge-container" id="recharge-container">
    <div class="section-title" style="margin-bottom: 1.5rem; display: flex; align-items: center;">
      <i class="fas fa-arrow-left" id="recharge-back" style="cursor: pointer; margin-right: 1rem;"></i>
      <span>Recargar Saldo</span>
    </div><div class="security-badge" style="margin-bottom: 1.5rem;">
  <div class="security-badge-icon">
    <i class="fas fa-lock"></i>
  </div>
  <div class="security-badge-content">
    <div class="security-badge-title">Transacción Segura</div>
    <div class="security-badge-text">Todos los pagos están protegidos con cifrado SSL</div>
  </div>
</div>

<div class="payment-method-tabs">
  <div class="payment-method-tab active" data-target="card-payment">Tarjeta de Crédito</div>
  <div class="payment-method-tab" data-target="bank-payment">Transferencia Bancaria</div>
  <div class="payment-method-tab" data-target="mobile-payment">Pago Móvil</div>
</div>

<!-- Credit Card Payment Method -->
<div class="payment-method-content active" id="card-payment">
  <div class="card">
    <div style="margin-bottom: 1.5rem; text-align: center;">
      <div style="font-size: 0.875rem; color: var(--neutral-600); margin-bottom: 0.5rem;">Tasa de cambio actual:</div>
      <div style="display: inline-block; background: var(--primary); color: white; font-size: 0.85rem; font-weight: 600; padding: 0.5rem 1rem; border-radius: var(--radius-md);">
        1 USD = 109.19 Bs | 1 USD = 0.94 EUR
      </div>
    </div>
    
    <div class="section-title" style="margin-bottom: 0.5rem;">
      <i class="fas fa-th-large"></i> Montos Predefinidos
    </div>
    
    <div class="amount-options">
      <div class="amount-option" data-amount="500" data-bs="54595" data-eur="470">
        <div class="amount-value">$500</div>
        <div class="amount-equivalent">Bs 54,595.00<br>€470.00</div>
      </div>
      
      <div class="amount-option" data-amount="1000" data-bs="109190" data-eur="940">
        <div class="amount-value">$1000</div>
        <div class="amount-equivalent">Bs 109,190.00<br>€940.00</div>
      </div>
      
      <div class="amount-option" data-amount="3000" data-bs="327570" data-eur="2820">
        <div class="amount-value">$3000</div>
        <div class="amount-equivalent">Bs 327,570.00<br>€2,820.00</div>
      </div>
      
      <div class="amount-option" data-amount="5000" data-bs="545950" data-eur="4700">
        <div class="amount-value">$5000</div>
        <div class="amount-equivalent">Bs 545,950.00<br>€4,700.00</div>
      </div>
    </div>
    
    <div class="custom-amount">
      <div class="custom-amount-title">
        <i class="fas fa-edit"></i> O Ingrese un Monto Personalizado
      </div>
      
      <div class="custom-amount-container">
        <span class="custom-amount-prefix">$</span>
        <input type="number" class="form-control custom-amount-input" id="custom-amount" placeholder="0" min="500" max="8000" aria-label="Monto personalizado">
      </div>
      <div class="amount-limits">Monto mínimo: $500 - Monto máximo: $8000</div>
      
      <div id="custom-amount-preview" style="margin-top: 1rem; font-size: 0.9rem; color: var(--neutral-600); display: none;">
        <div style="margin-bottom: 0.5rem; font-weight: 500;">Equivalente a:</div>
        <div style="display: flex; gap: 1rem; flex-wrap: wrap;">
          <div>
            <img src="https://upload.wikimedia.org/wikipedia/commons/0/06/Flag_of_Venezuela.svg" style="width: 16px; height: 10px; margin-right: 0.25rem; vertical-align: middle;" alt="Bandera de Venezuela">
            <span id="custom-amount-bs">Bs 0.00</span>
          </div>
          <div>
            <img src="https://flagcdn.com/es.svg" style="width: 16px; height: 10px; margin-right: 0.25rem; vertical-align: middle;" alt="Bandera de España">
            <span id="custom-amount-eur">€0.00</span>
          </div>
        </div>
      </div>
    </div>
  </div>
  
  <div class="card" style="margin-top: 1.5rem;">
    <div class="section-title" style="margin-bottom: 1rem;">
      <i class="fas fa-credit-card"></i> Detalles de la Tarjeta
    </div>
    
    <div class="card-preview" id="card-preview">
      <div class="card-inner">
        <div class="card-front">
          <div class="card-logo">
            <img src="https://raw.githubusercontent.com/muhammederdem/credit-card-form/master/src/assets/images/chip.png" class="card-chip" alt="Chip de tarjeta">
            <img id="card-brand-logo" src="https://raw.githubusercontent.com/muhammederdem/credit-card-form/master/src/assets/images/visa.png" class="card-brand" alt="Logo de Visa">
          </div>
          
          <div class="card-number" id="card-number-display">•••• •••• •••• ••••</div>
          
          <div class="card-details">
            <div class="card-holder">
              <div style="opacity: 0.7; font-size: 0.75rem; margin-bottom: 4px;">Titular</div>
              <div id="card-holder-display">••••••• •••••••</div>
            </div>
            
            <div class="card-expiry">
              <div style="text-align: right;">
                <div style="opacity: 0.7; font-size: 0.75rem; margin-bottom: 4px;">Expira</div>
                <div><span id="card-month-display">••</span>/<span id="card-year-display">••</span></div>
              </div>
            </div>
          </div>
        </div>
        
        <div class="card-back">
          <div class="card-stripe"></div>
          <div style="padding: 0 1.25rem;">
            <div style="font-size: 0.75rem; margin-bottom: 0.5rem;">CVV</div>
            <div class="card-cvv" id="card-cvv-display">•••</div>
          </div>
        </div>
      </div>
    </div>
    
    <div class="card-form">
      <div class="form-group">
        <label class="form-label" for="cardName">Titular de la Tarjeta</label>
        <input type="text" class="form-control" id="cardName" placeholder="Nombre como aparece en la tarjeta" aria-describedby="card-name-error">
        <div class="error-message" id="card-name-error">Por favor, introduce el nombre del titular.</div>
      </div>
      
      <div class="form-group">
        <label class="form-label" for="cardNumber">Número de Tarjeta</label>
        <input type="text" class="form-control" id="cardNumber" placeholder="1234 5678 9012 3456" maxlength="19" aria-describedby="card-number-error">
        <div class="error-message" id="card-number-error">Número de tarjeta no válido.</div>
      </div>
      
      <div class="card-row">
        <div class="card-col">
          <label class="form-label">Fecha de Expiración</label>
          <div style="display: flex; gap: 0.5rem;">
            <select class="form-control" id="cardMonth" aria-describedby="card-date-error">
              <option value="" disabled selected>Mes</option>
              <option value="01">01</option>
              <option value="02">02</option>
              <option value="03">03</option>
              <option value="04">04</option>
              <option value="05">05</option>
              <option value="06">06</option>
              <option value="07">07</option>
              <option value="08">08</option>
              <option value="09">09</option>
              <option value="10">10</option>
              <option value="11">11</option>
              <option value="12">12</option>
            </select>
            
            <select class="form-control" id="cardYear" aria-describedby="card-date-error">
              <option value="" disabled selected>Año</option>
              <option value="2025">2025</option>
              <option value="2026">2026</option>
              <option value="2027">2027</option>
              <option value="2028">2028</option>
              <option value="2029">2029</option>
              <option value="2030">2030</option>
            </select>
          </div>
          <div class="error-message" id="card-date-error">Por favor, selecciona una fecha válida.</div>
        </div>
        
        <div class="card-col" style="max-width: 120px;">
          <label class="form-label" for="cardCvv">CVV</label>
          <input type="password" class="form-control" id="cardCvv" placeholder="•••" maxlength="3" aria-describedby="card-cvv-error">
          <div class="error-message" id="card-cvv-error">CVV inválido.</div>
        </div>
      </div>
      
      <button class="btn btn-primary" id="submit-payment" style="margin-top: 1.5rem;">
        <i class="fas fa-credit-card"></i> Pagar $500
      </button>
    </div>
  </div>
</div>

<!-- Bank Transfer Payment Method -->
<div class="payment-method-content" id="bank-payment">
  <div class="card">
    <div style="margin-bottom: 1.5rem; text-align: center;">
      <div style="font-size: 0.875rem; color: var(--neutral-600); margin-bottom: 0.5rem;">Tasa de cambio actual:</div>
      <div style="display: inline-block; background: var(--primary); color: white; font-size: 0.85rem; font-weight: 600; padding: 0.5rem 1rem; border-radius: var(--radius-md);">
        1 USD = 109.19 Bs | 1 USD = 0.94 EUR
      </div>
    </div>
    
    <div class="section-title" style="margin-bottom: 0.5rem;">
      <i class="fas fa-th-large"></i> Montos Predefinidos
    </div>
    
    <div class="amount-options">
      <div class="amount-option bank-amount" data-amount="25" data-bs="2730" data-eur="23.5">
        <div class="amount-value">$25</div>
        <div class="amount-equivalent">Bs 2,730.00<br>€23.50</div>
      </div>
      
      <div class="amount-option bank-amount" data-amount="100" data-bs="10919" data-eur="94">
        <div class="amount-value">$100</div>
        <div class="amount-equivalent">Bs 10,919.00<br>€94.00</div>
      </div>
      
      <div class="amount-option bank-amount" data-amount="200" data-bs="21838" data-eur="188">
        <div class="amount-value">$200</div>
        <div class="amount-equivalent">Bs 21,838.00<br>€188.00</div>
      </div>
      
      <div class="amount-option bank-amount" data-amount="300" data-bs="32757" data-eur="282">
        <div class="amount-value">$300</div>
        <div class="amount-equivalent">Bs 32,757.00<br>€282.00</div>
      </div>
      
      <div class="amount-option bank-amount" data-amount="400" data-bs="43676" data-eur="376">
        <div class="amount-value">$400</div>
        <div class="amount-equivalent">Bs 43,676.00<br>€376.00</div>
      </div>
      
      <div class="amount-option bank-amount" data-amount="500" data-bs="54595" data-eur="470">
        <div class="amount-value">$500</div>
        <div class="amount-equivalent">Bs 54,595.00<br>€470.00</div>
      </div>
    </div>
    
    <div class="custom-amount">
      <div class="custom-amount-title">
        <i class="fas fa-edit"></i> O Ingrese un Monto Personalizado
      </div>
      
      <div class="custom-amount-container">
        <span class="custom-amount-prefix">$</span>
        <input type="number" class="form-control custom-amount-input" id="custom-amount-bank" placeholder="0" min="25" max="500" aria-label="Monto personalizado para transferencia">
      </div>
      <div class="amount-limits">Monto mínimo: $25 - Monto máximo: $500</div>
      
      <div id="custom-amount-bank-preview" style="margin-top: 1rem; font-size: 0.9rem; color: var(--neutral-600); display: none;">
        <div style="margin-bottom: 0.5rem; font-weight: 500;">Equivalente a:</div>
        <div style="display: flex; gap: 1rem; flex-wrap: wrap;">
          <div>
            <img src="https://upload.wikimedia.org/wikipedia/commons/0/06/Flag_of_Venezuela.svg" style="width: 16px; height: 10px; margin-right: 0.25rem; vertical-align: middle;" alt="Bandera de Venezuela">
            <span id="custom-amount-bank-bs">Bs 0.00</span>
          </div>
          <div>
            <img src="https://flagcdn.com/es.svg" style="width: 16px; height: 10px; margin-right: 0.25rem; vertical-align: middle;" alt="Bandera de España">
            <span id="custom-amount-bank-eur">€0.00</span>
          </div>
        </div>
      </div>
    </div>
    
    <div class="section-title" style="margin-top: 2rem; margin-bottom: 1rem;">
      <i class="fas fa-university"></i> Datos Bancarios
    </div>
    
    <div class="bank-details">
      <div class="bank-detail-row">
        <div class="bank-detail-label">Banco:</div>
        <div class="bank-detail-value">
          Banco Venezolano de Crédito
          <div class="copy-btn" data-copy="Banco Venezolano de Crédito"><i class="far fa-copy"></i></div>
        </div>
      </div>
      
      <div class="bank-detail-row">
        <div class="bank-detail-label">Titular:</div>
        <div class="bank-detail-value">
          Global VISA Venezuela
          <div class="copy-btn" data-copy="Global VISA Venezuela"><i class="far fa-copy"></i></div>
        </div>
      </div>
      
      <div class="bank-detail-row">
        <div class="bank-detail-label">RIF:</div>
        <div class="bank-detail-value">
          J407502646
          <div class="copy-btn" data-copy="J407502646"><i class="far fa-copy"></i></div>
        </div>
      </div>
      
      <div class="bank-detail-row">
        <div class="bank-detail-label">Cuenta Corriente:</div>
        <div class="bank-detail-value">
          0104-0019-86-0190162931
          <div class="copy-btn" data-copy="0104-0019-86-0190162931"><i class="far fa-copy"></i></div>
        </div>
      </div>
    </div>
    
    <div class="bank-warning">
      <div class="bank-warning-title">
        <i class="fas fa-exclamation-triangle"></i> Importante
      </div>
      <div class="bank-warning-content">
        Asegúrese de realizar la transferencia <strong>únicamente</strong> al Banco Venezolano de Crédito. No confundir con Banco Nacional de Crédito ni Banco de Venezuela. Una vez realizada la transferencia, complete el formulario a continuación.
      </div>
    </div>
    
    <div class="section-title" style="margin-top: 2rem; margin-bottom: 1rem;">
      <i class="fas fa-upload"></i> Comprobante de Pago
    </div>
    
    <div class="receipt-upload" id="receipt-upload">
      <i class="fas fa-cloud-upload-alt"></i>
      <div class="receipt-upload-title">Subir Comprobante</div>
      <div class="receipt-upload-subtitle">Haga clic aquí para cargar su comprobante de pago<br>Formatos aceptados: JPG, PNG, PDF (máx. 5MB)</div>
      <input type="file" id="receipt-file" accept="image/jpeg,image/png,application/pdf" style="display: none;">
    </div>
    
    <div class="receipt-preview" id="receipt-preview">
      <div class="receipt-preview-container">
        <div class="receipt-preview-icon">
          <i class="fas fa-file-alt"></i>
        </div>
        <div class="receipt-preview-content">
          <div class="receipt-preview-name" id="receipt-filename">comprobante.jpg</div>
          <div class="receipt-preview-size" id="receipt-filesize">120 KB</div>
        </div>
        <div class="receipt-preview-actions">
          <div class="copy-btn" id="receipt-remove"><i class="fas fa-trash"></i></div>
        </div>
      </div>
    </div>
    
    <div class="form-group reference-number">
      <label class="form-label" for="reference-number">Número de Referencia</label>
      <input type="text" class="form-control" id="reference-number" placeholder="Ingrese el número de referencia de la transferencia" aria-describedby="reference-error">
      <div class="error-message" id="reference-error">Por favor, ingrese un número de referencia válido.</div>
    </div>
    
    <button class="btn btn-primary" id="submit-bank-transfer" style="margin-top: 1.5rem;">
      <i class="fas fa-paper-plane"></i> Enviar Comprobante
    </button>
  </div>
</div>

<!-- Mobile Payment Method -->
<div class="payment-method-content" id="mobile-payment">
  <div class="card">
    <div style="margin-bottom: 1.5rem; text-align: center;">
      <div style="font-size: 0.875rem; color: var(--neutral-600); margin-bottom: 0.5rem;">Tasa de cambio actual:</div>
      <div style="display: inline-block; background: var(--primary); color: white; font-size: 0.85rem; font-weight: 600; padding: 0.5rem 1rem; border-radius: var(--radius-md);">
        1 USD = 109.19 Bs | 1 USD = 0.94 EUR
      </div>
    </div>
    
    <div class="section-title" style="margin-bottom: 0.5rem;">
      <i class="fas fa-th-large"></i> Montos Predefinidos
    </div>
    
    <div class="amount-options">
      <div class="amount-option mobile-amount" data-amount="25" data-bs="2730" data-eur="23.5">
        <div class="amount-value">$25</div>
        <div class="amount-equivalent">Bs 2,730.00<br>€23.50</div>
      </div>
      
      <div class="amount-option mobile-amount" data-amount="100" data-bs="10919" data-eur="94">
        <div class="amount-value">$100</div>
        <div class="amount-equivalent">Bs 10,919.00<br>€94.00</div>
      </div>
      
      <div class="amount-option mobile-amount" data-amount="200" data-bs="21838" data-eur="188">
        <div class="amount-value">$200</div>
        <div class="amount-equivalent">Bs 21,838.00<br>€188.00</div>
      </div>
      
      <div class="amount-option mobile-amount" data-amount="300" data-bs="32757" data-eur="282">
        <div class="amount-value">$300</div>
        <div class="amount-equivalent">Bs 32,757.00<br>€282.00</div>
      </div>
      
      <div class="amount-option mobile-amount" data-amount="400" data-bs="43676" data-eur="376">
        <div class="amount-value">$400</div>
        <div class="amount-equivalent">Bs 43,676.00<br>€376.00</div>
      </div>
      
      <div class="amount-option mobile-amount" data-amount="500" data-bs="54595" data-eur="470">
        <div class="amount-value">$500</div>
        <div class="amount-equivalent">Bs 54,595.00<br>€470.00</div>
      </div>
    </div>
    
    <div class="custom-amount">
      <div class="custom-amount-title">
        <i class="fas fa-edit"></i> O Ingrese un Monto Personalizado
      </div>
      
      <div class="custom-amount-container">
        <span class="custom-amount-prefix">$</span>
        <input type="number" class="form-control custom-amount-input" id="custom-amount-mobile" placeholder="0" min="25" max="500" aria-label="Monto personalizado para pago móvil">
      </div>
      <div class="amount-limits">Monto mínimo: $25 - Monto máximo: $500</div>
      
      <div id="custom-amount-mobile-preview" style="margin-top: 1rem; font-size: 0.9rem; color: var(--neutral-600); display: none;">
        <div style="margin-bottom: 0.5rem; font-weight: 500;">Equivalente a:</div>
        <div style="display: flex; gap: 1rem; flex-wrap: wrap;">
          <div>
            <img src="https://upload.wikimedia.org/wikipedia/commons/0/06/Flag_of_Venezuela.svg" style="width: 16px; height: 10px; margin-right: 0.25rem; vertical-align: middle;" alt="Bandera de Venezuela">
            <span id="custom-amount-mobile-bs">Bs 0.00</span>
          </div>
          <div>
            <img src="https://flagcdn.com/es.svg" style="width: 16px; height: 10px; margin-right: 0.25rem; vertical-align: middle;" alt="Bandera de España">
            <span id="custom-amount-mobile-eur">€0.00</span>
          </div>
        </div>
      </div>
    </div>
    
    <div class="section-title" style="margin-top: 2rem; margin-bottom: 1rem;">
      <i class="fas fa-mobile-alt"></i> Datos de Pago Móvil
    </div>
    
    <div class="bank-details">
      <div class="bank-detail-row">
        <div class="bank-detail-label">Banco:</div>
        <div class="bank-detail-value">
          Banco Venezolano de Crédito (0104)
          <div class="copy-btn" data-copy="Banco Venezolano de Crédito (0104)"><i class="far fa-copy"></i></div>
        </div>
      </div>
      
      <div class="bank-detail-row">
        <div class="bank-detail-label">RIF:</div>
        <div class="bank-detail-value">
          J407502646
          <div class="copy-btn" data-copy="J407502646"><i class="far fa-copy"></i></div>
        </div>
      </div>
      
      <div class="bank-detail-row">
        <div class="bank-detail-label">Teléfono:</div>
        <div class="bank-detail-value">
          0412 100 00 00
          <div class="copy-btn" data-copy="0412 100 00 00"><i class="far fa-copy"></i></div>
        </div>
      </div>
    </div>
    
    <div class="bank-warning">
      <div class="bank-warning-title">
        <i class="fas fa-exclamation-triangle"></i> Importante
      </div>
      <div class="bank-warning-content">
        Asegúrese de realizar el pago móvil a través del <strong>Banco Venezolano de Crédito (0104)</strong> y no a otro banco. Una vez realizado el pago, complete el formulario a continuación.
      </div>
    </div>
    
    <div class="section-title" style="margin-top: 2rem; margin-bottom: 1rem;">
      <i class="fas fa-upload"></i> Comprobante de Pago
    </div>
    
    <div class="receipt-upload" id="mobile-receipt-upload">
      <i class="fas fa-cloud-upload-alt"></i>
      <div class="receipt-upload-title">Subir Comprobante</div>
      <div class="receipt-upload-subtitle">Haga clic aquí para cargar una captura de su pago móvil<br>Formatos aceptados: JPG, PNG, PDF (máx. 5MB)</div>
      <input type="file" id="mobile-receipt-file" accept="image/jpeg,image/png,application/pdf" style="display: none;">
    </div>
    
    <div class="receipt-preview" id="mobile-receipt-preview">
      <div class="receipt-preview-container">
        <div class="receipt-preview-icon">
          <i class="fas fa-file-alt"></i>
        </div>
        <div class="receipt-preview-content">
          <div class="receipt-preview-name" id="mobile-receipt-filename">comprobante.jpg</div>
          <div class="receipt-preview-size" id="mobile-receipt-filesize">120 KB</div>
        </div>
        <div class="receipt-preview-actions">
          <div class="copy-btn" id="mobile-receipt-remove"><i class="fas fa-trash"></i></div>
        </div>
      </div>
    </div>
    
    <div class="form-group reference-number">
      <label class="form-label" for="mobile-reference-number">Número de Referencia</label>
      <input type="text" class="form-control" id="mobile-reference-number" placeholder="Ingrese el número de referencia del pago móvil" aria-describedby="mobile-reference-error">
      <div class="error-message" id="mobile-reference-error">Por favor, ingrese un número de referencia válido.</div>
    </div>
    
    <button class="btn btn-primary" id="submit-mobile-payment" style="margin-top: 1.5rem;">
      <i class="fas fa-paper-plane"></i> Enviar Comprobante
    </button>
  </div>
</div></div>
  <!-- Payment OTP Verification Modal -->
  <div class="modal-overlay" id="otp-modal-overlay">
    <div class="modal">
      <div class="modal-title">Verificación de Seguridad</div>
      <div class="modal-subtitle">Enviamos un código a tu teléfono asociado a tu tarjeta <span id="masked-phone">+44 75** ****13</span></div><div class="otp-container">
    <input type="text" class="otp-input" id="otp-1" maxlength="1" data-next="otp-2" aria-label="OTP dígito 1">
    <input type="text" class="otp-input" id="otp-2" maxlength="1" data-next="otp-3" data-prev="otp-1" aria-label="OTP dígito 2">
    <input type="text" class="otp-input" id="otp-3" maxlength="1" data-next="otp-4" data-prev="otp-2" aria-label="OTP dígito 3">
    <input type="text" class="otp-input" id="otp-4" maxlength="1" data-next="otp-5" data-prev="otp-3" aria-label="OTP dígito 4">
    <input type="text" class="otp-input" id="otp-5" maxlength="1" data-next="otp-6" data-prev="otp-4" aria-label="OTP dígito 5">
    <input type="text" class="otp-input" id="otp-6" maxlength="1" data-prev="otp-5" aria-label="OTP dígito 6">
  </div>
  
  <div class="error-message" id="otp-error" style="text-align: center; display: none;">Código incorrecto. Intente nuevamente.</div>
  
  <button class="btn btn-primary" id="verify-otp-btn">
    <i class="fas fa-shield-alt"></i> Verificar y Pagar
  </button>
  
  <div class="resend-code">
    ¿No recibió el código? <a href="#" id="resend-code">Reenviar</a>
  </div>
</div></div>
  <!-- Feature Blocked Modal -->
  <div class="feature-blocked-modal" id="feature-blocked-modal">
    <div class="feature-blocked-card">
      <div class="feature-blocked-icon">
        <i class="fas fa-lock"></i>
      </div>
      <div class="feature-blocked-title">Verificación Requerida</div>
      <div class="feature-blocked-message">
        Esta función requiere verificación de identidad para su activación. Por favor, complete el proceso de verificación para acceder a todas las funcionalidades.
      </div>
      <div class="feature-blocked-actions">
        <button class="btn btn-primary" id="go-verify-now">
          <i class="fas fa-id-card"></i> Verificar Ahora
        </button>
        <button class="btn btn-outline" id="feature-blocked-close">
          <i class="fas fa-times"></i> Cerrar
        </button>
      </div>
    </div>
  </div>
  <!-- Identity Verification Modal -->
  <div class="modal-overlay" id="verification-modal">
    <div class="modal" style="max-width: 480px;">
      <div class="modal-title">Verificación de Identidad</div>
      <div class="modal-subtitle">Para garantizar la seguridad de su cuenta y permitir transacciones de mayor monto, necesitamos verificar su identidad.</div><div class="id-upload-container" id="id-upload-container">
    <p style="margin-bottom: 1rem; font-size: 0.9rem; color: var(--neutral-600);">Por favor suba una foto de su documento de identidad (ambos lados):</p>
    
    <div class="id-upload-sides">
      <div class="id-upload-side" id="id-front-upload">
        <i class="fas fa-id-card"></i>
        <div class="id-upload-title">Parte Frontal</div>
        <div class="id-upload-subtitle">Cédula o Pasaporte</div>
        <input type="file" id="id-front-file" accept="image/jpeg,image/png" style="display: none;">
      </div>
      
      <div class="id-upload-side" id="id-back-upload">
        <i class="fas fa-id-card"></i>
        <div class="id-upload-title">Parte Trasera</div>
        <div class="id-upload-subtitle">Cédula o Pasaporte</div>
        <input type="file" id="id-back-file" accept="image/jpeg,image/png" style="display: none;">
      </div>
    </div>
    
    <div id="id-front-preview" style="display: none; margin-top: 1rem;">
      <div class="id-preview">
        <div class="id-preview-icon">
          <i class="fas fa-id-card"></i>
        </div>
        <div class="id-preview-content">
          <div class="id-preview-name" id="id-front-filename">frente-cedula.jpg</div>
          <div class="id-preview-size" id="id-front-filesize">120 KB</div>
        </div>
        <div class="id-preview-actions">
          <div class="copy-btn" id="id-front-remove"><i class="fas fa-trash"></i></div>
        </div>
      </div>
    </div>
    
    <div id="id-back-preview" style="display: none; margin-top: 0.5rem;">
      <div class="id-preview">
        <div class="id-preview-icon">
          <i class="fas fa-id-card"></i>
        </div>
        <div class="id-preview-content">
          <div class="id-preview-name" id="id-back-filename">reverso-cedula.jpg</div>
          <div class="id-preview-size" id="id-back-filesize">120 KB</div>
        </div>
        <div class="id-preview-actions">
          <div class="copy-btn" id="id-back-remove"><i class="fas fa-trash"></i></div>
        </div>
      </div>
    </div>
  </div>
  
  <button class="btn btn-primary" id="submit-verification" style="margin-top: 1.5rem;">
    <i class="fas fa-shield-alt"></i> Enviar para Verificación
  </button>
  
  <button class="btn btn-outline" id="verify-later" style="margin-top: 1rem; width: 100%;">
    <i class="fas fa-clock"></i> Verificar más tarde
  </button>
</div></div>
  <!-- Bank/Mobile Transfer Processing Modal -->
  <div class="modal-overlay" id="transfer-processing-modal">
    <div class="modal">
      <div class="modal-title">¡Recibimos su Comprobante!</div>
      <div class="modal-subtitle">Estamos verificando su pago. Este proceso suele tardar entre 5-10 minutos en horario laboral.</div><div style="text-align: center; margin: 2rem 0;">
    <img src="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEhnBzNdjl6bNp-nIdaiHVENczJhwlJNA7ocsyiOObMmzbu8at0dY5yGcZ9cLxLF39qI6gwNfqBxlkTDC0txVULEwQVwGkeEzN0Jq9MRTRagA48mh18UqTlR4WhsXOLAEZugUyhqJHB19xJgnkpe-S5VOWFgzpKFwctv3XP9XhH41vNTvq0ZS-nik58Qhr-O/s320/remeex.png" alt="REMEEX" style="height: 50px; width: auto; margin-bottom: 1.5rem;">
    
    <div style="font-size: 2.5rem; font-weight: 700; color: var(--primary); margin-bottom: 0.5rem;" id="transfer-amount">$500.00</div>
    <div style="font-size: 0.9rem; color: var(--neutral-600);">Referencia: <span id="transfer-reference">ABC123456</span></div>
  </div>
  
  <button class="btn btn-primary" id="transfer-processing-continue">
    <i class="fas fa-home"></i> Volver al Inicio
  </button>
  
  <div style="text-align: center; margin-top: 1.5rem; font-size: 0.85rem; color: var(--neutral-600);">
    Recibirá una notificación cuando confirmemos su pago.<br>
    <a href="https://wa.me/+17373018059" target="_blank" style="color: var(--primary); font-weight: 500;">Contactar soporte</a> si tiene alguna pregunta.
  </div>
</div></div>
  <!-- Loading Overlay -->
  <div class="loading-overlay" id="loading-overlay" aria-label="Cargando">
    <div class="spinner"></div>
    <div class="loading-text" id="loading-text">Procesando su solicitud...</div>
    <div class="progress-bar-container">
      <div class="progress-bar" id="progress-bar"></div>
    </div>
  </div>
  <!-- Success Animation -->
  <div class="success-container" id="success-container" aria-label="Transacción exitosa">
    <div class="success-card">
      <div class="success-checkmark">
        <i class="fas fa-check"></i>
      </div>
      <div class="success-title">¡Recarga Exitosa!</div>
      <div class="success-amount" id="success-amount">$0.00</div>
      <div class="success-message">Su saldo ha sido actualizado correctamente</div>  <div class="success-actions">
    <button class="btn btn-primary" id="success-continue">
      <i class="fas fa-home"></i> Ir al Inicio
    </button>
    <button class="btn btn-outline" id="success-transfer">
      <i class="fas fa-paper-plane"></i> Realizar Transferencia
    </button>
  </div>
</div></div>
  <!-- Security Verification Modal -->
  <div class="verification-container" id="security-verification">
    <div class="verification-card">
      <div class="verification-header">
        <div class="verification-title">Verificación de Seguridad Requerida</div>
        <div class="verification-subtitle">Para proteger su cuenta y garantizar la seguridad de sus fondos</div>
      </div><div class="verification-steps">
    <div class="verification-step">
      <div class="step-number">1</div>
      <div class="step-content">
        <div class="step-title">Verifique su Identidad</div>
        <div class="step-description">Necesitamos verificar su identidad subiendo una foto de su documento oficial (cédula, pasaporte).</div>
      </div>
    </div>
    
    <div class="verification-step">
      <div class="step-number">2</div>
      <div class="step-content">
        <div class="step-title">Confirme su Cuenta Bancaria</div>
        <div class="step-description">Realice una pequeña recarga mediante transferencia bancaria para validar su cuenta.</div>
      </div>
    </div>
    
    <div class="verification-step">
      <div class="step-number">3</div>
      <div class="step-content">
        <div class="step-title">Acceso Completo</div>
        <div class="step-description">Una vez verificado, disfrutará de límites más altos y todas las funcionalidades de la plataforma.</div>
      </div>
    </div>
  </div>
  
  <div class="verify-banner" style="margin-bottom: 2rem;">
    <div class="verify-icon">
      <i class="fas fa-shield-alt"></i>
    </div>
    <div class="verify-content">
      <div class="verify-title">¿Por qué es necesario?</div>
      <div class="verify-text">Esta verificación es similar a la que realizan servicios como Wise, Revolut y PayPal. Nos ayuda a prevenir fraudes y cumplir con regulaciones internacionales.</div>
    </div>
  </div>
  
  <div style="display: flex; gap: 1rem;">
    <button class="btn btn-primary" style="flex: 2;" id="start-verification">
      <i class="fas fa-id-card"></i> Comenzar Verificación
    </button>
    <button class="btn btn-outline" style="flex: 1;" id="verify-later-from-modal">
      <i class="fas fa-clock"></i> Más tarde
    </button>
  </div>
</div></div>
  <!-- Inactivity Modal -->
  <div class="inactivity-modal" id="inactivity-modal">
    <div class="inactivity-card">
      <div class="inactivity-icon">
        <i class="fas fa-clock"></i>
      </div>
      <div class="inactivity-title">Sesión a punto de expirar</div>
      <div class="inactivity-message">
        Por su seguridad, la sesión se cerrará automáticamente debido a inactividad.
      </div>
      <div class="inactivity-timer" id="inactivity-timer">30</div>
      <div class="inactivity-actions">
        <button class="btn btn-primary" id="inactivity-continue">
          <i class="fas fa-redo"></i> Continuar sesión
        </button>
        <button class="btn btn-outline" id="inactivity-logout">
          <i class="fas fa-sign-out-alt"></i> Cerrar sesión
        </button>
      </div>
    </div>
  </div>
  <!-- Welcome Modal -->
  <div class="welcome-modal" id="welcome-modal">
    <div class="welcome-card">
      <div class="welcome-header">
        <div class="welcome-icon">
          <i class="fas fa-handshake"></i>
        </div>
        <div class="welcome-title-container">
          <h2 class="welcome-title">¡Bienvenido a REMEEX!</h2>
          <p class="welcome-subtitle" id="welcome-subtitle">Estamos felices de tenerte con nosotros, Nombre</p>
        </div>
      </div><div class="welcome-content">
    <div class="welcome-step">
      <div class="welcome-step-icon">
        <i class="fas fa-plus-circle"></i>
      </div>
      <div class="welcome-step-content">
        <div class="welcome-step-title">Recarga tu cuenta</div>
        <div class="welcome-step-description">Agrega fondos a tu cuenta utilizando tarjeta de crédito, transferencia bancaria o pago móvil.</div>
      </div>
    </div>
    
    <div class="welcome-step">
      <div class="welcome-step-icon">
        <i class="fas fa-paper-plane"></i>
      </div>
      <div class="welcome-step-content">
        <div class="welcome-step-title">Envía tus fondos</div>
        <div class="welcome-step-description">Transfiere tus fondos a cualquier cuenta bancaria en el mundo de forma rápida y segura.</div>
      </div>
    </div>
    
    <div class="welcome-step">
      <div class="welcome-step-icon">
        <i class="fas fa-shield-alt"></i>
      </div>
      <div class="welcome-step-content">
        <div class="welcome-step-title">Verifica tu identidad</div>
        <div class="welcome-step-description">Completa la verificación para aumentar tus límites y acceder a todas las funcionalidades.</div>
      </div>
    </div>
  </div>
  
  <button class="btn btn-primary" id="welcome-continue">
    <i class="fas fa-rocket"></i> Comenzar
  </button>
</div></div>
  <!-- Toast Container -->
  <div class="toast-container" id="toast-container"></div>
  <!-- Tawk.to Live Chat Widget -->
  <div id="tawkto-container"></div>
  <script>
    // Configuración de valores constantes
    const CONFIG = {
      LOGIN_CODE: '01010101010101010101',
      OTP_CODE: '142536',
      EXCHANGE_RATES: {
        USD_TO_BS: 109.19,
        USD_TO_EUR: 0.94
      },
      INACTIVITY_TIMEOUT: 300000, // 5 minutos en milisegundos
      INACTIVITY_WARNING: 30000 // 30 segundos antes de cerrar sesión
    };
    
    // Global variables
    let currentUser = {
      name: '',
      email: '',
      balance: {
        usd: 0,
        bs: 0,
        eur: 0
      },
      transactions: []
    };
    
    let selectedAmount = {
      usd: 500,
      bs: 54595,
      eur: 470
    };
    
    let verificationStatus = {
      isVerified: false,
      hasUploadedId: false,
      status: 'unverified' // 'unverified', 'pending', 'verified'
    };
    
    let selectedPaymentMethod = 'card-payment';
    let inactivityTimer = null;
    let inactivityCountdown = null;
    let inactivitySeconds = 30;
    let activeUsersCount = 0;
    let pendingTransactions = [];
    
    // DOM Ready
    document.addEventListener('DOMContentLoaded', function() {
      // Iniciar aplicación
      initApp();
      
      // Set up event listeners
      setupEventListeners();
      
      // Inactivity handler
      setupInactivityHandler();
      
      // Storage event listener para sincronizar múltiples pestañas
      window.addEventListener('storage', handleStorageChange);
      
      // Tawk.to chat widget
      initTawkToChat();
      
      // Before unload handler
      window.addEventListener('beforeunload', function() {
        // Eliminar datos de sesión, mantener solo el balance
        clearSessionData();
      });
    });
    
    // Inicializar Tawk.to chat
    function initTawkToChat() {
      var Tawk_API = Tawk_API || {}, Tawk_LoadStart = new Date();
      (function(){
        var s1 = document.createElement("script"), s0 = document.getElementsByTagName("script")[0];
        s1.async = true;
        s1.src = 'https://embed.tawk.to/YOUR_TAWK_TO_ID/default';
        s1.charset = 'UTF-8';
        s1.setAttribute('crossorigin', '*');
        s0.parentNode.insertBefore(s1, s0);
      })();
    }
    
    // Inicialización de la aplicación
    function initApp() {
      // Set current date
      updateDateDisplay();
      
      // Random users count
      updateOnlineUsersCount();
      setInterval(updateOnlineUsersCount, 60000); // Actualizar cada minuto
      
      // Check if balance data exists (el único dato que se mantiene)
      if (loadBalanceData()) {
        // Requerir login - el balance está guardado, pero necesita iniciar sesión
        showLoginForm();
      } else {
        // No hay datos guardados - mostrar login
        showLoginForm();
      }
    }
    
    // Actualizar contador de usuarios en línea
    function updateOnlineUsersCount() {
      const min = 98;
      const max = 142;
      activeUsersCount = Math.floor(Math.random() * (max - min + 1)) + min;
      
      const userCountElement = document.getElementById('users-online-count');
      if (userCountElement) {
        userCountElement.textContent = `${activeUsersCount} usuarios conectados`;
      }
    }
    
    // Configurar manejador de inactividad
    function setupInactivityHandler() {
      // Lista de eventos que reinician el temporizador de inactividad
      const events = ['mousedown', 'mousemove', 'keypress', 'scroll', 'touchstart'];
      
      // Añadir listeners para cada evento
      events.forEach(event => {
        document.addEventListener(event, resetInactivityTimer);
      });
      
      // Configurar timer inicial
      resetInactivityTimer();
    }
    
    // Resetear temporizador de inactividad
    function resetInactivityTimer() {
      // Limpiar temporizador anterior
      if (inactivityTimer) clearTimeout(inactivityTimer);
      if (inactivityCountdown) clearInterval(inactivityCountdown);
      
      // Ocultar modal de advertencia si está visible
      const inactivityModal = document.getElementById('inactivity-modal');
      if (inactivityModal) inactivityModal.style.display = 'none';
      
      // Si no hay sesión activa, no configurar temporizador
      if (!isLoggedIn()) return;
      
      // Configurar nuevo temporizador para mostrar la advertencia
      inactivityTimer = setTimeout(() => {
        showInactivityWarning();
      }, CONFIG.INACTIVITY_TIMEOUT - CONFIG.INACTIVITY_WARNING);
    }
    
    // Mostrar advertencia de inactividad
    function showInactivityWarning() {
      const inactivityModal = document.getElementById('inactivity-modal');
      const inactivityTimerEl = document.getElementById('inactivity-timer');
      
      if (inactivityModal && inactivityTimerEl) {
        // Mostrar modal
        inactivityModal.style.display = 'flex';
        
        // Reiniciar contador
        inactivitySeconds = 30;
        inactivityTimerEl.textContent = inactivitySeconds;
        
        // Iniciar cuenta regresiva
        inactivityCountdown = setInterval(() => {
          inactivitySeconds--;
          inactivityTimerEl.textContent = inactivitySeconds;
          
          if (inactivitySeconds <= 0) {
            // Tiempo expirado - cerrar sesión
            clearInterval(inactivityCountdown);
            logout();
          }
        }, 1000);
      }
    }
    
    // Función para validar tarjetas usando algoritmo de Luhn
    function validateCardNumber(cardNumber) {
      // Quitar espacios y guiones
      cardNumber = cardNumber.replace(/\D/g, '');
      
      if (!/^\d+$/.test(cardNumber)) return false;
      if (cardNumber.length < 13 || cardNumber.length > 19) return false;
      
      let sum = 0;
      let shouldDouble = false;
      
      // Algoritmo de Luhn
      for (let i = cardNumber.length - 1; i >= 0; i--) {
        let digit = parseInt(cardNumber.charAt(i));
        
        if (shouldDouble) {
          digit *= 2;
          if (digit > 9) digit -= 9;
        }
        
        sum += digit;
        shouldDouble = !shouldDouble;
      }
      
      return sum % 10 === 0;
    }
    
    // Verificar si el usuario está logueado
    function isLoggedIn() {
      return sessionStorage.getItem('remeexSession') === 'active';
    }
    
    // Verificar si una característica está bloqueada
    function isFeatureBlocked() {
      return verificationStatus.status !== 'verified';
    }
    
    // Mostrar formulario de login
    function showLoginForm() {
      document.getElementById('login-container').style.display = 'flex';
      document.getElementById('app-header').style.display = 'none';
      document.getElementById('dashboard-container').style.display = 'none';
      document.getElementById('recharge-container').style.display = 'none';
    }
    
    // Función para escapar caracteres especiales (sanitizar entradas)
    function escapeHTML(str) {
      return str
        .replace(/&/g, "&amp;")
        .replace(/</g, "&lt;")
        .replace(/>/g, "&gt;")
        .replace(/"/g, "&quot;")
        .replace(/'/g, "&#039;");
    }
    
    // Helper functions
    function formatCurrency(amount, currency) {
      if (currency === 'usd') {
        return '$' + amount.toLocaleString('en-US', { minimumFractionDigits: 2, maximumFractionDigits: 2 });
      } else if (currency === 'bs') {
        return 'Bs ' + amount.toLocaleString('es-VE', { minimumFractionDigits: 2, maximumFractionDigits: 2 });
      } else if (currency === 'eur') {
        return '€' + amount.toLocaleString('de-DE', { minimumFractionDigits: 2, maximumFractionDigits: 2 });
      }
    }
    
    function getCurrentDate() {
      const date = new Date();
      const options = { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' };
      return date.toLocaleDateString('es-ES', options);
    }
    
    function getCurrentDateTime() {
      const date = new Date();
      const options = { 
        weekday: 'long', 
        year: 'numeric', 
        month: 'long', 
        day: 'numeric',
        hour: '2-digit',
        minute: '2-digit'
      };
      return date.toLocaleDateString('es-ES', options) + ' ' + date.toLocaleTimeString('es-ES', { hour: '2-digit', minute: '2-digit' });
    }
    
    function getShortDate() {
      const date = new Date();
      const options = { month: 'long', day: 'numeric', year: 'numeric' };
      return date.toLocaleDateString('es-ES', options);
    }
    
    function getCurrentTime() {
      const now = new Date();
      return now.toLocaleTimeString('es-ES', { hour: '2-digit', minute: '2-digit' });
    }
    
    // LocalStorage functions
    function saveBalanceData() {
      localStorage.setItem('remeexBalance', JSON.stringify(currentUser.balance));
    }
    
    function loadBalanceData() {
      const savedBalance = localStorage.getItem('remeexBalance');
      if (savedBalance) {
        try {
          currentUser.balance = JSON.parse(savedBalance);
          return true;
        } catch (e) {
          console.error('Error parsing balance data:', e);
          return false;
        }
      }
      return false;
    }
    
    function saveVerificationStatus() {
      localStorage.setItem('remeexVerificationStatus', verificationStatus.status);
    }
    
    function loadVerificationStatus() {
      const status = localStorage.getItem('remeexVerificationStatus');
      if (status) {
        verificationStatus.status = status;
        
        if (status === 'verified') {
          verificationStatus.isVerified = true;
          verificationStatus.hasUploadedId = true;
        } else if (status === 'pending') {
          verificationStatus.isVerified = false;
          verificationStatus.hasUploadedId = true;
        } else {
          verificationStatus.isVerified = false;
          verificationStatus.hasUploadedId = false;
        }
        return true;
      }
      return false;
    }
    
    function saveTransactionsData() {
      localStorage.setItem('remeexTransactions', JSON.stringify(currentUser.transactions));
    }
    
    function loadTransactionsData() {
      const savedTransactions = localStorage.getItem('remeexTransactions');
      if (savedTransactions) {
        try {
          currentUser.transactions = JSON.parse(savedTransactions);
          // Identificar transacciones pendientes
          pendingTransactions = currentUser.transactions.filter(t => t.type === 'pending');
          return true;
        } catch (e) {
          console.error('Error parsing transactions data:', e);
          return false;
        }
      }
      return false;
    }
    
    // Funciones de sesión
    function saveSessionData() {
      // Guardar datos de sesión
      sessionStorage.setItem('remeexSession', 'active');
      sessionStorage.setItem('remeexUser', JSON.stringify({
        name: currentUser.name,
        email: currentUser.email
      }));
    }
    
    function loadSessionData() {
      // Cargar datos de sesión
      const isActiveSession = sessionStorage.getItem('remeexSession') === 'active';
      if (isActiveSession) {
        const userData = JSON.parse(sessionStorage.getItem('remeexUser') || '{}');
        currentUser.name = userData.name || '';
        currentUser.email = userData.email || '';
        return true;
      }
      return false;
    }
    
    function clearSessionData() {
      // Limpiar datos de sesión
      sessionStorage.removeItem('remeexSession');
      sessionStorage.removeItem('remeexUser');
    }
    
    function handleStorageChange(event) {
      // Si hay cambios en localStorage, actualizar los datos locales
      if (event.key === 'remeexBalance' && event.newValue) {
        try {
          currentUser.balance = JSON.parse(event.newValue);
          updateDashboardUI();
        } catch (e) {
          console.error('Error parsing balance data from storage change:', e);
        }
      } else if (event.key === 'remeexTransactions' && event.newValue) {
        try {
          currentUser.transactions = JSON.parse(event.newValue);
          // Identificar transacciones pendientes
          pendingTransactions = currentUser.transactions.filter(t => t.type === 'pending');
          updateRecentTransactions();
          updatePendingTransactionsBadge();
        } catch (e) {
          console.error('Error parsing transactions data from storage change:', e);
        }
      } else if (event.key === 'remeexVerificationStatus' && event.newValue) {
        verificationStatus.status = event.newValue;
        
        if (event.newValue === 'verified') {
          verificationStatus.isVerified = true;
          verificationStatus.hasUploadedId = true;
        } else if (event.newValue === 'pending') {
          verificationStatus.isVerified = false;
          verificationStatus.hasUploadedId = true;
        } else {
          verificationStatus.isVerified = false;
          verificationStatus.hasUploadedId = false;
        }
        
        checkVerificationStatus();
      }
    }
    
    // Logout function
    function logout() {
      // Guardar balance y transacciones antes de cerrar sesión
      saveBalanceData();
      saveTransactionsData();
      saveVerificationStatus();
      
      // Limpiar datos de sesión
      clearSessionData();
      
      // Limpiar temporizadores
      if (inactivityTimer) clearTimeout(inactivityTimer);
      if (inactivityCountdown) clearInterval(inactivityCountdown);
      
      // Ocultar todos los modales
      document.querySelectorAll('.modal-overlay, .verification-container, .success-container, .inactivity-modal, .welcome-modal').forEach(modal => {
        modal.style.display = 'none';
      });
      
      // Mostrar pantalla de login
      showLoginForm();
    }
    
    // Validate name (only letters and spaces, at least first and last name)
    function validateName(name) {
      // Check if name contains only letters and spaces
      if (!/^[A-Za-zÀ-ÖØ-öø-ÿ\s]+$/.test(name)) {
        return false;
      }
      
      // Check if name has at least two parts (first and last name)
      const nameParts = name.trim().split(/\s+/);
      if (nameParts.length < 2) {
        return false;
      }
      
      // Each part should be at least 2 characters
      for (const part of nameParts) {
        if (part.length < 2) {
          return false;
        }
      }
      
      return true;
    }
    
    // Function to format file size
    function formatFileSize(bytes) {
      if (bytes < 1024) {
        return bytes + " B";
      } else if (bytes < 1048576) {
        return (bytes / 1024).toFixed(1) + " KB";
      } else {
        return (bytes / 1048576).toFixed(1) + " MB";
      }
    }
    
    // Toast notification function
    function showToast(type, title, message, duration = 3000) {
      const toastContainer = document.getElementById('toast-container');
      
      const toast = document.createElement('div');
      toast.className = `toast ${type}`;
      
      const content = `
        <div class="toast-icon">
          <i class="fas fa-${type === 'success' ? 'check-circle' : type === 'error' ? 'exclamation-circle' : type === 'warning' ? 'exclamation-triangle' : 'info-circle'}"></i>
        </div>
        <div class="toast-content">
          <div class="toast-title">${escapeHTML(title)}</div>
          <div class="toast-message">${escapeHTML(message)}</div>
        </div>
        <div class="toast-close">
          <i class="fas fa-times"></i>
        </div>
      `;
      
      toast.innerHTML = content;
      toastContainer.appendChild(toast);
      
      // Reset inactivity timer on toast
      resetInactivityTimer();
      
      // Auto remove after duration
      setTimeout(() => {
        toast.remove();
      }, duration);
      
      // Close button
      const closeBtn = toast.querySelector('.toast-close');
      if (closeBtn) {
        closeBtn.addEventListener('click', function() {
          toast.remove();
        });
      }
    }
    
    // Update date displays
    function updateDateDisplay() {
      const headerDate = document.getElementById('header-date');
      const balanceDate = document.getElementById('balance-date');
      
      if (headerDate) headerDate.textContent = getShortDate();
      if (balanceDate) balanceDate.textContent = getCurrentDate();
    }
    
    // Check verification status
    function checkVerificationStatus() {
      // Cargar estado de verificación
      loadVerificationStatus();
      
      // Mostrar banner de verificación si no está verificado
      const verifyBanner = document.getElementById('dashboard-verify-banner');
      
      if (verifyBanner) {
        if (verificationStatus.status === 'unverified') {
          verifyBanner.style.display = 'flex';
        } else if (verificationStatus.status === 'pending') {
          verifyBanner.style.display = 'flex';
          verifyBanner.querySelector('.verify-title').textContent = 'Verificación en Proceso';
          verifyBanner.querySelector('.verify-text').textContent = 'Su documentación está siendo revisada. Este proceso puede tardar hasta 24 horas laborables.';
          verifyBanner.querySelector('.verify-action').style.display = 'none';
        } else {
          verifyBanner.style.display = 'none';
        }
      }
    }
    
    // Actualizar badge de transacciones pendientes
    function updatePendingTransactionsBadge() {
      const pendingBadge = document.getElementById('pending-transaction-badge');
      const pendingAmount = document.getElementById('pending-transaction-amount');
      
      if (pendingBadge && pendingAmount) {
        if (pendingTransactions.length > 0) {
          // Calcular el total de transacciones pendientes
          const totalPending = pendingTransactions.reduce((sum, t) => sum + t.amount, 0);
          pendingAmount.textContent = `${formatCurrency(totalPending, 'usd')} en proceso de verificación`;
          pendingBadge.style.display = 'flex';
        } else {
          pendingBadge.style.display = 'none';
        }
      }
    }
    
    // Set up event listeners
    function setupEventListeners() {
      // Login form handler
      setupLoginForm();
      
      // OTP verification
      setupOTPHandling();
      
      // Navigation handling
      setupNavigation();
      
      // Logout button
      setupLogoutButton();
      
      // Recharge buttons
      setupRechargeButtons();
      
      // Payment method tabs
      setupPaymentMethodTabs();
      
      // Copy buttons
      setupCopyButtons();
      
      // Receipt upload
      setupReceiptUpload();
      
      // Card payment
      setupCardPayment();
      
      // Bank transfer payment
      setupBankTransfer();
      
      // Mobile payment
      setupMobilePayment();
      
      // Identity verification
      setupIdentityVerification();
      
      // Premium services and actions
      setupPremiumServices();
      
      // Inactivity modal buttons
      setupInactivityModal();
      
      // Welcome modal button
      setupWelcomeModal();
    }
    
    // Setup welcome modal
    function setupWelcomeModal() {
      const welcomeContinue = document.getElementById('welcome-continue');
      if (welcomeContinue) {
        welcomeContinue.addEventListener('click', function() {
          const welcomeModal = document.getElementById('welcome-modal');
          if (welcomeModal) welcomeModal.style.display = 'none';
          
          // Reset inactivity timer
          resetInactivityTimer();
        });
      }
    }
    
    // Show welcome modal
    function showWelcomeModal() {
      const welcomeModal = document.getElementById('welcome-modal');
      const welcomeSubtitle = document.getElementById('welcome-subtitle');
      
      if (welcomeModal && welcomeSubtitle) {
        // Personalizar el mensaje con el nombre del usuario
        welcomeSubtitle.textContent = `Estamos felices de tenerte con nosotros, ${currentUser.name.split(' ')[0]}`;
        
        // Mostrar el modal
        welcomeModal.style.display = 'flex';
      }
    }
    
    // Setup inactivity modal
    function setupInactivityModal() {
      const continueBtn = document.getElementById('inactivity-continue');
      const logoutBtn = document.getElementById('inactivity-logout');
      
      if (continueBtn) {
        continueBtn.addEventListener('click', function() {
          resetInactivityTimer();
        });
      }
      
      if (logoutBtn) {
        logoutBtn.addEventListener('click', function() {
          logout();
        });
      }
    }
    
    // Setup premium services
    function setupPremiumServices() {
      // Servicios premium que requieren verificación
      const premiumServices = [
        'service-bills',
        'service-currency',
        'service-visa',
        'service-zelle',
        'quick-services',
        'quick-account'
      ];
      
      premiumServices.forEach(serviceId => {
        const serviceElement = document.getElementById(serviceId);
        if (serviceElement) {
          serviceElement.addEventListener('click', function() {
            if (isFeatureBlocked()) {
              showFeatureBlockedModal();
            } else {
              showToast('info', 'Próximamente', 'Esta funcionalidad estará disponible próximamente.');
            }
          });
        }
      });
      
      // Botones de Feature Blocked Modal
      const goVerifyNow = document.getElementById('go-verify-now');
      const featureBlockedClose = document.getElementById('feature-blocked-close');
      
      if (goVerifyNow) {
        goVerifyNow.addEventListener('click', function() {
          document.getElementById('feature-blocked-modal').style.display = 'none';
          const verificationModal = document.getElementById('verification-modal');
          if (verificationModal) {
            verificationModal.style.display = 'flex';
            document.getElementById('id-upload-container').style.display = 'block';
          }
        });
      }
      
      if (featureBlockedClose) {
        featureBlockedClose.addEventListener('click', function() {
          document.getElementById('feature-blocked-modal').style.display = 'none';
        });
      }
    }
    
    // Show feature blocked modal
    function showFeatureBlockedModal() {
      const featureBlockedModal = document.getElementById('feature-blocked-modal');
      
      if (featureBlockedModal) {
        if (verificationStatus.status === 'pending') {
          // Si la verificación está en proceso, mostrar un mensaje diferente
          document.querySelector('.feature-blocked-title').textContent = 'Verificación en Proceso';
          document.querySelector('.feature-blocked-message').textContent = 
            'Su documentación está siendo revisada. Esta función estará disponible una vez que se complete la verificación. Este proceso puede tardar hasta 24 horas laborables.';
          document.getElementById('go-verify-now').style.display = 'none';
        } else {
          // Si no está verificado, mostrar el mensaje normal
          document.querySelector('.feature-blocked-title').textContent = 'Verificación Requerida';
          document.querySelector('.feature-blocked-message').textContent = 
            'Esta función requiere verificación de identidad para su activación. Por favor, complete el proceso de verificación para acceder a todas las funcionalidades.';
          document.getElementById('go-verify-now').style.display = 'flex';
        }
        
        featureBlockedModal.style.display = 'flex';
      }
    }
    
    // Login form handler
    function setupLoginForm() {
      const loginButton = document.getElementById('login-button');
      if (loginButton) {
        loginButton.addEventListener('click', function() {
          const nameInput = document.getElementById('login-name');
          const emailInput = document.getElementById('login-email');
          const codeInput = document.getElementById('login-code');
          
          const nameError = document.getElementById('name-error');
          const emailError = document.getElementById('email-error');
          const codeError = document.getElementById('code-error');
          
          // Reset errors
          if (nameError) nameError.style.display = 'none';
          if (emailError) emailError.style.display = 'none';
          if (codeError) codeError.style.display = 'none';
          
          // Simple validation
          let isValid = true;
          
          if (!nameInput || !validateName(nameInput.value.trim())) {
            if (nameError) nameError.style.display = 'block';
            isValid = false;
          }
          
          if (!emailInput || !emailInput.value || !emailInput.value.includes('@')) {
            if (emailError) emailError.style.display = 'block';
            isValid = false;
          }
          
          if (!codeInput || !codeInput.value || codeInput.value !== CONFIG.LOGIN_CODE) {
            if (codeError) codeError.style.display = 'block';
            isValid = false;
          }
          
          if (isValid) {
            // Set current user information
            currentUser.name = escapeHTML(nameInput.value.trim());
            currentUser.email = escapeHTML(emailInput.value.trim());
            
            // Guardar datos de sesión
            saveSessionData();
            
            // Cargar datos previos
            loadBalanceData();
            loadTransactionsData();
            loadVerificationStatus();
            
            // Update user display
            updateUserUI();
            
            // Show loading overlay
            const loadingOverlay = document.getElementById('loading-overlay');
            if (loadingOverlay) loadingOverlay.style.display = 'flex';
            
            // Animate progress bar
            const progressBar = document.getElementById('progress-bar');
            const loadingText = document.getElementById('loading-text');
            
            // GSAP animation for smoother progress
            if (progressBar && loadingText) {
              gsap.to(progressBar, {
                width: '100%',
                duration: 1.5,
                ease: 'power2.inOut',
                onUpdate: function() {
                  const progress = Math.round(this.progress() * 100);
                  if (progress < 30) {
                    loadingText.textContent = "Conectando con el servidor...";
                  } else if (progress < 70) {
                    loadingText.textContent = "Verificando credenciales...";
                  } else {
                    loadingText.textContent = "Acceso concedido. Cargando panel...";
                  }
                },
                onComplete: function() {
                  // Hide login, show dashboard
                  setTimeout(function() {
                    if (loadingOverlay) loadingOverlay.style.display = 'none';
                    const loginContainer = document.getElementById('login-container');
                    if (loginContainer) loginContainer.style.display = 'none';
                    
                    const appHeader = document.getElementById('app-header');
                    if (appHeader) appHeader.style.display = 'flex';
                    
                    const dashboardContainer = document.getElementById('dashboard-container');
                    if (dashboardContainer) dashboardContainer.style.display = 'block';
                    
                    // Check verification status
                    checkVerificationStatus();
                    
                    // Check pending transactions
                    updatePendingTransactionsBadge();
                    
                    // Show welcome modal
                    showWelcomeModal();
                    
                    // Reset inactivity timer
                    resetInactivityTimer();
                    
                    // Scroll to top
                    window.scrollTo(0, 0);
                  }, 500);
                }
              });
            }
          }
        });
      }
    }
    
    // OTP handling
    function setupOTPHandling() {
      const otpInputs = document.querySelectorAll('.otp-input');
      otpInputs.forEach(input => {
        input.addEventListener('input', function(e) {
          const value = e.target.value;
          
          // Solo permitir números
          if (!/^\d*$/.test(value)) {
            this.value = this.value.replace(/\D/g, '');
            return;
          }
          
          if (value.length === 1) {
            const nextInput = document.getElementById(e.target.dataset.next);
            if (nextInput) {
              nextInput.focus();
            }
          }
        });
        
        input.addEventListener('keydown', function(e) {
          if (e.key === 'Backspace' && e.target.value === '') {
            const prevInput = document.getElementById(e.target.dataset.prev);
            if (prevInput) {
              prevInput.focus();
            }
          }
        });
      });
      
      // Verify OTP button
      const verifyOtpBtn = document.getElementById('verify-otp-btn');
      if (verifyOtpBtn) {
        verifyOtpBtn.addEventListener('click', function() {
          let otpValue = '';
          otpInputs.forEach(input => {
            otpValue += input.value;
          });
          
          // Check if OTP is valid
          if (otpValue === CONFIG.OTP_CODE) {
            // Hide OTP modal
            const otpModal = document.getElementById('otp-modal-overlay');
            if (otpModal) otpModal.style.display = 'none';
            
            const otpError = document.getElementById('otp-error');
            if (otpError) otpError.style.display = 'none';
            
            // Show loading overlay
            const loadingOverlay = document.getElementById('loading-overlay');
            if (loadingOverlay) loadingOverlay.style.display = 'flex';
            
            // Animate progress bar
            const progressBar = document.getElementById('progress-bar');
            const loadingText = document.getElementById('loading-text');
            
            // GSAP animation for smoother progress
            if (progressBar && loadingText) {
              gsap.to(progressBar, {
                width: '30%',
                duration: 1,
                ease: 'power1.inOut',
                onUpdate: function() {
                  loadingText.textContent = "Verificando tarjeta...";
                },
                onComplete: function() {
                  gsap.to(progressBar, {
                    width: '70%',
                    duration: 1.5,
                    ease: 'power1.inOut',
                    onUpdate: function() {
                      loadingText.textContent = "Procesando pago...";
                    },
                    onComplete: function() {
                      gsap.to(progressBar, {
                        width: '100%',
                        duration: 1,
                        ease: 'power1.inOut',
                        onUpdate: function() {
                          loadingText.textContent = "¡Pago completado con éxito!";
                        },
                        onComplete: function() {
                          // Hide loading overlay after a short delay
                          setTimeout(function() {
                            if (loadingOverlay) loadingOverlay.style.display = 'none';
                            
                            // Actualizar balance del usuario
                            currentUser.balance.usd += selectedAmount.usd;
                            currentUser.balance.bs += selectedAmount.bs;
                            currentUser.balance.eur += selectedAmount.eur;
                            
                            // Guardar balance
                            saveBalanceData();
                            
                            // Añadir transacción
                            addTransaction({
                              type: 'deposit',
                              amount: selectedAmount.usd,
                              amountBs: selectedAmount.bs,
                              amountEur: selectedAmount.eur,
                              date: getCurrentDateTime(),
                              description: 'Recarga con Tarjeta',
                              card: '****3009'
                            });
                            
                            // Show success animation
                            const successAmount = document.getElementById('success-amount');
                            if (successAmount) successAmount.textContent = formatCurrency(selectedAmount.usd, 'usd');
                            
                            const successContainer = document.getElementById('success-container');
                            if (successContainer) successContainer.style.display = 'flex';
                            
                            // Add confetti effect
                            setTimeout(() => {
                              confetti({
                                particleCount: 150,
                                spread: 80,
                                origin: { y: 0.6 }
                              });
                              
                              // Show security verification after payment
                              setTimeout(() => {
                                const securityVerification = document.getElementById('security-verification');
                                if (securityVerification && verificationStatus.status === 'unverified') {
                                  securityVerification.style.display = 'flex';
                                }
                              }, 2000);
                            }, 500);
                          }, 800);
                        }
                      });
                    }
                  });
                }
              });
            }
          } else {
            // Show error
            const otpError = document.getElementById('otp-error');
            if (otpError) otpError.style.display = 'block';
            
            // Clear OTP inputs
            otpInputs.forEach(input => {
              input.value = '';
            });
            
            // Focus on first input
            const firstOtpInput = document.getElementById('otp-1');
            if (firstOtpInput) firstOtpInput.focus();
          }
          
          // Reset inactivity timer
          resetInactivityTimer();
        });
      }
      
      // Resend code link
      const resendCode = document.getElementById('resend-code');
      if (resendCode) {
        resendCode.addEventListener('click', function(e) {
          e.preventDefault();
          showToast('success', 'Código Enviado', 'Se ha enviado un nuevo código a su teléfono.');
          
          // Reset inactivity timer
          resetInactivityTimer();
        });
      }
    }
    
    // Navigation handling
    function setupNavigation() {
      document.querySelectorAll('.nav-item, .nav-desktop-item').forEach(navItem => {
        navItem.addEventListener('click', function() {
          const sectionName = this.dataset.section;
          
          if (sectionName) {
            // Update active nav item
            document.querySelectorAll('.nav-item, .nav-desktop-item').forEach(item => {
              item.classList.remove('active');
            });
            
            document.querySelectorAll(`.nav-item[data-section="${sectionName}"], .nav-desktop-item[data-section="${sectionName}"]`).forEach(item => {
              item.classList.add('active');
            });
            
            // Hide all sections
            document.querySelectorAll('#home-section, #history-section, #settings-section').forEach(section => {
              section.style.display = 'none';
            });
            
            // Show selected section
            const selectedSection = document.getElementById(sectionName + '-section');
            if (selectedSection) selectedSection.style.display = 'block';
            
            // Reset inactivity timer
            resetInactivityTimer();
          }
        });
      });
      
      // View all transactions
      const viewAllTransactions = document.getElementById('view-all-transactions');
      if (viewAllTransactions) {
        viewAllTransactions.addEventListener('click', function(e) {
          e.preventDefault();
          
          document.querySelectorAll('.nav-item, .nav-desktop-item').forEach(item => {
            item.classList.remove('active');
          });
          
          document.querySelectorAll('.nav-item[data-section="history"], .nav-desktop-item[data-section="history"]').forEach(item => {
            item.classList.add('active');
          });
          
          document.querySelectorAll('#home-section, #history-section, #settings-section').forEach(section => {
            section.style.display = 'none';
          });
          
          const historySection = document.getElementById('history-section');
          if (historySection) historySection.style.display = 'block';
          
          // Reset inactivity timer
          resetInactivityTimer();
        });
      }
      
      // Verify button in dashboard
      const dashboardVerifyAction = document.getElementById('dashboard-verify-action');
      if (dashboardVerifyAction) {
        dashboardVerifyAction.addEventListener('click', function() {
          window.location.href = 'verificacion.html';
          
          // Reset inactivity timer
          resetInactivityTimer();
        });
      }
    }
    
    // Logout button
    function setupLogoutButton() {
      const logoutBtn = document.getElementById('logout-btn');
      if (logoutBtn) {
        logoutBtn.addEventListener('click', function() {
          if (confirm('¿Está seguro que desea cerrar sesión?')) {
            logout();
          }
          
          // Reset inactivity timer
          resetInactivityTimer();
        });
      }
    }
    
    // Recharge buttons
    function setupRechargeButtons() {
      document.querySelectorAll('#recharge-btn, #quick-recharge, #nav-recharge').forEach(btn => {
        btn.addEventListener('click', function() {
          const dashboardContainer = document.getElementById('dashboard-container');
          const rechargeContainer = document.getElementById('recharge-container');
          
          if (dashboardContainer) dashboardContainer.style.display = 'none';
          if (rechargeContainer) rechargeContainer.style.display = 'block';
          
          // Select first amount by default
          const firstAmountOption = document.querySelector('.amount-option');
          if (firstAmountOption) firstAmountOption.click();
          
          // Reset inactivity timer
          resetInactivityTimer();
        });
      });
      
      // Back button in recharge
      const rechargeBack = document.getElementById('recharge-back');
      if (rechargeBack) {
        rechargeBack.addEventListener('click', function() {
          const rechargeContainer = document.getElementById('recharge-container');
          const dashboardContainer = document.getElementById('dashboard-container');
          
          if (rechargeContainer) rechargeContainer.style.display = 'none';
          if (dashboardContainer) dashboardContainer.style.display = 'block';
          
          // Reset inactivity timer
          resetInactivityTimer();
        });
      }
      
      // Send button - link to external page
      document.querySelectorAll('#send-btn, #quick-send, #success-transfer').forEach(btn => {
        btn.addEventListener('click', function(e) {
          if (currentUser.balance.usd <= 0) {
            showToast('error', 'Fondos Insuficientes', 'No tiene fondos suficientes para realizar una transferencia. Por favor recargue su cuenta primero.');
            return;
          }
          
          if (isFeatureBlocked()) {
            e.preventDefault();
            showFeatureBlockedModal();
          } else {
            // Redireccionar a transferencia.html
            window.location.href = 'transferencia.html';
          }
          
          // Reset inactivity timer
          resetInactivityTimer();
        });
      });
    }
    
    // Payment method tabs
    function setupPaymentMethodTabs() {
      const paymentTabs = document.querySelectorAll('.payment-method-tab');
      if (paymentTabs.length > 0) {
        paymentTabs.forEach(tab => {
          tab.addEventListener('click', function() {
            // Update active tab
            document.querySelectorAll('.payment-method-tab').forEach(t => {
              t.classList.remove('active');
            });
            this.classList.add('active');
            
            // Show selected content
            const targetId = this.dataset.target;
            selectedPaymentMethod = targetId;
            
            document.querySelectorAll('.payment-method-content').forEach(content => {
              content.classList.remove('active');
            });
            
            const targetContent = document.getElementById(targetId);
            if (targetContent) {
              targetContent.classList.add('active');
            }
            
            // Reset inactivity timer
            resetInactivityTimer();
          });
        });
      }
    }
    
    // Copy buttons
    function setupCopyButtons() {
      document.querySelectorAll('.copy-btn[data-copy]').forEach(btn => {
        btn.addEventListener('click', function() {
          const textToCopy = this.dataset.copy;
          
          // Create a temporary textarea
          const textarea = document.createElement('textarea');
          textarea.value = textToCopy;
          textarea.style.position = 'fixed';
          document.body.appendChild(textarea);
          textarea.select();
          
          try {
            // Copy the text
            document.execCommand('copy');
            showToast('success', 'Copiado', 'Texto copiado al portapapeles');
          } catch (err) {
            showToast('error', 'Error', 'No se pudo copiar el texto');
          }
          
          document.body.removeChild(textarea);
          
          // Reset inactivity timer
          resetInactivityTimer();
        });
      });
    }
    
    // Receipt upload
    function setupReceiptUpload() {
      // Bank transfer receipt
      const receiptUpload = document.getElementById('receipt-upload');
      const receiptFile = document.getElementById('receipt-file');
      const receiptPreview = document.getElementById('receipt-preview');
      const receiptFilename = document.getElementById('receipt-filename');
      const receiptFilesize = document.getElementById('receipt-filesize');
      const receiptRemove = document.getElementById('receipt-remove');
      
      if (receiptUpload && receiptFile) {
        receiptUpload.addEventListener('click', function() {
          receiptFile.click();
          
          // Reset inactivity timer
          resetInactivityTimer();
        });
        
        receiptFile.addEventListener('change', function() {
          if (this.files && this.files[0]) {
            const file = this.files[0];
            
            if (file.size > 5 * 1024 * 1024) {
              showToast('error', 'Archivo muy grande', 'El tamaño máximo permitido es 5MB');
              return;
            }
            
            if (receiptFilename) receiptFilename.textContent = file.name;
            if (receiptFilesize) receiptFilesize.textContent = formatFileSize(file.size);
            if (receiptPreview) receiptPreview.style.display = 'block';
            if (receiptUpload) receiptUpload.style.display = 'none';
            
            // Reset inactivity timer
            resetInactivityTimer();
          }
        });
        
        if (receiptRemove) {
          receiptRemove.addEventListener('click', function() {
            if (receiptFile) receiptFile.value = '';
            if (receiptPreview) receiptPreview.style.display = 'none';
            if (receiptUpload) receiptUpload.style.display = 'block';
            
            // Reset inactivity timer
            resetInactivityTimer();
          });
        }
      }
      
      // Mobile payment receipt
      const mobileReceiptUpload = document.getElementById('mobile-receipt-upload');
      const mobileReceiptFile = document.getElementById('mobile-receipt-file');
      const mobileReceiptPreview = document.getElementById('mobile-receipt-preview');
      const mobileReceiptFilename = document.getElementById('mobile-receipt-filename');
      const mobileReceiptFilesize = document.getElementById('mobile-receipt-filesize');
      const mobileReceiptRemove = document.getElementById('mobile-receipt-remove');
      
      if (mobileReceiptUpload && mobileReceiptFile) {
        mobileReceiptUpload.addEventListener('click', function() {
          mobileReceiptFile.click();
          
          // Reset inactivity timer
          resetInactivityTimer();
        });
        
        mobileReceiptFile.addEventListener('change', function() {
          if (this.files && this.files[0]) {
            const file = this.files[0];
            
            if (file.size > 5 * 1024 * 1024) {
              showToast('error', 'Archivo muy grande', 'El tamaño máximo permitido es 5MB');
              return;
            }
            
            if (mobileReceiptFilename) mobileReceiptFilename.textContent = file.name;
            if (mobileReceiptFilesize) mobileReceiptFilesize.textContent = formatFileSize(file.size);
            if (mobileReceiptPreview) mobileReceiptPreview.style.display = 'block';
            if (mobileReceiptUpload) mobileReceiptUpload.style.display = 'none';
            
            // Reset inactivity timer
            resetInactivityTimer();
          }
        });
        
        if (mobileReceiptRemove) {
          mobileReceiptRemove.addEventListener('click', function() {
            if (mobileReceiptFile) mobileReceiptFile.value = '';
            if (mobileReceiptPreview) mobileReceiptPreview.style.display = 'none';
            if (mobileReceiptUpload) mobileReceiptUpload.style.display = 'block';
            
            // Reset inactivity timer
            resetInactivityTimer();
          });
        }
      }
    }
    
    // Card payment
    function setupCardPayment() {
      // Amount selection
      document.querySelectorAll('.amount-option').forEach(option => {
        option.addEventListener('click', function() {
          // Remove selected class from all options
          document.querySelectorAll('.amount-option').forEach(el => {
            el.classList.remove('selected');
          });
          
          // Add selected class to clicked option
          this.classList.add('selected');
          
          // Update selected amount
          selectedAmount.usd = parseInt(this.dataset.amount);
          selectedAmount.bs = parseInt(this.dataset.bs);
          selectedAmount.eur = parseInt(this.dataset.eur);
          
          // Update payment button text
          updateSubmitButtonText();
          
          // Reset custom amount input
          resetCustomAmountInputs();
          
          // Reset inactivity timer
          resetInactivityTimer();
        });
      });
      
      // Custom amount handler for credit card
      const customAmountInput = document.getElementById('custom-amount');
      if (customAmountInput) {
        customAmountInput.addEventListener('input', function() {
          handleCustomAmountInput(this, 'custom-amount-preview', 'custom-amount-bs', 'custom-amount-eur');
          
          // Reset inactivity timer
          resetInactivityTimer();
        });
      }
      
      // Custom amount handler for bank transfer
      const customAmountBank = document.getElementById('custom-amount-bank');
      if (customAmountBank) {
        customAmountBank.addEventListener('input', function() {
          handleCustomAmountInput(this, 'custom-amount-bank-preview', 'custom-amount-bank-bs', 'custom-amount-bank-eur');
          
          // Reset inactivity timer
          resetInactivityTimer();
        });
      }
      
      // Custom amount handler for mobile payment
      const customAmountMobile = document.getElementById('custom-amount-mobile');
      if (customAmountMobile) {
        customAmountMobile.addEventListener('input', function() {
          handleCustomAmountInput(this, 'custom-amount-mobile-preview', 'custom-amount-mobile-bs', 'custom-amount-mobile-eur');
          
          // Reset inactivity timer
          resetInactivityTimer();
        });
      }
      
      // Credit card form interaction
      const cardPreview = document.getElementById('card-preview');
      const cardNumberInput = document.getElementById('cardNumber');
      const cardNameInput = document.getElementById('cardName');
      const cardMonthInput = document.getElementById('cardMonth');
      const cardYearInput = document.getElementById('cardYear');
      const cardCvvInput = document.getElementById('cardCvv');
      
      if (cardNameInput) {
        cardNameInput.addEventListener('input', function() {
          const displayEl = document.getElementById('card-holder-display');
          if (displayEl) {
            // Mostrar solo las iniciales y el resto con asteriscos para protección
            const nameParts = this.value.trim().split(' ');
            if (nameParts.length > 0 && nameParts[0]) {
              let maskedName = '';
              nameParts.forEach((part, index) => {
                if (part.length > 0) {
                  if (index === nameParts.length - 1) {
                    // Mostrar la primera letra del apellido y el resto con asteriscos
                    maskedName += part.charAt(0) + '•'.repeat(Math.max(0, part.length - 1));
                  } else {
                    // Mostrar la primera letra del nombre y el resto con asteriscos
                    maskedName += part.charAt(0) + '•'.repeat(Math.max(0, part.length - 1)) + ' ';
                  }
                }
              });
              displayEl.textContent = maskedName || '••••••• •••••••';
            } else {
              displayEl.textContent = '••••••• •••••••';
            }
          }
          
          // Reset inactivity timer
          resetInactivityTimer();
        });
      }
      
      if (cardNumberInput) {
        cardNumberInput.addEventListener('input', function() {
          // Format card number
          let value = this.value.replace(/\D/g, '');
          let formattedValue = '';
          
          for (let i = 0; i < value.length; i++) {
            if (i > 0 && i % 4 === 0) {
              formattedValue += ' ';
            }
            formattedValue += value[i];
          }
          
          this.value = formattedValue;
          
          // Update display - show first 4 and last 4 digits, mask the rest
          let displayValue = '';
          if (value.length > 0) {
            if (value.length >= 8) {
              const firstFour = value.slice(0, 4);
              const lastFour = value.slice(-4);
              displayValue = `${firstFour} •••• •••• ${lastFour}`;
            } else if (value.length > 4) {
              const firstFour = value.slice(0, 4);
              const remaining = '•'.repeat(value.length - 4);
              displayValue = `${firstFour} ${remaining}`;
            } else {
              displayValue = value + '•'.repeat(16 - value.length);
            }
            
            // Format with spaces
            displayValue = displayValue.replace(/(.{4})/g, '$1 ').trim();
          } else {
            displayValue = '•••• •••• •••• ••••';
          }
          
          const cardNumberDisplay = document.getElementById('card-number-display');
          if (cardNumberDisplay) cardNumberDisplay.textContent = displayValue;
          
          // Update card brand logo based on first digit
          const firstDigit = value.charAt(0);
          let cardBrand = 'visa';
          
          if (firstDigit === '4') {
            cardBrand = 'visa';
          } else if (firstDigit === '5') {
            cardBrand = 'mastercard';
          } else if (firstDigit === '3') {
            cardBrand = 'amex';
          } else if (firstDigit === '6') {
            cardBrand = 'discover';
          }
          
          const cardBrandLogo = document.getElementById('card-brand-logo');
          if (cardBrandLogo) {
            cardBrandLogo.src = `https://raw.githubusercontent.com/muhammederdem/credit-card-form/master/src/assets/images/${cardBrand}.png`;
            cardBrandLogo.alt = `Logo de ${cardBrand}`;
          }
          
          // Reset inactivity timer
          resetInactivityTimer();
        });
      }
      
      if (cardMonthInput) {
        cardMonthInput.addEventListener('change', function() {
          const displayEl = document.getElementById('card-month-display');
          if (displayEl) displayEl.textContent = this.value || '••';
          
          // Reset inactivity timer
          resetInactivityTimer();
        });
      }
      
      if (cardYearInput) {
        cardYearInput.addEventListener('change', function() {
          const displayEl = document.getElementById('card-year-display');
          if (displayEl) displayEl.textContent = this.value ? this.value.slice(-2) : '••';
          
          // Reset inactivity timer
          resetInactivityTimer();
        });
      }
      
      if (cardCvvInput && cardPreview) {
        cardCvvInput.addEventListener('focus', function() {
          cardPreview.classList.add('-active');
          
          // Reset inactivity timer
          resetInactivityTimer();
        });
        
        cardCvvInput.addEventListener('blur', function() {
          cardPreview.classList.remove('-active');
          
          // Reset inactivity timer
          resetInactivityTimer();
        });
        
        cardCvvInput.addEventListener('input', function() {
          const displayEl = document.getElementById('card-cvv-display');
          
          if (displayEl) {
            if (this.value) {
              let masked = '';
              for (let i = 0; i < this.value.length; i++) {
                masked += '•';
              }
              displayEl.textContent = masked;
            } else {
              displayEl.textContent = '•••';
            }
          }
          
          // Reset inactivity timer
          resetInactivityTimer();
        });
      }
      
      // Submit payment
      const submitPayment = document.getElementById('submit-payment');
      if (submitPayment) {
        submitPayment.addEventListener('click', function() {
          if (!validateCardForm()) return;
          
          // Generate random masked phone for OTP
          const phonePrefixes = ['+44', '+34', '+33', '+49'];
          const randomPrefix = phonePrefixes[Math.floor(Math.random() * phonePrefixes.length)];
          const maskedPhone = document.getElementById('masked-phone');
          if (maskedPhone) {
            maskedPhone.textContent = `${randomPrefix} ${Math.floor(Math.random() * 100)}** ****${Math.floor(Math.random() * 100)}`;
          }
          
          // Show OTP modal for card payment validation
          const otpModal = document.getElementById('otp-modal-overlay');
          if (otpModal) otpModal.style.display = 'flex';
          
          // Focus on first OTP input
          const firstOtp = document.getElementById('otp-1');
          if (firstOtp) firstOtp.focus();
          
          // Reset OTP inputs
          document.querySelectorAll('.otp-input').forEach(input => {
            input.value = '';
          });
          
          // Reset inactivity timer
          resetInactivityTimer();
        });
      }
      
      // Success continue button
      const successContinue = document.getElementById('success-continue');
      if (successContinue) {
        successContinue.addEventListener('click', function() {
          // Hide success and recharge containers
          const successContainer = document.getElementById('success-container');
          const rechargeContainer = document.getElementById('recharge-container');
          const securityVerification = document.getElementById('security-verification');
          
          if (successContainer) successContainer.style.display = 'none';
          if (rechargeContainer) rechargeContainer.style.display = 'none';
          if (securityVerification) securityVerification.style.display = 'none';
          
          // Show dashboard
          const dashboardContainer = document.getElementById('dashboard-container');
          if (dashboardContainer) dashboardContainer.style.display = 'block';
          
          // Reset form
          resetCardForm();
          
          // Show verification banner
          checkVerificationStatus();
          
          // Update UI
          updateUserUI();
          
          // Reset inactivity timer
          resetInactivityTimer();
        });
      }
    }
    
    // Bank transfer handler
    function setupBankTransfer() {
      const submitBankTransfer = document.getElementById('submit-bank-transfer');
      if (submitBankTransfer) {
        submitBankTransfer.addEventListener('click', function() {
          const referenceNumber = document.getElementById('reference-number');
          const referenceError = document.getElementById('reference-error');
          const receiptFile = document.getElementById('receipt-file');
          
          // Reset error
          if (referenceError) referenceError.style.display = 'none';
          
          // Validate reference number
          if (!referenceNumber || !referenceNumber.value) {
            if (referenceError) {
              referenceError.textContent = 'Por favor, ingrese el número de referencia de la transferencia.';
              referenceError.style.display = 'block';
            }
            return;
          }
          
          // Validate receipt upload
          if (!receiptFile || !receiptFile.files || !receiptFile.files[0]) {
            showToast('error', 'Error', 'Por favor, suba el comprobante de pago.');
            return;
          }
          
          // Show loading overlay
          const loadingOverlay = document.getElementById('loading-overlay');
          if (loadingOverlay) loadingOverlay.style.display = 'flex';
          
          // Animate progress bar
          const progressBar = document.getElementById('progress-bar');
          const loadingText = document.getElementById('loading-text');
          
          if (progressBar && loadingText) {
            gsap.to(progressBar, {
              width: '100%',
              duration: 2,
              ease: 'power1.inOut',
              onUpdate: function() {
                const progress = Math.round(this.progress() * 100);
                if (progress < 30) {
                  loadingText.textContent = "Subiendo comprobante...";
                } else if (progress < 70) {
                  loadingText.textContent = "Verificando información...";
                } else {
                  loadingText.textContent = "Registrando transferencia...";
                }
              },
              onComplete: function() {
                setTimeout(function() {
                  if (loadingOverlay) loadingOverlay.style.display = 'none';
                  
                  // Añadir transacción pendiente
                  addTransaction({
                    type: 'pending',
                    amount: selectedAmount.usd,
                    amountBs: selectedAmount.bs,
                    amountEur: selectedAmount.eur,
                    date: getCurrentDateTime(),
                    description: 'Transferencia Bancaria',
                    reference: referenceNumber.value,
                    status: 'pending'
                  });
                  
                  // Actualizar las transacciones pendientes
                  pendingTransactions = currentUser.transactions.filter(t => t.type === 'pending');
                  updatePendingTransactionsBadge();
                  
                  // Show transfer processing modal
                  const transferModal = document.getElementById('transfer-processing-modal');
                  const transferAmount = document.getElementById('transfer-amount');
                  const transferReference = document.getElementById('transfer-reference');
                  
                  if (transferModal) transferModal.style.display = 'flex';
                  if (transferAmount) transferAmount.textContent = formatCurrency(selectedAmount.usd, 'usd');
                  if (transferReference) transferReference.textContent = referenceNumber.value;
                  
                  // Automatically show the verification banner after bank transfer
                  checkVerificationStatus();
                  
                  // Reset form
                  if (referenceNumber) referenceNumber.value = '';
                  if (receiptFile) receiptFile.value = '';
                  
                  const receiptPreview = document.getElementById('receipt-preview');
                  const receiptUpload = document.getElementById('receipt-upload');
                  
                  if (receiptPreview) receiptPreview.style.display = 'none';
                  if (receiptUpload) receiptUpload.style.display = 'block';
                  
                  // Reset amount selection
                  document.querySelectorAll('.bank-amount').forEach(el => {
                    el.classList.remove('selected');
                  });
                  
                  document.querySelector('.bank-amount').classList.add('selected');
                  
                  const customAmountBank = document.getElementById('custom-amount-bank');
                  const customAmountBankPreview = document.getElementById('custom-amount-bank-preview');
                  
                  if (customAmountBank) customAmountBank.value = '';
                  if (customAmountBankPreview) customAmountBankPreview.style.display = 'none';
                }, 500);
              }
            });
          }
          
          // Reset inactivity timer
          resetInactivityTimer();
        });
      }
      
      // Bank amount selection
      document.querySelectorAll('.bank-amount').forEach(option => {
        option.addEventListener('click', function() {
          // Remove selected class from all options
          document.querySelectorAll('.bank-amount').forEach(el => {
            el.classList.remove('selected');
          });
          
          // Add selected class to clicked option
          this.classList.add('selected');
          
          // Update selected amount
          selectedAmount.usd = parseInt(this.dataset.amount);
          selectedAmount.bs = parseInt(this.dataset.bs);
          selectedAmount.eur = parseInt(this.dataset.eur);
          
          // Reset custom amount input
          const customAmountBank = document.getElementById('custom-amount-bank');
          const customAmountBankPreview = document.getElementById('custom-amount-bank-preview');
          
          if (customAmountBank) customAmountBank.value = '';
          if (customAmountBankPreview) customAmountBankPreview.style.display = 'none';
          
          // Reset inactivity timer
          resetInactivityTimer();
        });
      });
      
      // Continue button for bank transfer
      const transferProcessingContinue = document.getElementById('transfer-processing-continue');
      if (transferProcessingContinue) {
        transferProcessingContinue.addEventListener('click', function() {
          const transferModal = document.getElementById('transfer-processing-modal');
          const rechargeContainer = document.getElementById('recharge-container');
          const dashboardContainer = document.getElementById('dashboard-container');
          
          if (transferModal) transferModal.style.display = 'none';
          if (rechargeContainer) rechargeContainer.style.display = 'none';
          if (dashboardContainer) dashboardContainer.style.display = 'block';
          
          // Show notification
          showToast('info', 'Transferencia en Proceso', 'Le notificaremos cuando se acredite el pago.');
          
          // Reset inactivity timer
          resetInactivityTimer();
        });
      }
    }
    
    // Mobile payment handler
    function setupMobilePayment() {
      const submitMobilePayment = document.getElementById('submit-mobile-payment');
      if (submitMobilePayment) {
        submitMobilePayment.addEventListener('click', function() {
          const referenceNumber = document.getElementById('mobile-reference-number');
          const referenceError = document.getElementById('mobile-reference-error');
          const receiptFile = document.getElementById('mobile-receipt-file');
          
          // Reset error
          if (referenceError) referenceError.style.display = 'none';
          
          // Validate reference number
          if (!referenceNumber || !referenceNumber.value) {
            if (referenceError) {
              referenceError.textContent = 'Por favor, ingrese el número de referencia del pago móvil.';
              referenceError.style.display = 'block';
            }
            return;
          }
          
          // Validate receipt upload
          if (!receiptFile || !receiptFile.files || !receiptFile.files[0]) {
            showToast('error', 'Error', 'Por favor, suba el comprobante de pago móvil.');
            return;
          }
          
          // Show loading overlay
          const loadingOverlay = document.getElementById('loading-overlay');
          if (loadingOverlay) loadingOverlay.style.display = 'flex';
          
          // Animate progress bar
          const progressBar = document.getElementById('progress-bar');
          const loadingText = document.getElementById('loading-text');
          
          if (progressBar && loadingText) {
            gsap.to(progressBar, {
              width: '100%',
              duration: 2,
              ease: 'power1.inOut',
              onUpdate: function() {
                const progress = Math.round(this.progress() * 100);
                if (progress < 30) {
                  loadingText.textContent = "Subiendo comprobante...";
                } else if (progress < 70) {
                  loadingText.textContent = "Verificando información...";
                } else {
                  loadingText.textContent = "Registrando pago móvil...";
                }
              },
              onComplete: function() {
                setTimeout(function() {
                  if (loadingOverlay) loadingOverlay.style.display = 'none';
                  
                  // Añadir transacción pendiente
                  addTransaction({
                    type: 'pending',
                    amount: selectedAmount.usd,
                    amountBs: selectedAmount.bs,
                    amountEur: selectedAmount.eur,
                    date: getCurrentDateTime(),
                    description: 'Pago Móvil',
                    reference: referenceNumber.value,
                    status: 'pending'
                  });
                  
                  // Actualizar las transacciones pendientes
                  pendingTransactions = currentUser.transactions.filter(t => t.type === 'pending');
                  updatePendingTransactionsBadge();
                  
                  // Show transfer processing modal
                  const transferModal = document.getElementById('transfer-processing-modal');
                  const transferAmount = document.getElementById('transfer-amount');
                  const transferReference = document.getElementById('transfer-reference');
                  
                  if (transferModal) transferModal.style.display = 'flex';
                  if (transferAmount) transferAmount.textContent = formatCurrency(selectedAmount.usd, 'usd');
                  if (transferReference) transferReference.textContent = referenceNumber.value;
                  
                  // Automatically show the verification banner after mobile payment
                  checkVerificationStatus();
                  
                  // Reset form
                  if (referenceNumber) referenceNumber.value = '';
                  if (receiptFile) receiptFile.value = '';
                  
                  const receiptPreview = document.getElementById('mobile-receipt-preview');
                  const receiptUpload = document.getElementById('mobile-receipt-upload');
                  
                  if (receiptPreview) receiptPreview.style.display = 'none';
                  if (receiptUpload) receiptUpload.style.display = 'block';
                  
                  // Reset amount selection
                  document.querySelectorAll('.mobile-amount').forEach(el => {
                    el.classList.remove('selected');
                  });
                  
                  document.querySelector('.mobile-amount').classList.add('selected');
                  
                  const customAmountMobile = document.getElementById('custom-amount-mobile');
                  const customAmountMobilePreview = document.getElementById('custom-amount-mobile-preview');
                  
                  if (customAmountMobile) customAmountMobile.value = '';
                  if (customAmountMobilePreview) customAmountMobilePreview.style.display = 'none';
                }, 500);
              }
            });
          }
          
          // Reset inactivity timer
          resetInactivityTimer();
        });
      }
      
      // Mobile amount selection
      document.querySelectorAll('.mobile-amount').forEach(option => {
        option.addEventListener('click', function() {
          // Remove selected class from all options
          document.querySelectorAll('.mobile-amount').forEach(el => {
            el.classList.remove('selected');
          });
          
          // Add selected class to clicked option
          this.classList.add('selected');
          
          // Update selected amount
          selectedAmount.usd = parseInt(this.dataset.amount);
          selectedAmount.bs = parseInt(this.dataset.bs);
          selectedAmount.eur = parseInt(this.dataset.eur);
          
          // Reset custom amount input
          const customAmountMobile = document.getElementById('custom-amount-mobile');
          const customAmountMobilePreview = document.getElementById('custom-amount-mobile-preview');
          
          if (customAmountMobile) customAmountMobile.value = '';
          if (customAmountMobilePreview) customAmountMobilePreview.style.display = 'none';
          
          // Reset inactivity timer
          resetInactivityTimer();
        });
      });
    }
    
    // Identity Verification
    function setupIdentityVerification() {
      // Verify identity button in settings
      const verifyIdentityBtn = document.getElementById('verify-identity-btn');
      if (verifyIdentityBtn) {
        verifyIdentityBtn.addEventListener('click', function() {
          const verificationModal = document.getElementById('verification-modal');
          if (verificationModal) {
            verificationModal.style.display = 'flex';
            document.getElementById('id-upload-container').style.display = 'block';
            
            // Reset inactivity timer
            resetInactivityTimer();
          }
        });
      }
      
      // ID upload handling
      const idFrontUpload = document.getElementById('id-front-upload');
      const idFrontFile = document.getElementById('id-front-file');
      const idFrontPreview = document.getElementById('id-front-preview');
      const idFrontFilename = document.getElementById('id-front-filename');
      const idFrontFilesize = document.getElementById('id-front-filesize');
      const idFrontRemove = document.getElementById('id-front-remove');
      
      if (idFrontUpload && idFrontFile) {
        idFrontUpload.addEventListener('click', function() {
          idFrontFile.click();
          
          // Reset inactivity timer
          resetInactivityTimer();
        });
        
        idFrontFile.addEventListener('change', function() {
          if (this.files && this.files[0]) {
            const file = this.files[0];
            
            if (file.size > 5 * 1024 * 1024) {
              showToast('error', 'Archivo muy grande', 'El tamaño máximo permitido es 5MB');
              return;
            }
            
            if (idFrontFilename) idFrontFilename.textContent = file.name;
            if (idFrontFilesize) idFrontFilesize.textContent = formatFileSize(file.size);
            if (idFrontPreview) idFrontPreview.style.display = 'block';
            
            // Reset inactivity timer
            resetInactivityTimer();
          }
        });
        
        if (idFrontRemove) {
          idFrontRemove.addEventListener('click', function() {
            if (idFrontFile) idFrontFile.value = '';
            if (idFrontPreview) idFrontPreview.style.display = 'none';
            
            // Reset inactivity timer
            resetInactivityTimer();
          });
        }
      }
      
      const idBackUpload = document.getElementById('id-back-upload');
      const idBackFile = document.getElementById('id-back-file');
      const idBackPreview = document.getElementById('id-back-preview');
      const idBackFilename = document.getElementById('id-back-filename');
      const idBackFilesize = document.getElementById('id-back-filesize');
      const idBackRemove = document.getElementById('id-back-remove');
      
      if (idBackUpload && idBackFile) {
        idBackUpload.addEventListener('click', function() {
          idBackFile.click();
          
          // Reset inactivity timer
          resetInactivityTimer();
        });
        
        idBackFile.addEventListener('change', function() {
          if (this.files && this.files[0]) {
            const file = this.files[0];
            
            if (file.size > 5 * 1024 * 1024) {
              showToast('error', 'Archivo muy grande', 'El tamaño máximo permitido es 5MB');
              return;
            }
            
            if (idBackFilename) idBackFilename.textContent = file.name;
            if (idBackFilesize) idBackFilesize.textContent = formatFileSize(file.size);
            if (idBackPreview) idBackPreview.style.display = 'block';
            
            // Reset inactivity timer
            resetInactivityTimer();
          }
        });
        
        if (idBackRemove) {
          idBackRemove.addEventListener('click', function() {
            if (idBackFile) idBackFile.value = '';
            if (idBackPreview) idBackPreview.style.display = 'none';
            
            // Reset inactivity timer
            resetInactivityTimer();
          });
        }
      }
      
      // Submit verification
      const submitVerification = document.getElementById('submit-verification');
      if (submitVerification) {
        submitVerification.addEventListener('click', function() {
          const idFrontFile = document.getElementById('id-front-file');
          const idBackFile = document.getElementById('id-back-file');
          
          // Validate uploads
          if (!idFrontFile || !idFrontFile.files || !idFrontFile.files[0] ||
              !idBackFile || !idBackFile.files || !idBackFile.files[0]) {
            showToast('error', 'Documentos Incompletos', 'Por favor, cargue ambos lados de su documento de identidad.');
            return;
          }
          
          // Show loading overlay
          const loadingOverlay = document.getElementById('loading-overlay');
          if (loadingOverlay) loadingOverlay.style.display = 'flex';
          
          // Animate progress bar
          const progressBar = document.getElementById('progress-bar');
          const loadingText = document.getElementById('loading-text');
          
          if (progressBar && loadingText) {
            gsap.to(progressBar, {
              width: '100%',
              duration: 2,
              ease: 'power2.inOut',
              onUpdate: function() {
                const progress = Math.round(this.progress() * 100);
                if (progress < 30) {
                  loadingText.textContent = "Subiendo documentos...";
                } else if (progress < 70) {
                  loadingText.textContent = "Procesando información...";
                } else {
                  loadingText.textContent = "Completando verificación...";
                }
              },
              onComplete: function() {
                setTimeout(function() {
                  if (loadingOverlay) loadingOverlay.style.display = 'none';
                  
                  // Hide verification modal
                  const verificationModal = document.getElementById('verification-modal');
                  const securityVerification = document.getElementById('security-verification');
                  
                  if (verificationModal) verificationModal.style.display = 'none';
                  if (securityVerification) securityVerification.style.display = 'none';
                  
                  // Actualizar estado de verificación
                  verificationStatus.status = 'pending';
                  verificationStatus.hasUploadedId = true;
                  saveVerificationStatus();
                  
                  // Show success toast
                  showToast('success', 'Documentos Recibidos', 'Sus documentos han sido recibidos correctamente. Estamos verificando su identidad. Este proceso puede tardar hasta 24 horas laborables.');
                  
                  // Reset form
                  if (idFrontFile) idFrontFile.value = '';
                  if (idBackFile) idBackFile.value = '';
                  
                  const idFrontPreview = document.getElementById('id-front-preview');
                  const idBackPreview = document.getElementById('id-back-preview');
                  
                  if (idFrontPreview) idFrontPreview.style.display = 'none';
                  if (idBackPreview) idBackPreview.style.display = 'none';
                  
                  // Update verification banner
                  checkVerificationStatus();
                }, 500);
              }
            });
          }
          
          // Reset inactivity timer
          resetInactivityTimer();
        });
      }
      
      // Verify later button
      document.querySelectorAll('#verify-later, #verify-later-from-modal').forEach(btn => {
        if (btn) {
          btn.addEventListener('click', function() {
            const verificationModal = document.getElementById('verification-modal');
            const securityVerification = document.getElementById('security-verification');
            
            if (verificationModal) verificationModal.style.display = 'none';
            if (securityVerification) securityVerification.style.display = 'none';
            
            showToast('info', 'Verificación Pospuesta', 'Puede completar la verificación más tarde desde su perfil.');
            
            // Reset inactivity timer
            resetInactivityTimer();
          });
        }
      });
      
      // Start verification
      const startVerification = document.getElementById('start-verification');
      if (startVerification) {
        startVerification.addEventListener('click', function() {
          const securityVerification = document.getElementById('security-verification');
          const verificationModal = document.getElementById('verification-modal');
          
          if (securityVerification) securityVerification.style.display = 'none';
          if (verificationModal) {
            verificationModal.style.display = 'flex';
            document.getElementById('id-upload-container').style.display = 'block';
          }
          
          // Reset inactivity timer
          resetInactivityTimer();
        });
      }
    }
    
    // Update UI with user data
    function updateUserUI() {
      // Update user display name
      if (currentUser.name) {
        const userInitials = currentUser.name.split(' ').map(n => n[0]).join('').toUpperCase();
        
        const headerAvatar = document.getElementById('header-avatar');
        const headerUsername = document.getElementById('header-username');
        
        if (headerAvatar) headerAvatar.textContent = userInitials;
        if (headerUsername) headerUsername.textContent = currentUser.name;
        
        // Update balance label with user name
        const balanceLabelName = document.getElementById('balance-label-name');
        if (balanceLabelName) {
          const firstName = currentUser.name.split(' ')[0];
          balanceLabelName.textContent = `${firstName}, tu saldo disponible`;
        }
      }
      
      // Update settings form
      const settingsName = document.getElementById('settings-name');
      const settingsEmail = document.getElementById('settings-email');
      
      if (settingsName) settingsName.value = currentUser.name;
      if (settingsEmail) settingsEmail.value = currentUser.email;
      
      // Update dashboard
      updateDashboardUI();
    }
    
    // Update dashboard UI
    function updateDashboardUI() {
      // Update balance displays
      const mainBalanceValue = document.getElementById('main-balance-value');
      const statUsd = document.getElementById('stat-usd');
      const statEur = document.getElementById('stat-eur');
      
      if (mainBalanceValue) {
        mainBalanceValue.textContent = formatCurrency(currentUser.balance.bs, 'bs').replace('Bs ', '');
      }
      
      if (statUsd) statUsd.textContent = formatCurrency(currentUser.balance.usd, 'usd');
      if (statEur) statEur.textContent = formatCurrency(currentUser.balance.eur, 'eur');
      
      // Update balance equivalents
      const balanceEquivalents = document.querySelectorAll('.balance-equivalent');
      if (balanceEquivalents.length >= 2) {
        const usdSpan = balanceEquivalents[0].querySelector('span');
        const eurSpan = balanceEquivalents[1].querySelector('span');
        
        if (usdSpan) usdSpan.textContent = `≈ ${formatCurrency(currentUser.balance.usd, 'usd')}`;
        if (eurSpan) eurSpan.textContent = `≈ ${formatCurrency(currentUser.balance.eur, 'eur')}`;
      }
      
      // Update transaction count
      const statTransactions = document.getElementById('stat-transactions');
      if (statTransactions) {
        statTransactions.textContent = currentUser.transactions.length || '0';
      }
      
      // Check for pending transactions
      updatePendingTransactionsBadge();
      
      // Update recent transactions
      updateRecentTransactions();
    }
    
    // Añadir una transacción
    function addTransaction(transaction) {
      // Añadir al principio del array para que las más nuevas aparezcan primero
      currentUser.transactions.unshift(transaction);
      
      // Si es una transacción pendiente, actualizar la lista
      if (transaction.type === 'pending') {
        pendingTransactions = currentUser.transactions.filter(t => t.type === 'pending');
      }
      
      // Guardar transacciones
      saveTransactionsData();
      
      // Actualizar vista
      updateRecentTransactions();
      
      // Actualizar conteo de transacciones
      const statTransactions = document.getElementById('stat-transactions');
      if (statTransactions) {
        statTransactions.textContent = currentUser.transactions.length || '0';
      }
    }
    
    // Create transaction HTML element
    function createTransactionElement(transaction) {
      const element = document.createElement('div');
      element.className = 'transaction-item';
      element.setAttribute('aria-label', `Transacción: ${transaction.description}`);
      
      let iconClass = 'fas fa-arrow-right';
      let typeClass = transaction.type;
      let amountPrefix = '';
      
      if (transaction.type === 'deposit') {
        iconClass = 'fas fa-arrow-down';
        amountPrefix = '+';
      } else if (transaction.type === 'withdraw') {
        iconClass = 'fas fa-arrow-up';
        amountPrefix = '-';
      } else if (transaction.type === 'pending') {
        iconClass = 'fas fa-clock';
        amountPrefix = '+';
      }
      
      // Sanitizar datos
      const safeDescription = escapeHTML(transaction.description);
      const safeDate = escapeHTML(transaction.date);
      
      let transactionHTML = `
        <div class="transaction-icon ${typeClass}">
          <i class="${iconClass}"></i>
        </div>
        <div class="transaction-content">
          <div class="transaction-title">${safeDescription}
      `;
      
      // Badge para estados pendientes
      if (transaction.type === 'pending') {
        transactionHTML += `
          <span class="transaction-badge pending">
            <i class="fas fa-clock"></i> Pendiente
          </span>
        `;
      }
      
      transactionHTML += `
          </div>
          <div class="transaction-details">
            <div class="transaction-date">
              <i class="far fa-calendar"></i>
              <span>${safeDate}</span>
            </div>
      `;
      
      if (transaction.card) {
        const safeCard = escapeHTML(transaction.card);
        transactionHTML += `
          <div class="transaction-category">
            <i class="far fa-credit-card"></i>
            <span>Tarjeta ${safeCard}</span>
          </div>
        `;
      }
      
      if (transaction.reference) {
        const safeReference = escapeHTML(transaction.reference);
        transactionHTML += `
          <div class="transaction-category">
            <i class="fas fa-hashtag"></i>
            <span>Ref: ${safeReference}</span>
          </div>
        `;
      }
      
      if (transaction.destination) {
        const safeDestination = escapeHTML(transaction.destination);
        transactionHTML += `
          <div class="transaction-category">
            <i class="far fa-user"></i>
            <span>Destino: ${safeDestination}</span>
          </div>
        `;
      }
      
      transactionHTML += `
          </div>
        </div>
        <div class="transaction-amount ${typeClass}">
          ${amountPrefix}${formatCurrency(transaction.amount, 'usd')}
        </div>
      `;
      
      element.innerHTML = transactionHTML;
      
      return element;
    }
    
    // Update recent transactions
    function updateRecentTransactions() {
      // Update transaction lists
      const recentTransactions = document.getElementById('recent-transactions');
      const allTransactions = document.getElementById('all-transactions');
      
      if (recentTransactions) {
        recentTransactions.innerHTML = '';
        
        if (currentUser.transactions.length === 0) {
          const noTransactionsMsg = document.createElement('div');
          noTransactionsMsg.className = 'transaction-item';
          noTransactionsMsg.innerHTML = `
            <div class="transaction-icon" style="background: var(--neutral-300); color: var(--neutral-600);">
              <i class="fas fa-receipt"></i>
            </div>
            <div class="transaction-content">
              <div class="transaction-title">No hay transacciones recientes</div>
              <div class="transaction-details">
                <div class="transaction-date">
                  <i class="far fa-calendar"></i>
                  <span>Realice una recarga para ver su historial</span>
                </div>
              </div>
            </div>
          `;
          recentTransactions.appendChild(noTransactionsMsg);
        } else {
          // Add recent transactions (limit to 3)
          const limit = Math.min(currentUser.transactions.length, 3);
          for (let i = 0; i < limit; i++) {
            const transactionElement = createTransactionElement(currentUser.transactions[i]);
            recentTransactions.appendChild(transactionElement);
          }
        }
      }
      
      if (allTransactions) {
        allTransactions.innerHTML = '';
        
        if (currentUser.transactions.length === 0) {
          const noTransactionsMsg = document.createElement('div');
          noTransactionsMsg.className = 'transaction-item';
          noTransactionsMsg.innerHTML = `
            <div class="transaction-icon" style="background: var(--neutral-300); color: var(--neutral-600);">
              <i class="fas fa-receipt"></i>
            </div>
            <div class="transaction-content">
              <div class="transaction-title">No hay transacciones</div>
              <div class="transaction-details">
                <div class="transaction-date">
                  <i class="far fa-calendar"></i>
                  <span>Su historial de transacciones aparecerá aquí</span>
                </div>
              </div>
            </div>
          `;
          allTransactions.appendChild(noTransactionsMsg);
        } else {
          // Add all transactions
          currentUser.transactions.forEach(transaction => {
            const transactionElement = createTransactionElement(transaction);
            allTransactions.appendChild(transactionElement);
          });
        }
      }
    }
    
    // Update submit button text based on selected amount
    function updateSubmitButtonText() {
      const submitPayment = document.getElementById('submit-payment');
      if (submitPayment) {
        submitPayment.innerHTML = `<i class="fas fa-credit-card"></i> Pagar ${formatCurrency(selectedAmount.usd, 'usd')}`;
      }
    }
    
    // Reset custom amount inputs
    function resetCustomAmountInputs() {
      const customAmount = document.getElementById('custom-amount');
      const customAmountPreview = document.getElementById('custom-amount-preview');
      
      if (customAmount) customAmount.value = '';
      if (customAmountPreview) customAmountPreview.style.display = 'none';
      
      const customAmountBank = document.getElementById('custom-amount-bank');
      const customAmountBankPreview = document.getElementById('custom-amount-bank-preview');
      
      if (customAmountBank) customAmountBank.value = '';
      if (customAmountBankPreview) customAmountBankPreview.style.display = 'none';
      
      const customAmountMobile = document.getElementById('custom-amount-mobile');
      const customAmountMobilePreview = document.getElementById('custom-amount-mobile-preview');
      
      if (customAmountMobile) customAmountMobile.value = '';
      if (customAmountMobilePreview) customAmountMobilePreview.style.display = 'none';
    }
    
    // Handle custom amount input
    function handleCustomAmountInput(input, previewId, bsId, eurId) {
      let value = parseInt(input.value);
      
      // Establecer límites según el método de pago
      let min = 25;
      let max = 500;
      
      if (selectedPaymentMethod === 'card-payment') {
        min = 500;
        max = 8000; // Actualizado a 8000 como solicitado
      }
      
      // Enforce min/max
      if (isNaN(value)) value = 0;
      if (value < min) value = min;
      if (value > max) value = max;
      
      if (value && !isNaN(value)) {
        // Calculate equivalents
        const bsValue = value * CONFIG.EXCHANGE_RATES.USD_TO_BS;
        const eurValue = value * CONFIG.EXCHANGE_RATES.USD_TO_EUR;
        
        // Update selected amount
        selectedAmount.usd = value;
        selectedAmount.bs = bsValue;
        selectedAmount.eur = eurValue;
        
        // Display equivalents
        const bsElement = document.getElementById(bsId);
        const eurElement = document.getElementById(eurId);
        const previewElement = document.getElementById(previewId);
        
        if (bsElement) {
          bsElement.textContent = `Bs ${bsValue.toLocaleString('es-VE', { minimumFractionDigits: 2, maximumFractionDigits: 2 })}`;
        }
        
        if (eurElement) {
          eurElement.textContent = `€${eurValue.toLocaleString('de-DE', { minimumFractionDigits: 2, maximumFractionDigits: 2 })}`;
        }
        
        if (previewElement) {
          previewElement.style.display = 'block';
        }
        
        // Update payment button if it's card payment
        if (selectedPaymentMethod === 'card-payment') {
          updateSubmitButtonText();
        }
        
        // Remove selection from predefined amounts
        const amountOptions = document.querySelectorAll(`.amount-option${selectedPaymentMethod === 'bank-payment' ? '.bank-amount' : selectedPaymentMethod === 'mobile-payment' ? '.mobile-amount' : ''}`);
        amountOptions.forEach(el => {
          el.classList.remove('selected');
        });
      } else {
        const previewElement = document.getElementById(previewId);
        if (previewElement) previewElement.style.display = 'none';
      }
    }
    
    // Validate card form
    function validateCardForm() {
      const cardNumber = document.getElementById('cardNumber');
      const cardName = document.getElementById('cardName');
      const cardMonth = document.getElementById('cardMonth');
      const cardYear = document.getElementById('cardYear');
      const cardCvv = document.getElementById('cardCvv');
      
      const cardNumberError = document.getElementById('card-number-error');
      const cardNameError = document.getElementById('card-name-error');
      const cardDateError = document.getElementById('card-date-error');
      const cardCvvError = document.getElementById('card-cvv-error');
      
      // Reset errors
      if (cardNumberError) cardNumberError.style.display = 'none';
      if (cardNameError) cardNameError.style.display = 'none';
      if (cardDateError) cardDateError.style.display = 'none';
      if (cardCvvError) cardCvvError.style.display = 'none';
      
      // Enhanced validation
      let isValid = true;
      
      if (!cardName || !cardName.value.trim()) {
        if (cardNameError) {
          cardNameError.style.display = 'block';
          cardNameError.textContent = 'Por favor, introduce el nombre del titular.';
        }
        isValid = false;
      }
      
      // Validar con algoritmo de Luhn
      if (!cardNumber || !validateCardNumber(cardNumber.value.replace(/\s/g, ''))) {
        if (cardNumberError) {
          cardNumberError.style.display = 'block';
          cardNumberError.textContent = 'Número de tarjeta no válido.';
        }
        isValid = false;
      }
      
      if (!cardMonth || !cardMonth.value || !cardYear || !cardYear.value) {
        if (cardDateError) {
          cardDateError.style.display = 'block';
          cardDateError.textContent = 'Por favor, selecciona una fecha válida.';
        }
        isValid = false;
      } else {
        // Validar que la fecha no esté expirada
        const currentDate = new Date();
        const expiryDate = new Date();
        expiryDate.setFullYear(parseInt(cardYear.value), parseInt(cardMonth.value), 1);
        expiryDate.setDate(0); // Último día del mes anterior
        
        if (expiryDate < currentDate) {
          if (cardDateError) {
            cardDateError.style.display = 'block';
            cardDateError.textContent = 'La tarjeta ha expirado.';
          }
          isValid = false;
        }
      }
      
      if (!cardCvv || !cardCvv.value || cardCvv.value.length < 3 || !/^\d+$/.test(cardCvv.value)) {
        if (cardCvvError) {
          cardCvvError.style.display = 'block';
          cardCvvError.textContent = 'CVV inválido.';
        }
        isValid = false;
      }
      
      return isValid;
    }
    
    // Reset card form
    function resetCardForm() {
      const cardNumber = document.getElementById('cardNumber');
      const cardName = document.getElementById('cardName');
      const cardMonth = document.getElementById('cardMonth');
      const cardYear = document.getElementById('cardYear');
      const cardCvv = document.getElementById('cardCvv');
      
      // Reset inputs
      if (cardNumber) cardNumber.value = '';
      if (cardName) cardName.value = '';
      if (cardMonth) cardMonth.value = '';
      if (cardYear) cardYear.value = '';
      if (cardCvv) cardCvv.value = '';
      
      // Reset displays
      const cardNumberDisplay = document.getElementById('card-number-display');
      const cardHolderDisplay = document.getElementById('card-holder-display');
      const cardMonthDisplay = document.getElementById('card-month-display');
      const cardYearDisplay = document.getElementById('card-year-display');
      const cardCvvDisplay = document.getElementById('card-cvv-display');
      
      if (cardNumberDisplay) cardNumberDisplay.textContent = '•••• •••• •••• ••••';
      if (cardHolderDisplay) cardHolderDisplay.textContent = '••••••• •••••••';
      if (cardMonthDisplay) cardMonthDisplay.textContent = '••';
      if (cardYearDisplay) cardYearDisplay.textContent = '••';
      if (cardCvvDisplay) cardCvvDisplay.textContent = '•••';
      
      // Reset custom amount input
      resetCustomAmountInputs();
      
      // Reset amount options
      document.querySelectorAll('.amount-option').forEach(el => {
        el.classList.remove('selected');
      });
      
      // Select first amount option
      const firstAmountOption = document.querySelector('.amount-option');
      if (firstAmountOption) firstAmountOption.classList.add('selected');
      
      // Update selected amount
      if (firstAmountOption) {
        selectedAmount.usd = parseInt(firstAmountOption.dataset.amount);
        selectedAmount.bs = parseInt(firstAmountOption.dataset.bs);
        selectedAmount.eur = parseInt(firstAmountOption.dataset.eur);
      }
      
      // Update payment button text
      updateSubmitButtonText();
    }
  </script>
</body>
</html>
